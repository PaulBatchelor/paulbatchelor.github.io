<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">

<h3>4. CMP setup</h3>

<p><a id="wm_002_0045"></a></p>

<h4>4.1. Setting up for getting size</h4>

<p><a id="wm_002_0046"></a>Initializes cmp interface for getting totally size of
message. This will store the number of bytes used
in the variable <code>sz</code>.
<div><b><i>&lt;&lt;moncmp_function_declarations&gt;&gt;=</i></b></div><pre><code>void moncmp_init_getsize(cmp_ctx_t *cmp, size_t *sz);</pre></code>
<div><b><i>&lt;&lt;moncmp_functions&gt;&gt;=</i></b></div><pre><code>void moncmp_init_getsize(cmp_ctx_t *cmp, size_t *sz)
{
    cmp_init(cmp, sz, NULL, NULL, get_size);
}</pre></code>

<h4>4.2. Setup for write</h4>

<p><a id="wm_002_0054"></a>This sets up the cmp interface up for writing data to
a properly allocated memory buffer <code>buf</code>.
<div><b><i>&lt;&lt;moncmp_function_declarations&gt;&gt;=</i></b></div><pre><code>void moncmp_init_write(moncmp_d *m,
                       cmp_ctx_t *cmp,
                       uint8_t *buf);</pre></code>
<div><b><i>&lt;&lt;moncmp_functions&gt;&gt;=</i></b></div><pre><code>void moncmp_init_write(moncmp_d *m,
                       cmp_ctx_t *cmp,
                       uint8_t *buf)
{
    m-&gt;buf = buf;
    m-&gt;pos = 0;
    cmp_init(cmp, m, NULL, NULL, memwrite);
}</pre></code>

<h4>4.3. Setup for reading</h4>

<p><a id="wm_002_0060"></a>This sets up the <code>cmp</code> interface for reading from a buffer
<code>buf</code>.
<div><b><i>&lt;&lt;moncmp_function_declarations&gt;&gt;=</i></b></div><pre><code>void moncmp_init_read(moncmp_d *m,
                      cmp_ctx_t *cmp,
                      uint8_t *buf,
                      size_t sz);</pre></code>
<div><b><i>&lt;&lt;moncmp_functions&gt;&gt;=</i></b></div><pre><code>void moncmp_init_read(moncmp_d *m,
                      cmp_ctx_t *cmp,
                      uint8_t *buf,
                      size_t sz)
{
    m-&gt;pos = 0;
    m-&gt;buf = buf;
    m-&gt;sz = sz;
    cmp_init(cmp, m, memread, NULL, NULL);
}</pre></code>
<p></p>
<br>
<p><hr>

<a href="/proj/monolith/program/wm_002_0002">prev</a> | <a href="/proj/monolith/program/wm_002">home</a> | <a href="/proj/monolith/program/wm_002_0066">next</a></p>
</div>
</body>
</html>
