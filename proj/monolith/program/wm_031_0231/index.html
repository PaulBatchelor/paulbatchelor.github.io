<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">

<h3>10. Line Width</h3>

<p><a id="wm_031_0231"></a>Given a line of text, calculate the pixel width.
<div><b><i>&lt;&lt;funcdefs&gt;&gt;=</i></b></div><pre><code>int macfont_line_width(macfont_info *fnt,
                       const char *str,
                       int nchars);</pre></code>
<div><b><i>&lt;&lt;funcs&gt;&gt;=</i></b></div><pre><code>int macfont_line_width(macfont_info *fnt,
                       const char *str,
                       int nchars)
{
    int lw;
    int n;

    lw = 0;

    for (n = 0; n &lt; nchars; n++) {
        lw += get_charwidth(fnt, str[n]);
    }

    return lw;
}</pre></code>
<div><b><i>&lt;&lt;janet_entries&gt;&gt;=</i></b></div><pre><code>{F("macfont-linewidth"), j_macfont_linewidth, NULL},</pre></code>
<div><b><i>&lt;&lt;janet_funcs&gt;&gt;=</i></b></div><pre><code>static Janet j_macfont_linewidth(int32_t argc, Janet *argv)
{
    janet_macfont_d *mf;
    const char *str;
    int w;

    janet_fixarity(argc, 2);

    mf = get_macfont(argv, 0);
    str = (const char *)janet_getstring(argv, 1);

    w = macfont_line_width(&mf-&gt;info, str, strlen(str));

    return janet_wrap_integer(w);
}</pre></code>
</div>
</body>
</html>
