<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">

<h3>3. Grayscale Conversion</h3>

<p><a id="wm_029_0030"></a>Before dither can be applied, the RGB colorspace needs to be
converted to grayscale. This <code>pixel2grayscale</code> function will
take in an RGB pixel and return an integer between 0 and
225.
</p>
<p>A standard linear conversion is used (no gamma correction).
Not great, but it's fast and good enough.
<div><b><i>&lt;&lt;grayscale&gt;&gt;=</i></b></div><pre><code>static int pixel2grayscale(monolith_pixel *p)
{
    double oned255;
    double r, g, b;
    double gray;

    oned255 = 1.0 / 255;

    r = p-&gt;r * oned255;
    g = p-&gt;g * oned255;
    b = p-&gt;b * oned255;

    gray = 0.2126 * r + 0.715 * g + 0.0722 * b;

    return floor(gray * 255);
}</pre></code>
</div>
</body>
</html>
