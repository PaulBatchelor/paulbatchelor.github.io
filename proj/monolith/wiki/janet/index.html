<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">
<title>Using Janet In Monolith</title>
<h1>Using Janet In Monolith</h1>
<p>This is a general overview for using Janet in Monolith.
</p>
<p>Janet was introduced as an alternative language interface to
Scheme. It's still in the early stages, but has proven
itself to be a very promising language with a flexible C
API.
</p>
<p>Here is just enough code to be able to evaluate runt code to 
produce an audio file:
</p>
<div><b><i>&lt;&lt;janet_simple.janet&gt;&gt;=</i></b></div><pre><code>(monolith/runt-loader)

(def rvl monolith/runt-eval)

(rvl "graforge nodes")
(rvl "440 0.5 sine")
(rvl "\"sine.wav\" wavout bdrop ps")

(monolith/compute (* 44100 10))</pre></code>

<h2>TODO Graforge Plugins with Janet</h2>

<p>Janet can be used to build dynamically loadable graforge
plugins. This makes it easier to develop experimental DSP
algorithms.
</p>
<p>The code below shows how to make a simple sine wave
generator in graforge, wrapped inside of a Janet function.
</p>
<p>INSERT CODE HERE.
</p>
<p>This can be built using the internal JPM utility included
with monolith <code>monolith jpm</code>.
</p>
<p>From here, the node can be managed using some of the
janet-graforge bindings, included in monolith. Monolith
also supplies some glue functions that allow the node to
interact with Runt code:
</p>
<p>INSERT CODE HERE.
</p>

<h2>TODO Drawing With Janet</h2>

<p>Most drawing operations are implemented as Janet functions,
rather than scheme ones. This was done in order to practice
using Janet.
</p>

<h2>Calling Janet from Scheme</h2>

<p>Yes, Janet can be controlled from inside of Scheme. Isn't
that just terrible? This combo is used when creating
audio-visual things. Scheme handles most of the audio side
and <a href="/proj/monolith/wiki/pages">pages</a>, while Janet is used to produce the
<a href="/proj/monolith/wiki/graphics">graphics</a>, using <a href="/proj/monolith/wiki/channels">channels</a> to talk to
one another.
</p>
<p>First, Janet needs to be initialized using
<code>monolith:janet-init</code>.
</p>
<pre><code>(monolith:janet-init)</pre></code>
<p></p>
<p>From there, janet code can be evaluated using
<code>monolith:janet-eval</code>.
</p>
<pre><code></pre></code>

<h2>TODO Using Jex</h2>

<p>JEX, or Janet EXecute, is a runt word that allows a Janet
function to be triggered from Graforge. Multi-threaded
support in Janet is tricky, so this only works in offline
mode.
</p>
<br>
</div>
</body>
</html>
