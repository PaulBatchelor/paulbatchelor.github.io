<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">
<title>Trig</title>
<h1>Trig</h1>
<p>A rhythmic computing system.
</p>
<p></p>

<h3>Load Trig Scheme definitions</h3>

<p>This provides wrappers for the nodes.
</p>
<pre><code>(monolith:load "trig.scm")</pre></code>

<h3>Making a new trig page</h3>

<p>This is done with <code>monolith:trig-new</code>.
</p>
<pre><code>(monolith:trig-new "trig")</pre></code>
<p></p>
<p>Select it with <code>monolith:page-select</code>.
</p>
<pre><code>(monolith:page-select "trig")</pre></code>

<h3>Initalizing Trig With clock</h3>

<p>After creating an instance of trig, it needs to be
initialized with a clock. This is done with
<code>trigclk</code>. Call this before doing anything else.
</p>
<pre><code>(trigclk (clock 0 120 4) "trig")</pre></code>

<h3>Executing Trig Instructions</h3>

<p>After a trig is initialized with a clock, it can then
execute instructions. Do this before attempting to get
anything from it.
</p>
<pre><code>(trigex "trig")</pre></code>

<h3>Reading from wires</h3>

<p><code>trigwget</code> will read from a given wire in trig, given the
wire ID. This expects to be a value in the range 1-8.
</p>
<pre><code>(trigwget 1 "trig")</pre></code>

<h3>How to make rhythms</h3>

<p>Wires can be multiplied with the input clock signal to
produce a rhythm.
</p>
<p>Something like this should do it:
</p>
<pre><code>(clock 0 120 4)
(bdup)
(trigclk zz "trig")
(trigex "trig")
(trigwget 1 "trig")
(mul zz zz)
(tenvx zz 0.001 0.002 0.01)
(sine 1000 0.4)
(mul zz zz)</pre></code>

<h3>Executing Things in Parallel</h3>

<p>Parallel reads can happen with the <code>trigrex</code> node,
which stands for trigger re-execution. Internally,
this creates a new reader that reads from the same chunk
in memory. <code>trigrex</code> needs to be called before <code>trigex</code>.
Otherwise, multiple playhead display will not show up.
</p>
<p>A start cell position is required as an argument. In this
case, this <code>trigrex</code> node is told to start at cell 18,
the first cell of the third line. (cells are 1 indexed).
</p>
<pre><code>(trigrex 18 "trig")</pre></code>
<p></p>
<p>The logic of <code>trigrex</code> is spawned inside of a node. So,
everytime the patch is recompiled, it is reset. This ideally
pairs well with <code>monolith:trig-reset</code>.
</p>

<h3>Reset On recompile</h3>

<p>It's often useful to reset the playhead between recompiles.
This keeps this in sync. To do this, place a
call to <code>monolith:trig-reset</code> in the patch.
</p>
<p>This will set the position to be the initial position, which
is set to be the top-left cell 1 by default. At the time of
writing, there is know way to change this from scheme (yet).
<pre><code>(monolith:trig-reset "trig")</pre></code>

<h3>Source Code</h3>

<p>The main program source code for the trig page can be found
at <a href="/proj/monolith/program/wm_014">trig.c</a>, with the core rhythm VM
found at <a href="/proj/monolith/program/wm_015">trigvm.c</a>.
</p>
</div>
</body>
</html>
