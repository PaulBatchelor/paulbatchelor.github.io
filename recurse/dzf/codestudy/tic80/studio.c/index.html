<p><!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="/recurse/css/code.css">
<title>codestudy/tic80/studio.c</title>
</head>
<body>
<div class="container-fluid code-viewport">
<div class="row mr-0">
<div class="code-view">
<pre class="lines"><a href="#L1" id="L1">1</a>
<a href="#L2" id="L2">2</a>
<a href="#L3" id="L3">3</a>
<a href="#L4" id="L4">4</a>
<a href="#L5" id="L5">5</a>
<a href="#L6" id="L6">6</a>
<a href="#L7" id="L7">7</a>
<a href="#L8" id="L8">8</a>
<a href="#L9" id="L9">9</a>
<a href="#L10" id="L10">10</a>
<a href="#L11" id="L11">11</a>
<a href="#L12" id="L12">12</a>
<a href="#L13" id="L13">13</a>
<a href="#L14" id="L14">14</a>
<a href="#L15" id="L15">15</a>
<a href="#L16" id="L16">16</a>
<a href="#L17" id="L17">17</a>
<a href="#L18" id="L18">18</a>
<a href="#L19" id="L19">19</a>
<a href="#L20" id="L20">20</a>
<a href="#L21" id="L21">21</a>
<a href="#L22" id="L22">22</a>
<a href="#L23" id="L23">23</a>
<a href="#L24" id="L24">24</a>
<a href="#L25" id="L25">25</a>
<a href="#L26" id="L26">26</a>
<a href="#L27" id="L27">27</a>
<a href="#L28" id="L28">28</a>
<a href="#L29" id="L29">29</a>
<a href="#L30" id="L30">30</a>
<a href="#L31" id="L31">31</a>
<a href="#L32" id="L32">32</a>
<a href="#L33" id="L33">33</a>
<a href="#L34" id="L34">34</a>
<a href="#L35" id="L35">35</a>
<a href="#L36" id="L36">36</a>
<a href="#L37" id="L37">37</a>
<a href="#L38" id="L38">38</a>
<a href="#L39" id="L39">39</a>
<a href="#L40" id="L40">40</a>
<a href="#L41" id="L41">41</a>
<a href="#L42" id="L42">42</a>
<a href="#L43" id="L43">43</a>
<a href="#L44" id="L44">44</a>
<a href="#L45" id="L45">45</a>
<a href="#L46" id="L46">46</a>
<a href="#L47" id="L47">47</a>
<a href="#L48" id="L48">48</a>
<a href="#L49" id="L49">49</a>
<a href="#L50" id="L50">50</a>
<a href="#L51" id="L51">51</a>
<a href="#L52" id="L52">52</a>
<a href="#L53" id="L53">53</a>
<a href="#L54" id="L54">54</a>
<a href="#L55" id="L55">55</a>
<a href="#L56" id="L56">56</a>
<a href="#L57" id="L57">57</a>
<a href="#L58" id="L58">58</a>
<a href="#L59" id="L59">59</a>
<a href="#L60" id="L60">60</a>
<a href="#L61" id="L61">61</a>
<a href="#L62" id="L62">62</a>
<a href="#L63" id="L63">63</a>
<a href="#L64" id="L64">64</a>
<a href="#L65" id="L65">65</a>
<a href="#L66" id="L66">66</a>
<a href="#L67" id="L67">67</a>
<a href="#L68" id="L68">68</a>
<a href="#L69" id="L69">69</a>
<a href="#L70" id="L70">70</a>
<a href="#L71" id="L71">71</a>
<a href="#L72" id="L72">72</a>
<a href="#L73" id="L73">73</a>
<a href="#L74" id="L74">74</a>
<a href="#L75" id="L75">75</a>
<a href="#L76" id="L76">76</a>
<a href="#L77" id="L77">77</a>
<a href="#L78" id="L78">78</a>
<a href="#L79" id="L79">79</a>
<a href="#L80" id="L80">80</a>
<a href="#L81" id="L81">81</a>
<a href="#L82" id="L82">82</a>
<a href="#L83" id="L83">83</a>
<a href="#L84" id="L84">84</a>
<a href="#L85" id="L85">85</a>
<a href="#L86" id="L86">86</a>
<a href="#L87" id="L87">87</a>
<a href="#L88" id="L88">88</a>
<a href="#L89" id="L89">89</a>
<a href="#L90" id="L90">90</a>
<a href="#L91" id="L91">91</a>
<a href="#L92" id="L92">92</a>
<a href="#L93" id="L93">93</a>
<a href="#L94" id="L94">94</a>
<a href="#L95" id="L95">95</a>
<a href="#L96" id="L96">96</a>
<a href="#L97" id="L97">97</a>
<a href="#L98" id="L98">98</a>
<a href="#L99" id="L99">99</a>
<a href="#L100" id="L100">100</a>
<a href="#L101" id="L101">101</a>
<a href="#L102" id="L102">102</a>
<a href="#L103" id="L103">103</a>
<a href="#L104" id="L104">104</a>
<a href="#L105" id="L105">105</a>
<a href="#L106" id="L106">106</a>
<a href="#L107" id="L107">107</a>
<a href="#L108" id="L108">108</a>
<a href="#L109" id="L109">109</a>
<a href="#L110" id="L110">110</a>
<a href="#L111" id="L111">111</a>
<a href="#L112" id="L112">112</a>
<a href="#L113" id="L113">113</a>
<a href="#L114" id="L114">114</a>
<a href="#L115" id="L115">115</a>
<a href="#L116" id="L116">116</a>
<a href="#L117" id="L117">117</a>
<a href="#L118" id="L118">118</a>
<a href="#L119" id="L119">119</a>
<a href="#L120" id="L120">120</a>
<a href="#L121" id="L121">121</a>
<a href="#L122" id="L122">122</a>
<a href="#L123" id="L123">123</a>
<a href="#L124" id="L124">124</a>
<a href="#L125" id="L125">125</a>
<a href="#L126" id="L126">126</a>
<a href="#L127" id="L127">127</a>
<a href="#L128" id="L128">128</a>
<a href="#L129" id="L129">129</a>
<a href="#L130" id="L130">130</a>
<a href="#L131" id="L131">131</a>
<a href="#L132" id="L132">132</a>
<a href="#L133" id="L133">133</a>
<a href="#L134" id="L134">134</a>
<a href="#L135" id="L135">135</a>
<a href="#L136" id="L136">136</a>
<a href="#L137" id="L137">137</a>
<a href="#L138" id="L138">138</a>
<a href="#L139" id="L139">139</a>
<a href="#L140" id="L140">140</a>
<a href="#L141" id="L141">141</a>
<a href="#L142" id="L142">142</a>
<a href="#L143" id="L143">143</a>
<a href="#L144" id="L144">144</a>
<a href="#L145" id="L145">145</a>
<a href="#L146" id="L146">146</a>
<a href="#L147" id="L147">147</a>
<a href="#L148" id="L148">148</a>
<a href="#L149" id="L149">149</a>
<a href="#L150" id="L150">150</a>
<a href="#L151" id="L151">151</a>
<a href="#L152" id="L152">152</a>
<a href="#L153" id="L153">153</a>
<a href="#L154" id="L154">154</a>
<a href="#L155" id="L155">155</a>
<a href="#L156" id="L156">156</a>
<a href="#L157" id="L157">157</a>
<a href="#L158" id="L158">158</a>
<a href="#L159" id="L159">159</a>
<a href="#L160" id="L160">160</a>
<a href="#L161" id="L161">161</a>
<a href="#L162" id="L162">162</a>
<a href="#L163" id="L163">163</a>
<a href="#L164" id="L164">164</a>
<a href="#L165" id="L165">165</a>
<a href="#L166" id="L166">166</a>
<a href="#L167" id="L167">167</a>
<a href="#L168" id="L168">168</a>
<a href="#L169" id="L169">169</a>
<a href="#L170" id="L170">170</a>
<a href="#L171" id="L171">171</a>
<a href="#L172" id="L172">172</a>
<a href="#L173" id="L173">173</a>
<a href="#L174" id="L174">174</a>
<a href="#L175" id="L175">175</a>
<a href="#L176" id="L176">176</a>
<a href="#L177" id="L177">177</a>
<a href="#L178" id="L178">178</a>
<a href="#L179" id="L179">179</a>
<a href="#L180" id="L180">180</a>
<a href="#L181" id="L181">181</a>
<a href="#L182" id="L182">182</a>
<a href="#L183" id="L183">183</a>
<a href="#L184" id="L184">184</a>
<a href="#L185" id="L185">185</a>
<a href="#L186" id="L186">186</a>
<a href="#L187" id="L187">187</a>
<a href="#L188" id="L188">188</a>
<a href="#L189" id="L189">189</a>
<a href="#L190" id="L190">190</a>
<a href="#L191" id="L191">191</a>
<a href="#L192" id="L192">192</a>
<a href="#L193" id="L193">193</a>
<a href="#L194" id="L194">194</a>
<a href="#L195" id="L195">195</a>
<a href="#L196" id="L196">196</a>
<a href="#L197" id="L197">197</a>
<a href="#L198" id="L198">198</a>
<a href="#L199" id="L199">199</a>
<a href="#L200" id="L200">200</a>
<a href="#L201" id="L201">201</a>
<a href="#L202" id="L202">202</a>
<a href="#L203" id="L203">203</a>
<a href="#L204" id="L204">204</a>
<a href="#L205" id="L205">205</a>
<a href="#L206" id="L206">206</a>
<a href="#L207" id="L207">207</a>
<a href="#L208" id="L208">208</a>
<a href="#L209" id="L209">209</a>
<a href="#L210" id="L210">210</a>
<a href="#L211" id="L211">211</a>
<a href="#L212" id="L212">212</a>
<a href="#L213" id="L213">213</a>
<a href="#L214" id="L214">214</a>
<a href="#L215" id="L215">215</a>
<a href="#L216" id="L216">216</a>
<a href="#L217" id="L217">217</a>
<a href="#L218" id="L218">218</a>
<a href="#L219" id="L219">219</a>
<a href="#L220" id="L220">220</a>
<a href="#L221" id="L221">221</a>
<a href="#L222" id="L222">222</a>
<a href="#L223" id="L223">223</a>
<a href="#L224" id="L224">224</a>
<a href="#L225" id="L225">225</a>
<a href="#L226" id="L226">226</a>
<a href="#L227" id="L227">227</a>
<a href="#L228" id="L228">228</a>
<a href="#L229" id="L229">229</a>
<a href="#L230" id="L230">230</a>
<a href="#L231" id="L231">231</a>
<a href="#L232" id="L232">232</a>
<a href="#L233" id="L233">233</a>
<a href="#L234" id="L234">234</a>
<a href="#L235" id="L235">235</a>
<a href="#L236" id="L236">236</a>
<a href="#L237" id="L237">237</a>
<a href="#L238" id="L238">238</a>
<a href="#L239" id="L239">239</a>
<a href="#L240" id="L240">240</a>
<a href="#L241" id="L241">241</a>
<a href="#L242" id="L242">242</a>
<a href="#L243" id="L243">243</a>
<a href="#L244" id="L244">244</a>
<a href="#L245" id="L245">245</a>
<a href="#L246" id="L246">246</a>
<a href="#L247" id="L247">247</a>
<a href="#L248" id="L248">248</a>
<a href="#L249" id="L249">249</a>
<a href="#L250" id="L250">250</a>
<a href="#L251" id="L251">251</a>
<a href="#L252" id="L252">252</a>
<a href="#L253" id="L253">253</a>
<a href="#L254" id="L254">254</a>
<a href="#L255" id="L255">255</a>
<a href="#L256" id="L256">256</a>
<a href="#L257" id="L257">257</a>
<a href="#L258" id="L258">258</a>
<a href="#L259" id="L259">259</a>
<a href="#L260" id="L260">260</a>
<a href="#L261" id="L261">261</a>
<a href="#L262" id="L262">262</a>
<a href="#L263" id="L263">263</a>
<a href="#L264" id="L264">264</a>
<a href="#L265" id="L265">265</a>
<a href="#L266" id="L266">266</a>
<a href="#L267" id="L267">267</a>
<a href="#L268" id="L268">268</a>
<a href="#L269" id="L269">269</a>
<a href="#L270" id="L270">270</a>
<a href="#L271" id="L271">271</a>
<a href="#L272" id="L272">272</a>
<a href="#L273" id="L273">273</a>
<a href="#L274" id="L274">274</a>
<a href="#L275" id="L275">275</a>
<a href="#L276" id="L276">276</a>
<a href="#L277" id="L277">277</a>
<a href="#L278" id="L278">278</a>
<a href="#L279" id="L279">279</a>
<a href="#L280" id="L280">280</a>
<a href="#L281" id="L281">281</a>
<a href="#L282" id="L282">282</a>
<a href="#L283" id="L283">283</a>
<a href="#L284" id="L284">284</a>
<a href="#L285" id="L285">285</a>
<a href="#L286" id="L286">286</a>
<a href="#L287" id="L287">287</a>
<a href="#L288" id="L288">288</a>
<a href="#L289" id="L289">289</a>
<a href="#L290" id="L290">290</a>
<a href="#L291" id="L291">291</a>
<a href="#L292" id="L292">292</a>
<a href="#L293" id="L293">293</a>
<a href="#L294" id="L294">294</a>
<a href="#L295" id="L295">295</a>
<a href="#L296" id="L296">296</a>
<a href="#L297" id="L297">297</a>
<a href="#L298" id="L298">298</a>
<a href="#L299" id="L299">299</a>
<a href="#L300" id="L300">300</a>
<a href="#L301" id="L301">301</a>
<a href="#L302" id="L302">302</a>
<a href="#L303" id="L303">303</a>
<a href="#L304" id="L304">304</a>
<a href="#L305" id="L305">305</a>
<a href="#L306" id="L306">306</a>
<a href="#L307" id="L307">307</a>
<a href="#L308" id="L308">308</a>
<a href="#L309" id="L309">309</a>
<a href="#L310" id="L310">310</a>
<a href="#L311" id="L311">311</a>
<a href="#L312" id="L312">312</a>
<a href="#L313" id="L313">313</a>
<a href="#L314" id="L314">314</a>
<a href="#L315" id="L315">315</a>
<a href="#L316" id="L316">316</a>
<a href="#L317" id="L317">317</a>
<a href="#L318" id="L318">318</a>
<a href="#L319" id="L319">319</a>
<a href="#L320" id="L320">320</a>
<a href="#L321" id="L321">321</a>
<a href="#L322" id="L322">322</a>
<a href="#L323" id="L323">323</a>
<a href="#L324" id="L324">324</a>
<a href="#L325" id="L325">325</a>
<a href="#L326" id="L326">326</a>
<a href="#L327" id="L327">327</a>
<a href="#L328" id="L328">328</a>
<a href="#L329" id="L329">329</a>
<a href="#L330" id="L330">330</a>
<a href="#L331" id="L331">331</a>
<a href="#L332" id="L332">332</a>
<a href="#L333" id="L333">333</a>
<a href="#L334" id="L334">334</a>
<a href="#L335" id="L335">335</a>
<a href="#L336" id="L336">336</a>
<a href="#L337" id="L337">337</a>
<a href="#L338" id="L338">338</a>
<a href="#L339" id="L339">339</a>
<a href="#L340" id="L340">340</a>
<a href="#L341" id="L341">341</a>
<a href="#L342" id="L342">342</a>
<a href="#L343" id="L343">343</a>
<a href="#L344" id="L344">344</a>
<a href="#L345" id="L345">345</a>
<a href="#L346" id="L346">346</a>
<a href="#L347" id="L347">347</a>
<a href="#L348" id="L348">348</a>
<a href="#L349" id="L349">349</a>
<a href="#L350" id="L350">350</a>
<a href="#L351" id="L351">351</a>
<a href="#L352" id="L352">352</a>
<a href="#L353" id="L353">353</a>
<a href="#L354" id="L354">354</a>
<a href="#L355" id="L355">355</a>
<a href="#L356" id="L356">356</a>
<a href="#L357" id="L357">357</a>
<a href="#L358" id="L358">358</a>
<a href="#L359" id="L359">359</a>
<a href="#L360" id="L360">360</a>
<a href="#L361" id="L361">361</a>
<a href="#L362" id="L362">362</a>
<a href="#L363" id="L363">363</a>
<a href="#L364" id="L364">364</a>
<a href="#L365" id="L365">365</a>
<a href="#L366" id="L366">366</a>
<a href="#L367" id="L367">367</a>
<a href="#L368" id="L368">368</a>
<a href="#L369" id="L369">369</a>
<a href="#L370" id="L370">370</a>
<a href="#L371" id="L371">371</a>
<a href="#L372" id="L372">372</a>
<a href="#L373" id="L373">373</a>
<a href="#L374" id="L374">374</a>
<a href="#L375" id="L375">375</a>
<a href="#L376" id="L376">376</a>
<a href="#L377" id="L377">377</a>
<a href="#L378" id="L378">378</a>
<a href="#L379" id="L379">379</a>
<a href="#L380" id="L380">380</a>
<a href="#L381" id="L381">381</a>
<a href="#L382" id="L382">382</a>
<a href="#L383" id="L383">383</a>
<a href="#L384" id="L384">384</a>
<a href="#L385" id="L385">385</a>
<a href="#L386" id="L386">386</a>
<a href="#L387" id="L387">387</a>
<a href="#L388" id="L388">388</a>
<a href="#L389" id="L389">389</a>
<a href="#L390" id="L390">390</a>
<a href="#L391" id="L391">391</a>
<a href="#L392" id="L392">392</a>
<a href="#L393" id="L393">393</a>
<a href="#L394" id="L394">394</a>
<a href="#L395" id="L395">395</a>
<a href="#L396" id="L396">396</a>
<a href="#L397" id="L397">397</a>
<a href="#L398" id="L398">398</a>
<a href="#L399" id="L399">399</a>
<a href="#L400" id="L400">400</a>
<a href="#L401" id="L401">401</a>
<a href="#L402" id="L402">402</a>
<a href="#L403" id="L403">403</a>
<a href="#L404" id="L404">404</a>
<a href="#L405" id="L405">405</a>
<a href="#L406" id="L406">406</a>
<a href="#L407" id="L407">407</a>
<a href="#L408" id="L408">408</a>
<a href="#L409" id="L409">409</a>
<a href="#L410" id="L410">410</a>
<a href="#L411" id="L411">411</a>
<a href="#L412" id="L412">412</a>
<a href="#L413" id="L413">413</a>
<a href="#L414" id="L414">414</a>
<a href="#L415" id="L415">415</a>
<a href="#L416" id="L416">416</a>
<a href="#L417" id="L417">417</a>
<a href="#L418" id="L418">418</a>
<a href="#L419" id="L419">419</a>
<a href="#L420" id="L420">420</a>
<a href="#L421" id="L421">421</a>
<a href="#L422" id="L422">422</a>
<a href="#L423" id="L423">423</a>
<a href="#L424" id="L424">424</a>
<a href="#L425" id="L425">425</a>
<a href="#L426" id="L426">426</a>
<a href="#L427" id="L427">427</a>
<a href="#L428" id="L428">428</a>
<a href="#L429" id="L429">429</a>
<a href="#L430" id="L430">430</a>
<a href="#L431" id="L431">431</a>
<a href="#L432" id="L432">432</a>
<a href="#L433" id="L433">433</a>
<a href="#L434" id="L434">434</a>
<a href="#L435" id="L435">435</a>
<a href="#L436" id="L436">436</a>
<a href="#L437" id="L437">437</a>
<a href="#L438" id="L438">438</a>
<a href="#L439" id="L439">439</a>
<a href="#L440" id="L440">440</a>
<a href="#L441" id="L441">441</a>
<a href="#L442" id="L442">442</a>
<a href="#L443" id="L443">443</a>
<a href="#L444" id="L444">444</a>
<a href="#L445" id="L445">445</a>
<a href="#L446" id="L446">446</a>
<a href="#L447" id="L447">447</a>
<a href="#L448" id="L448">448</a>
<a href="#L449" id="L449">449</a>
<a href="#L450" id="L450">450</a>
<a href="#L451" id="L451">451</a>
<a href="#L452" id="L452">452</a>
<a href="#L453" id="L453">453</a>
<a href="#L454" id="L454">454</a>
<a href="#L455" id="L455">455</a>
<a href="#L456" id="L456">456</a>
<a href="#L457" id="L457">457</a>
<a href="#L458" id="L458">458</a>
<a href="#L459" id="L459">459</a>
<a href="#L460" id="L460">460</a>
<a href="#L461" id="L461">461</a>
<a href="#L462" id="L462">462</a>
<a href="#L463" id="L463">463</a>
<a href="#L464" id="L464">464</a>
<a href="#L465" id="L465">465</a>
<a href="#L466" id="L466">466</a>
<a href="#L467" id="L467">467</a>
<a href="#L468" id="L468">468</a>
<a href="#L469" id="L469">469</a>
<a href="#L470" id="L470">470</a>
<a href="#L471" id="L471">471</a>
<a href="#L472" id="L472">472</a>
<a href="#L473" id="L473">473</a>
<a href="#L474" id="L474">474</a>
<a href="#L475" id="L475">475</a>
<a href="#L476" id="L476">476</a>
<a href="#L477" id="L477">477</a>
<a href="#L478" id="L478">478</a>
<a href="#L479" id="L479">479</a>
<a href="#L480" id="L480">480</a>
<a href="#L481" id="L481">481</a>
<a href="#L482" id="L482">482</a>
<a href="#L483" id="L483">483</a>
<a href="#L484" id="L484">484</a>
<a href="#L485" id="L485">485</a>
<a href="#L486" id="L486">486</a>
<a href="#L487" id="L487">487</a>
<a href="#L488" id="L488">488</a>
<a href="#L489" id="L489">489</a>
<a href="#L490" id="L490">490</a>
<a href="#L491" id="L491">491</a>
<a href="#L492" id="L492">492</a>
<a href="#L493" id="L493">493</a>
<a href="#L494" id="L494">494</a>
<a href="#L495" id="L495">495</a>
<a href="#L496" id="L496">496</a>
<a href="#L497" id="L497">497</a>
<a href="#L498" id="L498">498</a>
<a href="#L499" id="L499">499</a>
<a href="#L500" id="L500">500</a>
<a href="#L501" id="L501">501</a>
<a href="#L502" id="L502">502</a>
<a href="#L503" id="L503">503</a>
<a href="#L504" id="L504">504</a>
<a href="#L505" id="L505">505</a>
<a href="#L506" id="L506">506</a>
<a href="#L507" id="L507">507</a>
<a href="#L508" id="L508">508</a>
<a href="#L509" id="L509">509</a>
<a href="#L510" id="L510">510</a>
<a href="#L511" id="L511">511</a>
<a href="#L512" id="L512">512</a>
<a href="#L513" id="L513">513</a>
<a href="#L514" id="L514">514</a>
<a href="#L515" id="L515">515</a>
<a href="#L516" id="L516">516</a>
<a href="#L517" id="L517">517</a>
<a href="#L518" id="L518">518</a>
<a href="#L519" id="L519">519</a>
<a href="#L520" id="L520">520</a>
<a href="#L521" id="L521">521</a>
<a href="#L522" id="L522">522</a>
<a href="#L523" id="L523">523</a>
<a href="#L524" id="L524">524</a>
<a href="#L525" id="L525">525</a>
<a href="#L526" id="L526">526</a>
<a href="#L527" id="L527">527</a>
<a href="#L528" id="L528">528</a>
<a href="#L529" id="L529">529</a>
<a href="#L530" id="L530">530</a>
<a href="#L531" id="L531">531</a>
<a href="#L532" id="L532">532</a>
<a href="#L533" id="L533">533</a>
<a href="#L534" id="L534">534</a>
<a href="#L535" id="L535">535</a>
<a href="#L536" id="L536">536</a>
<a href="#L537" id="L537">537</a>
<a href="#L538" id="L538">538</a>
<a href="#L539" id="L539">539</a>
<a href="#L540" id="L540">540</a>
<a href="#L541" id="L541">541</a>
<a href="#L542" id="L542">542</a>
<a href="#L543" id="L543">543</a>
<a href="#L544" id="L544">544</a>
<a href="#L545" id="L545">545</a>
<a href="#L546" id="L546">546</a>
<a href="#L547" id="L547">547</a>
<a href="#L548" id="L548">548</a>
<a href="#L549" id="L549">549</a>
<a href="#L550" id="L550">550</a>
<a href="#L551" id="L551">551</a>
<a href="#L552" id="L552">552</a>
<a href="#L553" id="L553">553</a>
<a href="#L554" id="L554">554</a>
<a href="#L555" id="L555">555</a>
<a href="#L556" id="L556">556</a>
<a href="#L557" id="L557">557</a>
<a href="#L558" id="L558">558</a>
<a href="#L559" id="L559">559</a>
<a href="#L560" id="L560">560</a>
<a href="#L561" id="L561">561</a>
<a href="#L562" id="L562">562</a>
<a href="#L563" id="L563">563</a>
<a href="#L564" id="L564">564</a>
<a href="#L565" id="L565">565</a>
<a href="#L566" id="L566">566</a>
<a href="#L567" id="L567">567</a>
<a href="#L568" id="L568">568</a>
<a href="#L569" id="L569">569</a>
<a href="#L570" id="L570">570</a>
<a href="#L571" id="L571">571</a>
<a href="#L572" id="L572">572</a>
<a href="#L573" id="L573">573</a>
<a href="#L574" id="L574">574</a>
<a href="#L575" id="L575">575</a>
<a href="#L576" id="L576">576</a>
<a href="#L577" id="L577">577</a>
<a href="#L578" id="L578">578</a>
<a href="#L579" id="L579">579</a>
<a href="#L580" id="L580">580</a>
<a href="#L581" id="L581">581</a>
<a href="#L582" id="L582">582</a>
<a href="#L583" id="L583">583</a>
<a href="#L584" id="L584">584</a>
<a href="#L585" id="L585">585</a>
<a href="#L586" id="L586">586</a>
<a href="#L587" id="L587">587</a>
<a href="#L588" id="L588">588</a>
<a href="#L589" id="L589">589</a>
<a href="#L590" id="L590">590</a>
<a href="#L591" id="L591">591</a>
<a href="#L592" id="L592">592</a>
<a href="#L593" id="L593">593</a>
<a href="#L594" id="L594">594</a>
<a href="#L595" id="L595">595</a>
<a href="#L596" id="L596">596</a>
<a href="#L597" id="L597">597</a>
<a href="#L598" id="L598">598</a>
<a href="#L599" id="L599">599</a>
<a href="#L600" id="L600">600</a>
<a href="#L601" id="L601">601</a>
<a href="#L602" id="L602">602</a>
<a href="#L603" id="L603">603</a>
<a href="#L604" id="L604">604</a>
<a href="#L605" id="L605">605</a>
<a href="#L606" id="L606">606</a>
<a href="#L607" id="L607">607</a>
<a href="#L608" id="L608">608</a>
<a href="#L609" id="L609">609</a>
<a href="#L610" id="L610">610</a>
<a href="#L611" id="L611">611</a>
<a href="#L612" id="L612">612</a>
<a href="#L613" id="L613">613</a>
<a href="#L614" id="L614">614</a>
<a href="#L615" id="L615">615</a>
<a href="#L616" id="L616">616</a>
<a href="#L617" id="L617">617</a>
<a href="#L618" id="L618">618</a>
<a href="#L619" id="L619">619</a>
<a href="#L620" id="L620">620</a>
<a href="#L621" id="L621">621</a>
<a href="#L622" id="L622">622</a>
<a href="#L623" id="L623">623</a>
<a href="#L624" id="L624">624</a>
<a href="#L625" id="L625">625</a>
<a href="#L626" id="L626">626</a>
<a href="#L627" id="L627">627</a>
<a href="#L628" id="L628">628</a>
<a href="#L629" id="L629">629</a>
<a href="#L630" id="L630">630</a>
<a href="#L631" id="L631">631</a>
<a href="#L632" id="L632">632</a>
<a href="#L633" id="L633">633</a>
<a href="#L634" id="L634">634</a>
<a href="#L635" id="L635">635</a>
<a href="#L636" id="L636">636</a>
<a href="#L637" id="L637">637</a>
<a href="#L638" id="L638">638</a>
<a href="#L639" id="L639">639</a>
<a href="#L640" id="L640">640</a>
<a href="#L641" id="L641">641</a>
<a href="#L642" id="L642">642</a>
<a href="#L643" id="L643">643</a>
<a href="#L644" id="L644">644</a>
<a href="#L645" id="L645">645</a>
<a href="#L646" id="L646">646</a>
<a href="#L647" id="L647">647</a>
<a href="#L648" id="L648">648</a>
<a href="#L649" id="L649">649</a>
<a href="#L650" id="L650">650</a>
<a href="#L651" id="L651">651</a>
<a href="#L652" id="L652">652</a>
<a href="#L653" id="L653">653</a>
<a href="#L654" id="L654">654</a>
<a href="#L655" id="L655">655</a>
<a href="#L656" id="L656">656</a>
<a href="#L657" id="L657">657</a>
<a href="#L658" id="L658">658</a>
<a href="#L659" id="L659">659</a>
<a href="#L660" id="L660">660</a>
<a href="#L661" id="L661">661</a>
<a href="#L662" id="L662">662</a>
<a href="#L663" id="L663">663</a>
<a href="#L664" id="L664">664</a>
<a href="#L665" id="L665">665</a>
<a href="#L666" id="L666">666</a>
<a href="#L667" id="L667">667</a>
<a href="#L668" id="L668">668</a>
<a href="#L669" id="L669">669</a>
<a href="#L670" id="L670">670</a>
<a href="#L671" id="L671">671</a>
<a href="#L672" id="L672">672</a>
<a href="#L673" id="L673">673</a>
<a href="#L674" id="L674">674</a>
<a href="#L675" id="L675">675</a>
<a href="#L676" id="L676">676</a>
<a href="#L677" id="L677">677</a>
<a href="#L678" id="L678">678</a>
<a href="#L679" id="L679">679</a>
<a href="#L680" id="L680">680</a>
<a href="#L681" id="L681">681</a>
<a href="#L682" id="L682">682</a>
<a href="#L683" id="L683">683</a>
<a href="#L684" id="L684">684</a>
<a href="#L685" id="L685">685</a>
<a href="#L686" id="L686">686</a>
<a href="#L687" id="L687">687</a>
<a href="#L688" id="L688">688</a>
<a href="#L689" id="L689">689</a>
<a href="#L690" id="L690">690</a>
<a href="#L691" id="L691">691</a>
<a href="#L692" id="L692">692</a>
<a href="#L693" id="L693">693</a>
<a href="#L694" id="L694">694</a>
<a href="#L695" id="L695">695</a>
<a href="#L696" id="L696">696</a>
<a href="#L697" id="L697">697</a>
<a href="#L698" id="L698">698</a>
<a href="#L699" id="L699">699</a>
<a href="#L700" id="L700">700</a>
<a href="#L701" id="L701">701</a>
<a href="#L702" id="L702">702</a>
<a href="#L703" id="L703">703</a>
<a href="#L704" id="L704">704</a>
<a href="#L705" id="L705">705</a>
<a href="#L706" id="L706">706</a>
<a href="#L707" id="L707">707</a>
<a href="#L708" id="L708">708</a>
<a href="#L709" id="L709">709</a>
<a href="#L710" id="L710">710</a>
<a href="#L711" id="L711">711</a>
<a href="#L712" id="L712">712</a>
<a href="#L713" id="L713">713</a>
<a href="#L714" id="L714">714</a>
<a href="#L715" id="L715">715</a>
<a href="#L716" id="L716">716</a>
<a href="#L717" id="L717">717</a>
<a href="#L718" id="L718">718</a>
<a href="#L719" id="L719">719</a>
<a href="#L720" id="L720">720</a>
<a href="#L721" id="L721">721</a>
<a href="#L722" id="L722">722</a>
<a href="#L723" id="L723">723</a>
<a href="#L724" id="L724">724</a>
<a href="#L725" id="L725">725</a>
<a href="#L726" id="L726">726</a>
<a href="#L727" id="L727">727</a>
<a href="#L728" id="L728">728</a>
<a href="#L729" id="L729">729</a>
<a href="#L730" id="L730">730</a>
<a href="#L731" id="L731">731</a>
<a href="#L732" id="L732">732</a>
<a href="#L733" id="L733">733</a>
<a href="#L734" id="L734">734</a>
<a href="#L735" id="L735">735</a>
<a href="#L736" id="L736">736</a>
<a href="#L737" id="L737">737</a>
<a href="#L738" id="L738">738</a>
<a href="#L739" id="L739">739</a>
<a href="#L740" id="L740">740</a>
<a href="#L741" id="L741">741</a>
<a href="#L742" id="L742">742</a>
<a href="#L743" id="L743">743</a>
<a href="#L744" id="L744">744</a>
<a href="#L745" id="L745">745</a>
<a href="#L746" id="L746">746</a>
<a href="#L747" id="L747">747</a>
<a href="#L748" id="L748">748</a>
<a href="#L749" id="L749">749</a>
<a href="#L750" id="L750">750</a>
<a href="#L751" id="L751">751</a>
<a href="#L752" id="L752">752</a>
<a href="#L753" id="L753">753</a>
<a href="#L754" id="L754">754</a>
<a href="#L755" id="L755">755</a>
<a href="#L756" id="L756">756</a>
<a href="#L757" id="L757">757</a>
<a href="#L758" id="L758">758</a>
<a href="#L759" id="L759">759</a>
<a href="#L760" id="L760">760</a>
<a href="#L761" id="L761">761</a>
<a href="#L762" id="L762">762</a>
<a href="#L763" id="L763">763</a>
<a href="#L764" id="L764">764</a>
<a href="#L765" id="L765">765</a>
<a href="#L766" id="L766">766</a>
<a href="#L767" id="L767">767</a>
<a href="#L768" id="L768">768</a>
<a href="#L769" id="L769">769</a>
<a href="#L770" id="L770">770</a>
<a href="#L771" id="L771">771</a>
<a href="#L772" id="L772">772</a>
<a href="#L773" id="L773">773</a>
<a href="#L774" id="L774">774</a>
<a href="#L775" id="L775">775</a>
<a href="#L776" id="L776">776</a>
<a href="#L777" id="L777">777</a>
<a href="#L778" id="L778">778</a>
<a href="#L779" id="L779">779</a>
<a href="#L780" id="L780">780</a>
<a href="#L781" id="L781">781</a>
<a href="#L782" id="L782">782</a>
<a href="#L783" id="L783">783</a>
<a href="#L784" id="L784">784</a>
<a href="#L785" id="L785">785</a>
<a href="#L786" id="L786">786</a>
<a href="#L787" id="L787">787</a>
<a href="#L788" id="L788">788</a>
<a href="#L789" id="L789">789</a>
<a href="#L790" id="L790">790</a>
<a href="#L791" id="L791">791</a>
<a href="#L792" id="L792">792</a>
<a href="#L793" id="L793">793</a>
<a href="#L794" id="L794">794</a>
<a href="#L795" id="L795">795</a>
<a href="#L796" id="L796">796</a>
<a href="#L797" id="L797">797</a>
<a href="#L798" id="L798">798</a>
<a href="#L799" id="L799">799</a>
<a href="#L800" id="L800">800</a>
<a href="#L801" id="L801">801</a>
<a href="#L802" id="L802">802</a>
<a href="#L803" id="L803">803</a>
<a href="#L804" id="L804">804</a>
<a href="#L805" id="L805">805</a>
<a href="#L806" id="L806">806</a>
<a href="#L807" id="L807">807</a>
<a href="#L808" id="L808">808</a>
<a href="#L809" id="L809">809</a>
<a href="#L810" id="L810">810</a>
<a href="#L811" id="L811">811</a>
<a href="#L812" id="L812">812</a>
<a href="#L813" id="L813">813</a>
<a href="#L814" id="L814">814</a>
<a href="#L815" id="L815">815</a>
<a href="#L816" id="L816">816</a>
<a href="#L817" id="L817">817</a>
<a href="#L818" id="L818">818</a>
<a href="#L819" id="L819">819</a>
<a href="#L820" id="L820">820</a>
<a href="#L821" id="L821">821</a>
<a href="#L822" id="L822">822</a>
<a href="#L823" id="L823">823</a>
<a href="#L824" id="L824">824</a>
<a href="#L825" id="L825">825</a>
<a href="#L826" id="L826">826</a>
<a href="#L827" id="L827">827</a>
<a href="#L828" id="L828">828</a>
<a href="#L829" id="L829">829</a>
<a href="#L830" id="L830">830</a>
<a href="#L831" id="L831">831</a>
<a href="#L832" id="L832">832</a>
<a href="#L833" id="L833">833</a>
<a href="#L834" id="L834">834</a>
<a href="#L835" id="L835">835</a>
<a href="#L836" id="L836">836</a>
<a href="#L837" id="L837">837</a>
<a href="#L838" id="L838">838</a>
<a href="#L839" id="L839">839</a>
<a href="#L840" id="L840">840</a>
<a href="#L841" id="L841">841</a>
<a href="#L842" id="L842">842</a>
<a href="#L843" id="L843">843</a>
<a href="#L844" id="L844">844</a>
<a href="#L845" id="L845">845</a>
<a href="#L846" id="L846">846</a>
<a href="#L847" id="L847">847</a>
<a href="#L848" id="L848">848</a>
<a href="#L849" id="L849">849</a>
<a href="#L850" id="L850">850</a>
<a href="#L851" id="L851">851</a>
<a href="#L852" id="L852">852</a>
<a href="#L853" id="L853">853</a>
<a href="#L854" id="L854">854</a>
<a href="#L855" id="L855">855</a>
<a href="#L856" id="L856">856</a>
<a href="#L857" id="L857">857</a>
<a href="#L858" id="L858">858</a>
<a href="#L859" id="L859">859</a>
<a href="#L860" id="L860">860</a>
<a href="#L861" id="L861">861</a>
<a href="#L862" id="L862">862</a>
<a href="#L863" id="L863">863</a>
<a href="#L864" id="L864">864</a>
<a href="#L865" id="L865">865</a>
<a href="#L866" id="L866">866</a>
<a href="#L867" id="L867">867</a>
<a href="#L868" id="L868">868</a>
<a href="#L869" id="L869">869</a>
<a href="#L870" id="L870">870</a>
<a href="#L871" id="L871">871</a>
<a href="#L872" id="L872">872</a>
<a href="#L873" id="L873">873</a>
<a href="#L874" id="L874">874</a>
<a href="#L875" id="L875">875</a>
<a href="#L876" id="L876">876</a>
<a href="#L877" id="L877">877</a>
<a href="#L878" id="L878">878</a>
<a href="#L879" id="L879">879</a>
<a href="#L880" id="L880">880</a>
<a href="#L881" id="L881">881</a>
<a href="#L882" id="L882">882</a>
<a href="#L883" id="L883">883</a>
<a href="#L884" id="L884">884</a>
<a href="#L885" id="L885">885</a>
<a href="#L886" id="L886">886</a>
<a href="#L887" id="L887">887</a>
<a href="#L888" id="L888">888</a>
<a href="#L889" id="L889">889</a>
<a href="#L890" id="L890">890</a>
<a href="#L891" id="L891">891</a>
<a href="#L892" id="L892">892</a>
<a href="#L893" id="L893">893</a>
<a href="#L894" id="L894">894</a>
<a href="#L895" id="L895">895</a>
<a href="#L896" id="L896">896</a>
<a href="#L897" id="L897">897</a>
<a href="#L898" id="L898">898</a>
<a href="#L899" id="L899">899</a>
<a href="#L900" id="L900">900</a>
<a href="#L901" id="L901">901</a>
<a href="#L902" id="L902">902</a>
<a href="#L903" id="L903">903</a>
<a href="#L904" id="L904">904</a>
<a href="#L905" id="L905">905</a>
<a href="#L906" id="L906">906</a>
<a href="#L907" id="L907">907</a>
<a href="#L908" id="L908">908</a>
<a href="#L909" id="L909">909</a>
<a href="#L910" id="L910">910</a>
<a href="#L911" id="L911">911</a>
<a href="#L912" id="L912">912</a>
<a href="#L913" id="L913">913</a>
<a href="#L914" id="L914">914</a>
<a href="#L915" id="L915">915</a>
<a href="#L916" id="L916">916</a>
<a href="#L917" id="L917">917</a>
<a href="#L918" id="L918">918</a>
<a href="#L919" id="L919">919</a>
<a href="#L920" id="L920">920</a>
<a href="#L921" id="L921">921</a>
<a href="#L922" id="L922">922</a>
<a href="#L923" id="L923">923</a>
<a href="#L924" id="L924">924</a>
<a href="#L925" id="L925">925</a>
<a href="#L926" id="L926">926</a>
<a href="#L927" id="L927">927</a>
<a href="#L928" id="L928">928</a>
<a href="#L929" id="L929">929</a>
<a href="#L930" id="L930">930</a>
<a href="#L931" id="L931">931</a>
<a href="#L932" id="L932">932</a>
<a href="#L933" id="L933">933</a>
<a href="#L934" id="L934">934</a>
<a href="#L935" id="L935">935</a>
<a href="#L936" id="L936">936</a>
<a href="#L937" id="L937">937</a>
<a href="#L938" id="L938">938</a>
<a href="#L939" id="L939">939</a>
<a href="#L940" id="L940">940</a>
<a href="#L941" id="L941">941</a>
<a href="#L942" id="L942">942</a>
<a href="#L943" id="L943">943</a>
<a href="#L944" id="L944">944</a>
<a href="#L945" id="L945">945</a>
<a href="#L946" id="L946">946</a>
<a href="#L947" id="L947">947</a>
<a href="#L948" id="L948">948</a>
<a href="#L949" id="L949">949</a>
<a href="#L950" id="L950">950</a>
<a href="#L951" id="L951">951</a>
<a href="#L952" id="L952">952</a>
<a href="#L953" id="L953">953</a>
<a href="#L954" id="L954">954</a>
<a href="#L955" id="L955">955</a>
<a href="#L956" id="L956">956</a>
<a href="#L957" id="L957">957</a>
<a href="#L958" id="L958">958</a>
<a href="#L959" id="L959">959</a>
<a href="#L960" id="L960">960</a>
<a href="#L961" id="L961">961</a>
<a href="#L962" id="L962">962</a>
<a href="#L963" id="L963">963</a>
<a href="#L964" id="L964">964</a>
<a href="#L965" id="L965">965</a>
<a href="#L966" id="L966">966</a>
<a href="#L967" id="L967">967</a>
<a href="#L968" id="L968">968</a>
<a href="#L969" id="L969">969</a>
<a href="#L970" id="L970">970</a>
<a href="#L971" id="L971">971</a>
<a href="#L972" id="L972">972</a>
<a href="#L973" id="L973">973</a>
<a href="#L974" id="L974">974</a>
<a href="#L975" id="L975">975</a>
<a href="#L976" id="L976">976</a>
<a href="#L977" id="L977">977</a>
<a href="#L978" id="L978">978</a>
<a href="#L979" id="L979">979</a>
<a href="#L980" id="L980">980</a>
<a href="#L981" id="L981">981</a>
<a href="#L982" id="L982">982</a>
<a href="#L983" id="L983">983</a>
<a href="#L984" id="L984">984</a>
<a href="#L985" id="L985">985</a>
<a href="#L986" id="L986">986</a>
<a href="#L987" id="L987">987</a>
<a href="#L988" id="L988">988</a>
<a href="#L989" id="L989">989</a>
<a href="#L990" id="L990">990</a>
<a href="#L991" id="L991">991</a>
<a href="#L992" id="L992">992</a>
<a href="#L993" id="L993">993</a>
<a href="#L994" id="L994">994</a>
<a href="#L995" id="L995">995</a>
<a href="#L996" id="L996">996</a>
<a href="#L997" id="L997">997</a>
<a href="#L998" id="L998">998</a>
<a href="#L999" id="L999">999</a>
<a href="#L1000" id="L1000">1000</a>
<a href="#L1001" id="L1001">1001</a>
<a href="#L1002" id="L1002">1002</a>
<a href="#L1003" id="L1003">1003</a>
<a href="#L1004" id="L1004">1004</a>
<a href="#L1005" id="L1005">1005</a>
<a href="#L1006" id="L1006">1006</a>
<a href="#L1007" id="L1007">1007</a>
<a href="#L1008" id="L1008">1008</a>
<a href="#L1009" id="L1009">1009</a>
<a href="#L1010" id="L1010">1010</a>
<a href="#L1011" id="L1011">1011</a>
<a href="#L1012" id="L1012">1012</a>
<a href="#L1013" id="L1013">1013</a>
<a href="#L1014" id="L1014">1014</a>
<a href="#L1015" id="L1015">1015</a>
<a href="#L1016" id="L1016">1016</a>
<a href="#L1017" id="L1017">1017</a>
<a href="#L1018" id="L1018">1018</a>
<a href="#L1019" id="L1019">1019</a>
<a href="#L1020" id="L1020">1020</a>
<a href="#L1021" id="L1021">1021</a>
<a href="#L1022" id="L1022">1022</a>
<a href="#L1023" id="L1023">1023</a>
<a href="#L1024" id="L1024">1024</a>
<a href="#L1025" id="L1025">1025</a>
<a href="#L1026" id="L1026">1026</a>
<a href="#L1027" id="L1027">1027</a>
<a href="#L1028" id="L1028">1028</a>
<a href="#L1029" id="L1029">1029</a>
<a href="#L1030" id="L1030">1030</a>
<a href="#L1031" id="L1031">1031</a>
<a href="#L1032" id="L1032">1032</a>
<a href="#L1033" id="L1033">1033</a>
<a href="#L1034" id="L1034">1034</a>
<a href="#L1035" id="L1035">1035</a>
<a href="#L1036" id="L1036">1036</a>
<a href="#L1037" id="L1037">1037</a>
<a href="#L1038" id="L1038">1038</a>
<a href="#L1039" id="L1039">1039</a>
<a href="#L1040" id="L1040">1040</a>
<a href="#L1041" id="L1041">1041</a>
<a href="#L1042" id="L1042">1042</a>
<a href="#L1043" id="L1043">1043</a>
<a href="#L1044" id="L1044">1044</a>
<a href="#L1045" id="L1045">1045</a>
<a href="#L1046" id="L1046">1046</a>
<a href="#L1047" id="L1047">1047</a>
<a href="#L1048" id="L1048">1048</a>
<a href="#L1049" id="L1049">1049</a>
<a href="#L1050" id="L1050">1050</a>
<a href="#L1051" id="L1051">1051</a>
<a href="#L1052" id="L1052">1052</a>
<a href="#L1053" id="L1053">1053</a>
<a href="#L1054" id="L1054">1054</a>
<a href="#L1055" id="L1055">1055</a>
<a href="#L1056" id="L1056">1056</a>
<a href="#L1057" id="L1057">1057</a>
<a href="#L1058" id="L1058">1058</a>
<a href="#L1059" id="L1059">1059</a>
<a href="#L1060" id="L1060">1060</a>
<a href="#L1061" id="L1061">1061</a>
<a href="#L1062" id="L1062">1062</a>
<a href="#L1063" id="L1063">1063</a>
<a href="#L1064" id="L1064">1064</a>
<a href="#L1065" id="L1065">1065</a>
<a href="#L1066" id="L1066">1066</a>
<a href="#L1067" id="L1067">1067</a>
<a href="#L1068" id="L1068">1068</a>
<a href="#L1069" id="L1069">1069</a>
<a href="#L1070" id="L1070">1070</a>
<a href="#L1071" id="L1071">1071</a>
<a href="#L1072" id="L1072">1072</a>
<a href="#L1073" id="L1073">1073</a>
<a href="#L1074" id="L1074">1074</a>
<a href="#L1075" id="L1075">1075</a>
<a href="#L1076" id="L1076">1076</a>
<a href="#L1077" id="L1077">1077</a>
<a href="#L1078" id="L1078">1078</a>
<a href="#L1079" id="L1079">1079</a>
<a href="#L1080" id="L1080">1080</a>
<a href="#L1081" id="L1081">1081</a>
<a href="#L1082" id="L1082">1082</a>
<a href="#L1083" id="L1083">1083</a>
<a href="#L1084" id="L1084">1084</a>
<a href="#L1085" id="L1085">1085</a>
<a href="#L1086" id="L1086">1086</a>
<a href="#L1087" id="L1087">1087</a>
<a href="#L1088" id="L1088">1088</a>
<a href="#L1089" id="L1089">1089</a>
<a href="#L1090" id="L1090">1090</a>
<a href="#L1091" id="L1091">1091</a>
<a href="#L1092" id="L1092">1092</a>
<a href="#L1093" id="L1093">1093</a>
<a href="#L1094" id="L1094">1094</a>
<a href="#L1095" id="L1095">1095</a>
<a href="#L1096" id="L1096">1096</a>
<a href="#L1097" id="L1097">1097</a>
<a href="#L1098" id="L1098">1098</a>
<a href="#L1099" id="L1099">1099</a>
<a href="#L1100" id="L1100">1100</a>
<a href="#L1101" id="L1101">1101</a>
<a href="#L1102" id="L1102">1102</a>
<a href="#L1103" id="L1103">1103</a>
<a href="#L1104" id="L1104">1104</a>
<a href="#L1105" id="L1105">1105</a>
<a href="#L1106" id="L1106">1106</a>
<a href="#L1107" id="L1107">1107</a>
<a href="#L1108" id="L1108">1108</a>
<a href="#L1109" id="L1109">1109</a>
<a href="#L1110" id="L1110">1110</a>
<a href="#L1111" id="L1111">1111</a>
<a href="#L1112" id="L1112">1112</a>
<a href="#L1113" id="L1113">1113</a>
<a href="#L1114" id="L1114">1114</a>
<a href="#L1115" id="L1115">1115</a>
<a href="#L1116" id="L1116">1116</a>
<a href="#L1117" id="L1117">1117</a>
<a href="#L1118" id="L1118">1118</a>
<a href="#L1119" id="L1119">1119</a>
<a href="#L1120" id="L1120">1120</a>
<a href="#L1121" id="L1121">1121</a>
<a href="#L1122" id="L1122">1122</a>
<a href="#L1123" id="L1123">1123</a>
<a href="#L1124" id="L1124">1124</a>
<a href="#L1125" id="L1125">1125</a>
<a href="#L1126" id="L1126">1126</a>
<a href="#L1127" id="L1127">1127</a>
<a href="#L1128" id="L1128">1128</a>
<a href="#L1129" id="L1129">1129</a>
<a href="#L1130" id="L1130">1130</a>
<a href="#L1131" id="L1131">1131</a>
<a href="#L1132" id="L1132">1132</a>
<a href="#L1133" id="L1133">1133</a>
<a href="#L1134" id="L1134">1134</a>
<a href="#L1135" id="L1135">1135</a>
<a href="#L1136" id="L1136">1136</a>
<a href="#L1137" id="L1137">1137</a>
<a href="#L1138" id="L1138">1138</a>
<a href="#L1139" id="L1139">1139</a>
<a href="#L1140" id="L1140">1140</a>
<a href="#L1141" id="L1141">1141</a>
<a href="#L1142" id="L1142">1142</a>
<a href="#L1143" id="L1143">1143</a>
<a href="#L1144" id="L1144">1144</a>
<a href="#L1145" id="L1145">1145</a>
<a href="#L1146" id="L1146">1146</a>
<a href="#L1147" id="L1147">1147</a>
<a href="#L1148" id="L1148">1148</a>
<a href="#L1149" id="L1149">1149</a>
<a href="#L1150" id="L1150">1150</a>
<a href="#L1151" id="L1151">1151</a>
<a href="#L1152" id="L1152">1152</a>
<a href="#L1153" id="L1153">1153</a>
<a href="#L1154" id="L1154">1154</a>
<a href="#L1155" id="L1155">1155</a>
<a href="#L1156" id="L1156">1156</a>
<a href="#L1157" id="L1157">1157</a>
<a href="#L1158" id="L1158">1158</a>
<a href="#L1159" id="L1159">1159</a>
<a href="#L1160" id="L1160">1160</a>
<a href="#L1161" id="L1161">1161</a>
<a href="#L1162" id="L1162">1162</a>
<a href="#L1163" id="L1163">1163</a>
<a href="#L1164" id="L1164">1164</a>
<a href="#L1165" id="L1165">1165</a>
<a href="#L1166" id="L1166">1166</a>
<a href="#L1167" id="L1167">1167</a>
<a href="#L1168" id="L1168">1168</a>
<a href="#L1169" id="L1169">1169</a>
<a href="#L1170" id="L1170">1170</a>
<a href="#L1171" id="L1171">1171</a>
<a href="#L1172" id="L1172">1172</a>
<a href="#L1173" id="L1173">1173</a>
<a href="#L1174" id="L1174">1174</a>
<a href="#L1175" id="L1175">1175</a>
<a href="#L1176" id="L1176">1176</a>
<a href="#L1177" id="L1177">1177</a>
<a href="#L1178" id="L1178">1178</a>
<a href="#L1179" id="L1179">1179</a>
<a href="#L1180" id="L1180">1180</a>
<a href="#L1181" id="L1181">1181</a>
<a href="#L1182" id="L1182">1182</a>
<a href="#L1183" id="L1183">1183</a>
<a href="#L1184" id="L1184">1184</a>
<a href="#L1185" id="L1185">1185</a>
<a href="#L1186" id="L1186">1186</a>
<a href="#L1187" id="L1187">1187</a>
<a href="#L1188" id="L1188">1188</a>
<a href="#L1189" id="L1189">1189</a>
<a href="#L1190" id="L1190">1190</a>
<a href="#L1191" id="L1191">1191</a>
<a href="#L1192" id="L1192">1192</a>
<a href="#L1193" id="L1193">1193</a>
<a href="#L1194" id="L1194">1194</a>
<a href="#L1195" id="L1195">1195</a>
<a href="#L1196" id="L1196">1196</a>
<a href="#L1197" id="L1197">1197</a>
<a href="#L1198" id="L1198">1198</a>
<a href="#L1199" id="L1199">1199</a>
<a href="#L1200" id="L1200">1200</a>
<a href="#L1201" id="L1201">1201</a>
<a href="#L1202" id="L1202">1202</a>
<a href="#L1203" id="L1203">1203</a>
<a href="#L1204" id="L1204">1204</a>
<a href="#L1205" id="L1205">1205</a>
<a href="#L1206" id="L1206">1206</a>
<a href="#L1207" id="L1207">1207</a>
<a href="#L1208" id="L1208">1208</a>
<a href="#L1209" id="L1209">1209</a>
<a href="#L1210" id="L1210">1210</a>
<a href="#L1211" id="L1211">1211</a>
<a href="#L1212" id="L1212">1212</a>
<a href="#L1213" id="L1213">1213</a>
<a href="#L1214" id="L1214">1214</a>
<a href="#L1215" id="L1215">1215</a>
<a href="#L1216" id="L1216">1216</a>
<a href="#L1217" id="L1217">1217</a>
<a href="#L1218" id="L1218">1218</a>
<a href="#L1219" id="L1219">1219</a>
<a href="#L1220" id="L1220">1220</a>
<a href="#L1221" id="L1221">1221</a>
<a href="#L1222" id="L1222">1222</a>
<a href="#L1223" id="L1223">1223</a>
<a href="#L1224" id="L1224">1224</a>
<a href="#L1225" id="L1225">1225</a>
<a href="#L1226" id="L1226">1226</a>
<a href="#L1227" id="L1227">1227</a>
<a href="#L1228" id="L1228">1228</a>
<a href="#L1229" id="L1229">1229</a>
<a href="#L1230" id="L1230">1230</a>
<a href="#L1231" id="L1231">1231</a>
<a href="#L1232" id="L1232">1232</a>
<a href="#L1233" id="L1233">1233</a>
<a href="#L1234" id="L1234">1234</a>
<a href="#L1235" id="L1235">1235</a>
<a href="#L1236" id="L1236">1236</a>
<a href="#L1237" id="L1237">1237</a>
<a href="#L1238" id="L1238">1238</a>
<a href="#L1239" id="L1239">1239</a>
<a href="#L1240" id="L1240">1240</a>
<a href="#L1241" id="L1241">1241</a>
<a href="#L1242" id="L1242">1242</a>
<a href="#L1243" id="L1243">1243</a>
<a href="#L1244" id="L1244">1244</a>
<a href="#L1245" id="L1245">1245</a>
<a href="#L1246" id="L1246">1246</a>
<a href="#L1247" id="L1247">1247</a>
<a href="#L1248" id="L1248">1248</a>
<a href="#L1249" id="L1249">1249</a>
<a href="#L1250" id="L1250">1250</a>
<a href="#L1251" id="L1251">1251</a>
<a href="#L1252" id="L1252">1252</a>
<a href="#L1253" id="L1253">1253</a>
<a href="#L1254" id="L1254">1254</a>
<a href="#L1255" id="L1255">1255</a>
<a href="#L1256" id="L1256">1256</a>
<a href="#L1257" id="L1257">1257</a>
<a href="#L1258" id="L1258">1258</a>
<a href="#L1259" id="L1259">1259</a>
<a href="#L1260" id="L1260">1260</a>
<a href="#L1261" id="L1261">1261</a>
<a href="#L1262" id="L1262">1262</a>
<a href="#L1263" id="L1263">1263</a>
<a href="#L1264" id="L1264">1264</a>
<a href="#L1265" id="L1265">1265</a>
<a href="#L1266" id="L1266">1266</a>
<a href="#L1267" id="L1267">1267</a>
<a href="#L1268" id="L1268">1268</a>
<a href="#L1269" id="L1269">1269</a>
<a href="#L1270" id="L1270">1270</a>
<a href="#L1271" id="L1271">1271</a>
<a href="#L1272" id="L1272">1272</a>
<a href="#L1273" id="L1273">1273</a>
<a href="#L1274" id="L1274">1274</a>
<a href="#L1275" id="L1275">1275</a>
<a href="#L1276" id="L1276">1276</a>
<a href="#L1277" id="L1277">1277</a>
<a href="#L1278" id="L1278">1278</a>
<a href="#L1279" id="L1279">1279</a>
<a href="#L1280" id="L1280">1280</a>
<a href="#L1281" id="L1281">1281</a>
<a href="#L1282" id="L1282">1282</a>
<a href="#L1283" id="L1283">1283</a>
<a href="#L1284" id="L1284">1284</a>
<a href="#L1285" id="L1285">1285</a>
<a href="#L1286" id="L1286">1286</a>
<a href="#L1287" id="L1287">1287</a>
<a href="#L1288" id="L1288">1288</a>
<a href="#L1289" id="L1289">1289</a>
<a href="#L1290" id="L1290">1290</a>
<a href="#L1291" id="L1291">1291</a>
<a href="#L1292" id="L1292">1292</a>
<a href="#L1293" id="L1293">1293</a>
<a href="#L1294" id="L1294">1294</a>
<a href="#L1295" id="L1295">1295</a>
<a href="#L1296" id="L1296">1296</a>
<a href="#L1297" id="L1297">1297</a>
<a href="#L1298" id="L1298">1298</a>
<a href="#L1299" id="L1299">1299</a>
<a href="#L1300" id="L1300">1300</a>
<a href="#L1301" id="L1301">1301</a>
<a href="#L1302" id="L1302">1302</a>
<a href="#L1303" id="L1303">1303</a>
<a href="#L1304" id="L1304">1304</a>
<a href="#L1305" id="L1305">1305</a>
<a href="#L1306" id="L1306">1306</a>
<a href="#L1307" id="L1307">1307</a>
<a href="#L1308" id="L1308">1308</a>
<a href="#L1309" id="L1309">1309</a>
<a href="#L1310" id="L1310">1310</a>
<a href="#L1311" id="L1311">1311</a>
<a href="#L1312" id="L1312">1312</a>
<a href="#L1313" id="L1313">1313</a>
<a href="#L1314" id="L1314">1314</a>
<a href="#L1315" id="L1315">1315</a>
<a href="#L1316" id="L1316">1316</a>
<a href="#L1317" id="L1317">1317</a>
<a href="#L1318" id="L1318">1318</a>
<a href="#L1319" id="L1319">1319</a>
<a href="#L1320" id="L1320">1320</a>
<a href="#L1321" id="L1321">1321</a>
<a href="#L1322" id="L1322">1322</a>
<a href="#L1323" id="L1323">1323</a>
<a href="#L1324" id="L1324">1324</a>
<a href="#L1325" id="L1325">1325</a>
<a href="#L1326" id="L1326">1326</a>
<a href="#L1327" id="L1327">1327</a>
<a href="#L1328" id="L1328">1328</a>
<a href="#L1329" id="L1329">1329</a>
<a href="#L1330" id="L1330">1330</a>
<a href="#L1331" id="L1331">1331</a>
<a href="#L1332" id="L1332">1332</a>
<a href="#L1333" id="L1333">1333</a>
<a href="#L1334" id="L1334">1334</a>
<a href="#L1335" id="L1335">1335</a>
<a href="#L1336" id="L1336">1336</a>
<a href="#L1337" id="L1337">1337</a>
<a href="#L1338" id="L1338">1338</a>
<a href="#L1339" id="L1339">1339</a>
<a href="#L1340" id="L1340">1340</a>
<a href="#L1341" id="L1341">1341</a>
<a href="#L1342" id="L1342">1342</a>
<a href="#L1343" id="L1343">1343</a>
<a href="#L1344" id="L1344">1344</a>
<a href="#L1345" id="L1345">1345</a>
<a href="#L1346" id="L1346">1346</a>
<a href="#L1347" id="L1347">1347</a>
<a href="#L1348" id="L1348">1348</a>
<a href="#L1349" id="L1349">1349</a>
<a href="#L1350" id="L1350">1350</a>
<a href="#L1351" id="L1351">1351</a>
<a href="#L1352" id="L1352">1352</a>
<a href="#L1353" id="L1353">1353</a>
<a href="#L1354" id="L1354">1354</a>
<a href="#L1355" id="L1355">1355</a>
<a href="#L1356" id="L1356">1356</a>
<a href="#L1357" id="L1357">1357</a>
<a href="#L1358" id="L1358">1358</a>
<a href="#L1359" id="L1359">1359</a>
<a href="#L1360" id="L1360">1360</a>
<a href="#L1361" id="L1361">1361</a>
<a href="#L1362" id="L1362">1362</a>
<a href="#L1363" id="L1363">1363</a>
<a href="#L1364" id="L1364">1364</a>
<a href="#L1365" id="L1365">1365</a>
<a href="#L1366" id="L1366">1366</a>
<a href="#L1367" id="L1367">1367</a>
<a href="#L1368" id="L1368">1368</a>
<a href="#L1369" id="L1369">1369</a>
<a href="#L1370" id="L1370">1370</a>
<a href="#L1371" id="L1371">1371</a>
<a href="#L1372" id="L1372">1372</a>
<a href="#L1373" id="L1373">1373</a>
<a href="#L1374" id="L1374">1374</a>
<a href="#L1375" id="L1375">1375</a>
<a href="#L1376" id="L1376">1376</a>
<a href="#L1377" id="L1377">1377</a>
<a href="#L1378" id="L1378">1378</a>
<a href="#L1379" id="L1379">1379</a>
<a href="#L1380" id="L1380">1380</a>
<a href="#L1381" id="L1381">1381</a>
<a href="#L1382" id="L1382">1382</a>
<a href="#L1383" id="L1383">1383</a>
<a href="#L1384" id="L1384">1384</a>
<a href="#L1385" id="L1385">1385</a>
<a href="#L1386" id="L1386">1386</a>
<a href="#L1387" id="L1387">1387</a>
<a href="#L1388" id="L1388">1388</a>
<a href="#L1389" id="L1389">1389</a>
<a href="#L1390" id="L1390">1390</a>
<a href="#L1391" id="L1391">1391</a>
<a href="#L1392" id="L1392">1392</a>
<a href="#L1393" id="L1393">1393</a>
<a href="#L1394" id="L1394">1394</a>
<a href="#L1395" id="L1395">1395</a>
<a href="#L1396" id="L1396">1396</a>
<a href="#L1397" id="L1397">1397</a>
<a href="#L1398" id="L1398">1398</a>
<a href="#L1399" id="L1399">1399</a>
<a href="#L1400" id="L1400">1400</a>
<a href="#L1401" id="L1401">1401</a>
<a href="#L1402" id="L1402">1402</a>
<a href="#L1403" id="L1403">1403</a>
<a href="#L1404" id="L1404">1404</a>
<a href="#L1405" id="L1405">1405</a>
<a href="#L1406" id="L1406">1406</a>
<a href="#L1407" id="L1407">1407</a>
<a href="#L1408" id="L1408">1408</a>
<a href="#L1409" id="L1409">1409</a>
<a href="#L1410" id="L1410">1410</a>
<a href="#L1411" id="L1411">1411</a>
<a href="#L1412" id="L1412">1412</a>
<a href="#L1413" id="L1413">1413</a>
<a href="#L1414" id="L1414">1414</a>
<a href="#L1415" id="L1415">1415</a>
<a href="#L1416" id="L1416">1416</a>
<a href="#L1417" id="L1417">1417</a>
<a href="#L1418" id="L1418">1418</a>
<a href="#L1419" id="L1419">1419</a>
<a href="#L1420" id="L1420">1420</a>
<a href="#L1421" id="L1421">1421</a>
<a href="#L1422" id="L1422">1422</a>
<a href="#L1423" id="L1423">1423</a>
<a href="#L1424" id="L1424">1424</a>
<a href="#L1425" id="L1425">1425</a>
<a href="#L1426" id="L1426">1426</a>
<a href="#L1427" id="L1427">1427</a>
<a href="#L1428" id="L1428">1428</a>
<a href="#L1429" id="L1429">1429</a>
<a href="#L1430" id="L1430">1430</a>
<a href="#L1431" id="L1431">1431</a>
<a href="#L1432" id="L1432">1432</a>
<a href="#L1433" id="L1433">1433</a>
<a href="#L1434" id="L1434">1434</a>
<a href="#L1435" id="L1435">1435</a>
<a href="#L1436" id="L1436">1436</a>
<a href="#L1437" id="L1437">1437</a>
<a href="#L1438" id="L1438">1438</a>
<a href="#L1439" id="L1439">1439</a>
<a href="#L1440" id="L1440">1440</a>
<a href="#L1441" id="L1441">1441</a>
<a href="#L1442" id="L1442">1442</a>
<a href="#L1443" id="L1443">1443</a>
<a href="#L1444" id="L1444">1444</a>
<a href="#L1445" id="L1445">1445</a>
<a href="#L1446" id="L1446">1446</a>
<a href="#L1447" id="L1447">1447</a>
<a href="#L1448" id="L1448">1448</a>
<a href="#L1449" id="L1449">1449</a>
<a href="#L1450" id="L1450">1450</a>
<a href="#L1451" id="L1451">1451</a>
<a href="#L1452" id="L1452">1452</a>
<a href="#L1453" id="L1453">1453</a>
<a href="#L1454" id="L1454">1454</a>
<a href="#L1455" id="L1455">1455</a>
<a href="#L1456" id="L1456">1456</a>
<a href="#L1457" id="L1457">1457</a>
<a href="#L1458" id="L1458">1458</a>
<a href="#L1459" id="L1459">1459</a>
<a href="#L1460" id="L1460">1460</a>
<a href="#L1461" id="L1461">1461</a>
<a href="#L1462" id="L1462">1462</a>
<a href="#L1463" id="L1463">1463</a>
<a href="#L1464" id="L1464">1464</a>
<a href="#L1465" id="L1465">1465</a>
<a href="#L1466" id="L1466">1466</a>
<a href="#L1467" id="L1467">1467</a>
<a href="#L1468" id="L1468">1468</a>
<a href="#L1469" id="L1469">1469</a>
<a href="#L1470" id="L1470">1470</a>
<a href="#L1471" id="L1471">1471</a>
<a href="#L1472" id="L1472">1472</a>
<a href="#L1473" id="L1473">1473</a>
<a href="#L1474" id="L1474">1474</a>
<a href="#L1475" id="L1475">1475</a>
<a href="#L1476" id="L1476">1476</a>
<a href="#L1477" id="L1477">1477</a>
<a href="#L1478" id="L1478">1478</a>
<a href="#L1479" id="L1479">1479</a>
<a href="#L1480" id="L1480">1480</a>
<a href="#L1481" id="L1481">1481</a>
<a href="#L1482" id="L1482">1482</a>
<a href="#L1483" id="L1483">1483</a>
<a href="#L1484" id="L1484">1484</a>
<a href="#L1485" id="L1485">1485</a>
<a href="#L1486" id="L1486">1486</a>
<a href="#L1487" id="L1487">1487</a>
<a href="#L1488" id="L1488">1488</a>
<a href="#L1489" id="L1489">1489</a>
<a href="#L1490" id="L1490">1490</a>
<a href="#L1491" id="L1491">1491</a>
<a href="#L1492" id="L1492">1492</a>
<a href="#L1493" id="L1493">1493</a>
<a href="#L1494" id="L1494">1494</a>
<a href="#L1495" id="L1495">1495</a>
<a href="#L1496" id="L1496">1496</a>
<a href="#L1497" id="L1497">1497</a>
<a href="#L1498" id="L1498">1498</a>
<a href="#L1499" id="L1499">1499</a>
<a href="#L1500" id="L1500">1500</a>
<a href="#L1501" id="L1501">1501</a>
<a href="#L1502" id="L1502">1502</a>
<a href="#L1503" id="L1503">1503</a>
<a href="#L1504" id="L1504">1504</a>
<a href="#L1505" id="L1505">1505</a>
<a href="#L1506" id="L1506">1506</a>
<a href="#L1507" id="L1507">1507</a>
<a href="#L1508" id="L1508">1508</a>
<a href="#L1509" id="L1509">1509</a>
<a href="#L1510" id="L1510">1510</a>
<a href="#L1511" id="L1511">1511</a>
<a href="#L1512" id="L1512">1512</a>
<a href="#L1513" id="L1513">1513</a>
<a href="#L1514" id="L1514">1514</a>
<a href="#L1515" id="L1515">1515</a>
<a href="#L1516" id="L1516">1516</a>
<a href="#L1517" id="L1517">1517</a>
<a href="#L1518" id="L1518">1518</a>
<a href="#L1519" id="L1519">1519</a>
<a href="#L1520" id="L1520">1520</a>
<a href="#L1521" id="L1521">1521</a>
<a href="#L1522" id="L1522">1522</a>
<a href="#L1523" id="L1523">1523</a>
<a href="#L1524" id="L1524">1524</a>
<a href="#L1525" id="L1525">1525</a>
<a href="#L1526" id="L1526">1526</a>
<a href="#L1527" id="L1527">1527</a>
<a href="#L1528" id="L1528">1528</a>
<a href="#L1529" id="L1529">1529</a>
<a href="#L1530" id="L1530">1530</a>
<a href="#L1531" id="L1531">1531</a>
<a href="#L1532" id="L1532">1532</a>
<a href="#L1533" id="L1533">1533</a>
<a href="#L1534" id="L1534">1534</a>
<a href="#L1535" id="L1535">1535</a>
<a href="#L1536" id="L1536">1536</a>
<a href="#L1537" id="L1537">1537</a>
<a href="#L1538" id="L1538">1538</a>
<a href="#L1539" id="L1539">1539</a>
<a href="#L1540" id="L1540">1540</a>
<a href="#L1541" id="L1541">1541</a>
<a href="#L1542" id="L1542">1542</a>
<a href="#L1543" id="L1543">1543</a>
<a href="#L1544" id="L1544">1544</a>
<a href="#L1545" id="L1545">1545</a>
<a href="#L1546" id="L1546">1546</a>
<a href="#L1547" id="L1547">1547</a>
<a href="#L1548" id="L1548">1548</a>
<a href="#L1549" id="L1549">1549</a>
<a href="#L1550" id="L1550">1550</a>
<a href="#L1551" id="L1551">1551</a>
<a href="#L1552" id="L1552">1552</a>
<a href="#L1553" id="L1553">1553</a>
<a href="#L1554" id="L1554">1554</a>
<a href="#L1555" id="L1555">1555</a>
<a href="#L1556" id="L1556">1556</a>
<a href="#L1557" id="L1557">1557</a>
<a href="#L1558" id="L1558">1558</a>
<a href="#L1559" id="L1559">1559</a>
<a href="#L1560" id="L1560">1560</a>
<a href="#L1561" id="L1561">1561</a>
<a href="#L1562" id="L1562">1562</a>
<a href="#L1563" id="L1563">1563</a>
<a href="#L1564" id="L1564">1564</a>
<a href="#L1565" id="L1565">1565</a>
<a href="#L1566" id="L1566">1566</a>
<a href="#L1567" id="L1567">1567</a>
<a href="#L1568" id="L1568">1568</a>
<a href="#L1569" id="L1569">1569</a>
<a href="#L1570" id="L1570">1570</a>
<a href="#L1571" id="L1571">1571</a>
<a href="#L1572" id="L1572">1572</a>
<a href="#L1573" id="L1573">1573</a>
<a href="#L1574" id="L1574">1574</a>
<a href="#L1575" id="L1575">1575</a>
<a href="#L1576" id="L1576">1576</a>
<a href="#L1577" id="L1577">1577</a>
<a href="#L1578" id="L1578">1578</a>
<a href="#L1579" id="L1579">1579</a>
<a href="#L1580" id="L1580">1580</a>
<a href="#L1581" id="L1581">1581</a>
<a href="#L1582" id="L1582">1582</a>
<a href="#L1583" id="L1583">1583</a>
<a href="#L1584" id="L1584">1584</a>
<a href="#L1585" id="L1585">1585</a>
<a href="#L1586" id="L1586">1586</a>
<a href="#L1587" id="L1587">1587</a>
<a href="#L1588" id="L1588">1588</a>
<a href="#L1589" id="L1589">1589</a>
<a href="#L1590" id="L1590">1590</a>
<a href="#L1591" id="L1591">1591</a>
<a href="#L1592" id="L1592">1592</a>
<a href="#L1593" id="L1593">1593</a>
<a href="#L1594" id="L1594">1594</a>
<a href="#L1595" id="L1595">1595</a>
<a href="#L1596" id="L1596">1596</a>
<a href="#L1597" id="L1597">1597</a>
<a href="#L1598" id="L1598">1598</a>
<a href="#L1599" id="L1599">1599</a>
<a href="#L1600" id="L1600">1600</a>
<a href="#L1601" id="L1601">1601</a>
<a href="#L1602" id="L1602">1602</a>
<a href="#L1603" id="L1603">1603</a>
<a href="#L1604" id="L1604">1604</a>
<a href="#L1605" id="L1605">1605</a>
<a href="#L1606" id="L1606">1606</a>
<a href="#L1607" id="L1607">1607</a>
<a href="#L1608" id="L1608">1608</a>
<a href="#L1609" id="L1609">1609</a>
<a href="#L1610" id="L1610">1610</a>
<a href="#L1611" id="L1611">1611</a>
<a href="#L1612" id="L1612">1612</a>
<a href="#L1613" id="L1613">1613</a>
<a href="#L1614" id="L1614">1614</a>
<a href="#L1615" id="L1615">1615</a>
<a href="#L1616" id="L1616">1616</a>
<a href="#L1617" id="L1617">1617</a>
<a href="#L1618" id="L1618">1618</a>
<a href="#L1619" id="L1619">1619</a>
<a href="#L1620" id="L1620">1620</a>
<a href="#L1621" id="L1621">1621</a>
<a href="#L1622" id="L1622">1622</a>
<a href="#L1623" id="L1623">1623</a>
<a href="#L1624" id="L1624">1624</a>
<a href="#L1625" id="L1625">1625</a>
<a href="#L1626" id="L1626">1626</a>
<a href="#L1627" id="L1627">1627</a>
<a href="#L1628" id="L1628">1628</a>
<a href="#L1629" id="L1629">1629</a>
<a href="#L1630" id="L1630">1630</a>
<a href="#L1631" id="L1631">1631</a>
<a href="#L1632" id="L1632">1632</a>
<a href="#L1633" id="L1633">1633</a>
<a href="#L1634" id="L1634">1634</a>
<a href="#L1635" id="L1635">1635</a>
<a href="#L1636" id="L1636">1636</a>
<a href="#L1637" id="L1637">1637</a>
<a href="#L1638" id="L1638">1638</a>
<a href="#L1639" id="L1639">1639</a>
<a href="#L1640" id="L1640">1640</a>
<a href="#L1641" id="L1641">1641</a>
<a href="#L1642" id="L1642">1642</a>
<a href="#L1643" id="L1643">1643</a>
<a href="#L1644" id="L1644">1644</a>
<a href="#L1645" id="L1645">1645</a>
<a href="#L1646" id="L1646">1646</a>
<a href="#L1647" id="L1647">1647</a>
<a href="#L1648" id="L1648">1648</a>
<a href="#L1649" id="L1649">1649</a>
<a href="#L1650" id="L1650">1650</a>
<a href="#L1651" id="L1651">1651</a>
<a href="#L1652" id="L1652">1652</a>
<a href="#L1653" id="L1653">1653</a>
<a href="#L1654" id="L1654">1654</a>
<a href="#L1655" id="L1655">1655</a>
<a href="#L1656" id="L1656">1656</a>
<a href="#L1657" id="L1657">1657</a>
<a href="#L1658" id="L1658">1658</a>
<a href="#L1659" id="L1659">1659</a>
<a href="#L1660" id="L1660">1660</a>
<a href="#L1661" id="L1661">1661</a>
<a href="#L1662" id="L1662">1662</a>
<a href="#L1663" id="L1663">1663</a>
<a href="#L1664" id="L1664">1664</a>
<a href="#L1665" id="L1665">1665</a>
<a href="#L1666" id="L1666">1666</a>
<a href="#L1667" id="L1667">1667</a>
<a href="#L1668" id="L1668">1668</a>
<a href="#L1669" id="L1669">1669</a>
<a href="#L1670" id="L1670">1670</a>
<a href="#L1671" id="L1671">1671</a>
<a href="#L1672" id="L1672">1672</a>
<a href="#L1673" id="L1673">1673</a>
<a href="#L1674" id="L1674">1674</a>
<a href="#L1675" id="L1675">1675</a>
<a href="#L1676" id="L1676">1676</a>
<a href="#L1677" id="L1677">1677</a>
<a href="#L1678" id="L1678">1678</a>
<a href="#L1679" id="L1679">1679</a>
<a href="#L1680" id="L1680">1680</a>
<a href="#L1681" id="L1681">1681</a>
<a href="#L1682" id="L1682">1682</a>
<a href="#L1683" id="L1683">1683</a>
<a href="#L1684" id="L1684">1684</a>
<a href="#L1685" id="L1685">1685</a>
<a href="#L1686" id="L1686">1686</a>
<a href="#L1687" id="L1687">1687</a>
<a href="#L1688" id="L1688">1688</a>
<a href="#L1689" id="L1689">1689</a>
<a href="#L1690" id="L1690">1690</a>
<a href="#L1691" id="L1691">1691</a>
<a href="#L1692" id="L1692">1692</a>
<a href="#L1693" id="L1693">1693</a>
<a href="#L1694" id="L1694">1694</a>
<a href="#L1695" id="L1695">1695</a>
<a href="#L1696" id="L1696">1696</a>
<a href="#L1697" id="L1697">1697</a>
<a href="#L1698" id="L1698">1698</a>
<a href="#L1699" id="L1699">1699</a>
<a href="#L1700" id="L1700">1700</a>
<a href="#L1701" id="L1701">1701</a>
<a href="#L1702" id="L1702">1702</a>
<a href="#L1703" id="L1703">1703</a>
<a href="#L1704" id="L1704">1704</a>
<a href="#L1705" id="L1705">1705</a>
<a href="#L1706" id="L1706">1706</a>
<a href="#L1707" id="L1707">1707</a>
<a href="#L1708" id="L1708">1708</a>
<a href="#L1709" id="L1709">1709</a>
<a href="#L1710" id="L1710">1710</a>
<a href="#L1711" id="L1711">1711</a>
<a href="#L1712" id="L1712">1712</a>
<a href="#L1713" id="L1713">1713</a>
<a href="#L1714" id="L1714">1714</a>
<a href="#L1715" id="L1715">1715</a>
<a href="#L1716" id="L1716">1716</a>
<a href="#L1717" id="L1717">1717</a>
<a href="#L1718" id="L1718">1718</a>
<a href="#L1719" id="L1719">1719</a>
<a href="#L1720" id="L1720">1720</a>
<a href="#L1721" id="L1721">1721</a>
<a href="#L1722" id="L1722">1722</a>
<a href="#L1723" id="L1723">1723</a>
<a href="#L1724" id="L1724">1724</a>
<a href="#L1725" id="L1725">1725</a>
<a href="#L1726" id="L1726">1726</a>
<a href="#L1727" id="L1727">1727</a>
<a href="#L1728" id="L1728">1728</a>
<a href="#L1729" id="L1729">1729</a>
<a href="#L1730" id="L1730">1730</a>
<a href="#L1731" id="L1731">1731</a>
<a href="#L1732" id="L1732">1732</a>
<a href="#L1733" id="L1733">1733</a>
<a href="#L1734" id="L1734">1734</a>
<a href="#L1735" id="L1735">1735</a>
<a href="#L1736" id="L1736">1736</a>
<a href="#L1737" id="L1737">1737</a>
<a href="#L1738" id="L1738">1738</a>
<a href="#L1739" id="L1739">1739</a>
<a href="#L1740" id="L1740">1740</a>
<a href="#L1741" id="L1741">1741</a>
<a href="#L1742" id="L1742">1742</a>
<a href="#L1743" id="L1743">1743</a>
<a href="#L1744" id="L1744">1744</a>
<a href="#L1745" id="L1745">1745</a>
<a href="#L1746" id="L1746">1746</a>
<a href="#L1747" id="L1747">1747</a>
<a href="#L1748" id="L1748">1748</a>
<a href="#L1749" id="L1749">1749</a>
<a href="#L1750" id="L1750">1750</a>
<a href="#L1751" id="L1751">1751</a>
<a href="#L1752" id="L1752">1752</a>
<a href="#L1753" id="L1753">1753</a>
<a href="#L1754" id="L1754">1754</a>
<a href="#L1755" id="L1755">1755</a>
<a href="#L1756" id="L1756">1756</a>
<a href="#L1757" id="L1757">1757</a>
<a href="#L1758" id="L1758">1758</a>
<a href="#L1759" id="L1759">1759</a>
<a href="#L1760" id="L1760">1760</a>
<a href="#L1761" id="L1761">1761</a>
<a href="#L1762" id="L1762">1762</a>
<a href="#L1763" id="L1763">1763</a>
<a href="#L1764" id="L1764">1764</a>
<a href="#L1765" id="L1765">1765</a>
<a href="#L1766" id="L1766">1766</a>
<a href="#L1767" id="L1767">1767</a>
<a href="#L1768" id="L1768">1768</a>
<a href="#L1769" id="L1769">1769</a>
<a href="#L1770" id="L1770">1770</a>
<a href="#L1771" id="L1771">1771</a>
<a href="#L1772" id="L1772">1772</a>
<a href="#L1773" id="L1773">1773</a>
<a href="#L1774" id="L1774">1774</a>
<a href="#L1775" id="L1775">1775</a>
<a href="#L1776" id="L1776">1776</a>
<a href="#L1777" id="L1777">1777</a>
<a href="#L1778" id="L1778">1778</a>
<a href="#L1779" id="L1779">1779</a>
<a href="#L1780" id="L1780">1780</a>
<a href="#L1781" id="L1781">1781</a>
<a href="#L1782" id="L1782">1782</a>
<a href="#L1783" id="L1783">1783</a>
<a href="#L1784" id="L1784">1784</a>
<a href="#L1785" id="L1785">1785</a>
<a href="#L1786" id="L1786">1786</a>
<a href="#L1787" id="L1787">1787</a>
<a href="#L1788" id="L1788">1788</a>
<a href="#L1789" id="L1789">1789</a>
<a href="#L1790" id="L1790">1790</a>
<a href="#L1791" id="L1791">1791</a>
<a href="#L1792" id="L1792">1792</a>
<a href="#L1793" id="L1793">1793</a>
<a href="#L1794" id="L1794">1794</a>
<a href="#L1795" id="L1795">1795</a>
<a href="#L1796" id="L1796">1796</a>
<a href="#L1797" id="L1797">1797</a>
<a href="#L1798" id="L1798">1798</a>
<a href="#L1799" id="L1799">1799</a>
<a href="#L1800" id="L1800">1800</a>
<a href="#L1801" id="L1801">1801</a>
<a href="#L1802" id="L1802">1802</a>
<a href="#L1803" id="L1803">1803</a>
<a href="#L1804" id="L1804">1804</a>
<a href="#L1805" id="L1805">1805</a>
<a href="#L1806" id="L1806">1806</a>
<a href="#L1807" id="L1807">1807</a>
<a href="#L1808" id="L1808">1808</a>
<a href="#L1809" id="L1809">1809</a>
<a href="#L1810" id="L1810">1810</a>
<a href="#L1811" id="L1811">1811</a>
<a href="#L1812" id="L1812">1812</a>
<a href="#L1813" id="L1813">1813</a>
<a href="#L1814" id="L1814">1814</a>
<a href="#L1815" id="L1815">1815</a>
<a href="#L1816" id="L1816">1816</a>
<a href="#L1817" id="L1817">1817</a>
<a href="#L1818" id="L1818">1818</a>
<a href="#L1819" id="L1819">1819</a>
<a href="#L1820" id="L1820">1820</a>
<a href="#L1821" id="L1821">1821</a>
<a href="#L1822" id="L1822">1822</a>
<a href="#L1823" id="L1823">1823</a>
<a href="#L1824" id="L1824">1824</a>
<a href="#L1825" id="L1825">1825</a>
<a href="#L1826" id="L1826">1826</a>
<a href="#L1827" id="L1827">1827</a>
<a href="#L1828" id="L1828">1828</a>
<a href="#L1829" id="L1829">1829</a>
<a href="#L1830" id="L1830">1830</a>
<a href="#L1831" id="L1831">1831</a>
<a href="#L1832" id="L1832">1832</a>
<a href="#L1833" id="L1833">1833</a>
<a href="#L1834" id="L1834">1834</a>
<a href="#L1835" id="L1835">1835</a>
<a href="#L1836" id="L1836">1836</a>
<a href="#L1837" id="L1837">1837</a>
<a href="#L1838" id="L1838">1838</a>
<a href="#L1839" id="L1839">1839</a>
<a href="#L1840" id="L1840">1840</a>
<a href="#L1841" id="L1841">1841</a>
<a href="#L1842" id="L1842">1842</a>
<a href="#L1843" id="L1843">1843</a>
<a href="#L1844" id="L1844">1844</a>
<a href="#L1845" id="L1845">1845</a>
<a href="#L1846" id="L1846">1846</a>
<a href="#L1847" id="L1847">1847</a>
<a href="#L1848" id="L1848">1848</a>
<a href="#L1849" id="L1849">1849</a>
<a href="#L1850" id="L1850">1850</a>
<a href="#L1851" id="L1851">1851</a>
<a href="#L1852" id="L1852">1852</a>
<a href="#L1853" id="L1853">1853</a>
<a href="#L1854" id="L1854">1854</a>
<a href="#L1855" id="L1855">1855</a>
<a href="#L1856" id="L1856">1856</a>
<a href="#L1857" id="L1857">1857</a>
<a href="#L1858" id="L1858">1858</a>
<a href="#L1859" id="L1859">1859</a>
<a href="#L1860" id="L1860">1860</a>
<a href="#L1861" id="L1861">1861</a>
<a href="#L1862" id="L1862">1862</a>
<a href="#L1863" id="L1863">1863</a>
<a href="#L1864" id="L1864">1864</a>
<a href="#L1865" id="L1865">1865</a>
<a href="#L1866" id="L1866">1866</a>
<a href="#L1867" id="L1867">1867</a>
<a href="#L1868" id="L1868">1868</a>
<a href="#L1869" id="L1869">1869</a>
<a href="#L1870" id="L1870">1870</a>
<a href="#L1871" id="L1871">1871</a>
<a href="#L1872" id="L1872">1872</a>
<a href="#L1873" id="L1873">1873</a>
<a href="#L1874" id="L1874">1874</a>
<a href="#L1875" id="L1875">1875</a>
<a href="#L1876" id="L1876">1876</a>
<a href="#L1877" id="L1877">1877</a>
<a href="#L1878" id="L1878">1878</a>
<a href="#L1879" id="L1879">1879</a>
<a href="#L1880" id="L1880">1880</a>
<a href="#L1881" id="L1881">1881</a>
<a href="#L1882" id="L1882">1882</a>
<a href="#L1883" id="L1883">1883</a>
<a href="#L1884" id="L1884">1884</a>
<a href="#L1885" id="L1885">1885</a>
<a href="#L1886" id="L1886">1886</a>
<a href="#L1887" id="L1887">1887</a>
<a href="#L1888" id="L1888">1888</a>
<a href="#L1889" id="L1889">1889</a>
<a href="#L1890" id="L1890">1890</a>
<a href="#L1891" id="L1891">1891</a>
<a href="#L1892" id="L1892">1892</a>
<a href="#L1893" id="L1893">1893</a>
<a href="#L1894" id="L1894">1894</a>
<a href="#L1895" id="L1895">1895</a>
<a href="#L1896" id="L1896">1896</a>
<a href="#L1897" id="L1897">1897</a>
<a href="#L1898" id="L1898">1898</a>
<a href="#L1899" id="L1899">1899</a>
<a href="#L1900" id="L1900">1900</a>
<a href="#L1901" id="L1901">1901</a>
<a href="#L1902" id="L1902">1902</a>
<a href="#L1903" id="L1903">1903</a>
<a href="#L1904" id="L1904">1904</a>
<a href="#L1905" id="L1905">1905</a>
<a href="#L1906" id="L1906">1906</a>
<a href="#L1907" id="L1907">1907</a>
<a href="#L1908" id="L1908">1908</a>
<a href="#L1909" id="L1909">1909</a>
<a href="#L1910" id="L1910">1910</a>
<a href="#L1911" id="L1911">1911</a>
<a href="#L1912" id="L1912">1912</a>
<a href="#L1913" id="L1913">1913</a>
<a href="#L1914" id="L1914">1914</a>
<a href="#L1915" id="L1915">1915</a>
<a href="#L1916" id="L1916">1916</a>
<a href="#L1917" id="L1917">1917</a>
<a href="#L1918" id="L1918">1918</a>
<a href="#L1919" id="L1919">1919</a>
<a href="#L1920" id="L1920">1920</a>
<a href="#L1921" id="L1921">1921</a>
<a href="#L1922" id="L1922">1922</a>
<a href="#L1923" id="L1923">1923</a>
<a href="#L1924" id="L1924">1924</a>
<a href="#L1925" id="L1925">1925</a>
<a href="#L1926" id="L1926">1926</a>
<a href="#L1927" id="L1927">1927</a>
<a href="#L1928" id="L1928">1928</a>
<a href="#L1929" id="L1929">1929</a>
<a href="#L1930" id="L1930">1930</a>
<a href="#L1931" id="L1931">1931</a>
<a href="#L1932" id="L1932">1932</a>
<a href="#L1933" id="L1933">1933</a>
<a href="#L1934" id="L1934">1934</a>
<a href="#L1935" id="L1935">1935</a>
<a href="#L1936" id="L1936">1936</a>
<a href="#L1937" id="L1937">1937</a>
<a href="#L1938" id="L1938">1938</a>
<a href="#L1939" id="L1939">1939</a>
<a href="#L1940" id="L1940">1940</a>
<a href="#L1941" id="L1941">1941</a>
<a href="#L1942" id="L1942">1942</a>
<a href="#L1943" id="L1943">1943</a>
<a href="#L1944" id="L1944">1944</a>
<a href="#L1945" id="L1945">1945</a>
<a href="#L1946" id="L1946">1946</a>
<a href="#L1947" id="L1947">1947</a>
<a href="#L1948" id="L1948">1948</a>
<a href="#L1949" id="L1949">1949</a>
<a href="#L1950" id="L1950">1950</a>
<a href="#L1951" id="L1951">1951</a>
<a href="#L1952" id="L1952">1952</a>
<a href="#L1953" id="L1953">1953</a>
<a href="#L1954" id="L1954">1954</a>
<a href="#L1955" id="L1955">1955</a>
<a href="#L1956" id="L1956">1956</a>
<a href="#L1957" id="L1957">1957</a>
<a href="#L1958" id="L1958">1958</a>
<a href="#L1959" id="L1959">1959</a>
<a href="#L1960" id="L1960">1960</a>
<a href="#L1961" id="L1961">1961</a>
<a href="#L1962" id="L1962">1962</a>
<a href="#L1963" id="L1963">1963</a>
<a href="#L1964" id="L1964">1964</a>
<a href="#L1965" id="L1965">1965</a>
<a href="#L1966" id="L1966">1966</a>
<a href="#L1967" id="L1967">1967</a>
<a href="#L1968" id="L1968">1968</a>
<a href="#L1969" id="L1969">1969</a>
<a href="#L1970" id="L1970">1970</a>
<a href="#L1971" id="L1971">1971</a>
<a href="#L1972" id="L1972">1972</a>
<a href="#L1973" id="L1973">1973</a>
<a href="#L1974" id="L1974">1974</a>
<a href="#L1975" id="L1975">1975</a>
<a href="#L1976" id="L1976">1976</a>
<a href="#L1977" id="L1977">1977</a>
<a href="#L1978" id="L1978">1978</a>
<a href="#L1979" id="L1979">1979</a>
<a href="#L1980" id="L1980">1980</a>
<a href="#L1981" id="L1981">1981</a>
<a href="#L1982" id="L1982">1982</a>
<a href="#L1983" id="L1983">1983</a>
<a href="#L1984" id="L1984">1984</a>
<a href="#L1985" id="L1985">1985</a>
<a href="#L1986" id="L1986">1986</a>
<a href="#L1987" id="L1987">1987</a>
<a href="#L1988" id="L1988">1988</a>
<a href="#L1989" id="L1989">1989</a>
<a href="#L1990" id="L1990">1990</a>
<a href="#L1991" id="L1991">1991</a>
<a href="#L1992" id="L1992">1992</a>
<a href="#L1993" id="L1993">1993</a>
<a href="#L1994" id="L1994">1994</a>
<a href="#L1995" id="L1995">1995</a>
<a href="#L1996" id="L1996">1996</a>
<a href="#L1997" id="L1997">1997</a>
<a href="#L1998" id="L1998">1998</a>
<a href="#L1999" id="L1999">1999</a>
<a href="#L2000" id="L2000">2000</a>
<a href="#L2001" id="L2001">2001</a>
<a href="#L2002" id="L2002">2002</a>
<a href="#L2003" id="L2003">2003</a>
<a href="#L2004" id="L2004">2004</a>
<a href="#L2005" id="L2005">2005</a>
<a href="#L2006" id="L2006">2006</a>
<a href="#L2007" id="L2007">2007</a>
<a href="#L2008" id="L2008">2008</a>
<a href="#L2009" id="L2009">2009</a>
<a href="#L2010" id="L2010">2010</a>
<a href="#L2011" id="L2011">2011</a>
<a href="#L2012" id="L2012">2012</a>
<a href="#L2013" id="L2013">2013</a>
<a href="#L2014" id="L2014">2014</a>
<a href="#L2015" id="L2015">2015</a>
<a href="#L2016" id="L2016">2016</a>
<a href="#L2017" id="L2017">2017</a>
<a href="#L2018" id="L2018">2018</a>
<a href="#L2019" id="L2019">2019</a>
<a href="#L2020" id="L2020">2020</a>
<a href="#L2021" id="L2021">2021</a>
<a href="#L2022" id="L2022">2022</a>
<a href="#L2023" id="L2023">2023</a>
<a href="#L2024" id="L2024">2024</a>
<a href="#L2025" id="L2025">2025</a>
<a href="#L2026" id="L2026">2026</a>
<a href="#L2027" id="L2027">2027</a>
<a href="#L2028" id="L2028">2028</a>
<a href="#L2029" id="L2029">2029</a>
<a href="#L2030" id="L2030">2030</a>
<a href="#L2031" id="L2031">2031</a>
<a href="#L2032" id="L2032">2032</a>
<a href="#L2033" id="L2033">2033</a>
<a href="#L2034" id="L2034">2034</a>
<a href="#L2035" id="L2035">2035</a>
<a href="#L2036" id="L2036">2036</a>
<a href="#L2037" id="L2037">2037</a>
<a href="#L2038" id="L2038">2038</a>
<a href="#L2039" id="L2039">2039</a>
<a href="#L2040" id="L2040">2040</a>
<a href="#L2041" id="L2041">2041</a>
<a href="#L2042" id="L2042">2042</a>
<a href="#L2043" id="L2043">2043</a>
<a href="#L2044" id="L2044">2044</a>
<a href="#L2045" id="L2045">2045</a>
<a href="#L2046" id="L2046">2046</a>
<a href="#L2047" id="L2047">2047</a>
<a href="#L2048" id="L2048">2048</a>
<a href="#L2049" id="L2049">2049</a>
<a href="#L2050" id="L2050">2050</a>
<a href="#L2051" id="L2051">2051</a>
<a href="#L2052" id="L2052">2052</a>
<a href="#L2053" id="L2053">2053</a>
<a href="#L2054" id="L2054">2054</a>
<a href="#L2055" id="L2055">2055</a>
<a href="#L2056" id="L2056">2056</a>
<a href="#L2057" id="L2057">2057</a>
<a href="#L2058" id="L2058">2058</a>
<a href="#L2059" id="L2059">2059</a>
<a href="#L2060" id="L2060">2060</a>
<a href="#L2061" id="L2061">2061</a>
<a href="#L2062" id="L2062">2062</a>
<a href="#L2063" id="L2063">2063</a>
<a href="#L2064" id="L2064">2064</a>
<a href="#L2065" id="L2065">2065</a>
<a href="#L2066" id="L2066">2066</a>
<a href="#L2067" id="L2067">2067</a>
<a href="#L2068" id="L2068">2068</a>
<a href="#L2069" id="L2069">2069</a>
<a href="#L2070" id="L2070">2070</a>
<a href="#L2071" id="L2071">2071</a>
<a href="#L2072" id="L2072">2072</a>
<a href="#L2073" id="L2073">2073</a>
<a href="#L2074" id="L2074">2074</a>
<a href="#L2075" id="L2075">2075</a>
<a href="#L2076" id="L2076">2076</a>
<a href="#L2077" id="L2077">2077</a>
<a href="#L2078" id="L2078">2078</a>
<a href="#L2079" id="L2079">2079</a>
<a href="#L2080" id="L2080">2080</a>
<a href="#L2081" id="L2081">2081</a>
<a href="#L2082" id="L2082">2082</a>
<a href="#L2083" id="L2083">2083</a>
<a href="#L2084" id="L2084">2084</a>
<a href="#L2085" id="L2085">2085</a>
<a href="#L2086" id="L2086">2086</a>
<a href="#L2087" id="L2087">2087</a>
<a href="#L2088" id="L2088">2088</a>
<a href="#L2089" id="L2089">2089</a>
<a href="#L2090" id="L2090">2090</a>
<a href="#L2091" id="L2091">2091</a>
<a href="#L2092" id="L2092">2092</a>
<a href="#L2093" id="L2093">2093</a>
<a href="#L2094" id="L2094">2094</a>
<a href="#L2095" id="L2095">2095</a>
<a href="#L2096" id="L2096">2096</a>
<a href="#L2097" id="L2097">2097</a>
<a href="#L2098" id="L2098">2098</a>
<a href="#L2099" id="L2099">2099</a>
<a href="#L2100" id="L2100">2100</a>
<a href="#L2101" id="L2101">2101</a>
<a href="#L2102" id="L2102">2102</a>
<a href="#L2103" id="L2103">2103</a>
<a href="#L2104" id="L2104">2104</a>
<a href="#L2105" id="L2105">2105</a>
<a href="#L2106" id="L2106">2106</a>
<a href="#L2107" id="L2107">2107</a>
<a href="#L2108" id="L2108">2108</a>
<a href="#L2109" id="L2109">2109</a>
<a href="#L2110" id="L2110">2110</a>
<a href="#L2111" id="L2111">2111</a>
<a href="#L2112" id="L2112">2112</a>
<a href="#L2113" id="L2113">2113</a>
<a href="#L2114" id="L2114">2114</a>
<a href="#L2115" id="L2115">2115</a>
<a href="#L2116" id="L2116">2116</a>
<a href="#L2117" id="L2117">2117</a>
<a href="#L2118" id="L2118">2118</a>
<a href="#L2119" id="L2119">2119</a>
<a href="#L2120" id="L2120">2120</a>
<a href="#L2121" id="L2121">2121</a>
<a href="#L2122" id="L2122">2122</a>
<a href="#L2123" id="L2123">2123</a>
<a href="#L2124" id="L2124">2124</a>
<a href="#L2125" id="L2125">2125</a>
<a href="#L2126" id="L2126">2126</a>
<a href="#L2127" id="L2127">2127</a>
<a href="#L2128" id="L2128">2128</a>
<a href="#L2129" id="L2129">2129</a>
<a href="#L2130" id="L2130">2130</a>
<a href="#L2131" id="L2131">2131</a>
<a href="#L2132" id="L2132">2132</a>
<a href="#L2133" id="L2133">2133</a>
<a href="#L2134" id="L2134">2134</a>
<a href="#L2135" id="L2135">2135</a>
<a href="#L2136" id="L2136">2136</a>
<a href="#L2137" id="L2137">2137</a>
<a href="#L2138" id="L2138">2138</a>
<a href="#L2139" id="L2139">2139</a>
<a href="#L2140" id="L2140">2140</a>
<a href="#L2141" id="L2141">2141</a>
<a href="#L2142" id="L2142">2142</a>
<a href="#L2143" id="L2143">2143</a>
<a href="#L2144" id="L2144">2144</a>
<a href="#L2145" id="L2145">2145</a>
<a href="#L2146" id="L2146">2146</a>
<a href="#L2147" id="L2147">2147</a>
<a href="#L2148" id="L2148">2148</a>
<a href="#L2149" id="L2149">2149</a>
<a href="#L2150" id="L2150">2150</a>
<a href="#L2151" id="L2151">2151</a>
<a href="#L2152" id="L2152">2152</a>
<a href="#L2153" id="L2153">2153</a>
<a href="#L2154" id="L2154">2154</a>
<a href="#L2155" id="L2155">2155</a>
<a href="#L2156" id="L2156">2156</a>
<a href="#L2157" id="L2157">2157</a>
<a href="#L2158" id="L2158">2158</a>
<a href="#L2159" id="L2159">2159</a>
<a href="#L2160" id="L2160">2160</a>
<a href="#L2161" id="L2161">2161</a>
<a href="#L2162" id="L2162">2162</a>
<a href="#L2163" id="L2163">2163</a>
<a href="#L2164" id="L2164">2164</a>
<a href="#L2165" id="L2165">2165</a>
<a href="#L2166" id="L2166">2166</a>
<a href="#L2167" id="L2167">2167</a>
<a href="#L2168" id="L2168">2168</a>
<a href="#L2169" id="L2169">2169</a>
<a href="#L2170" id="L2170">2170</a>
<a href="#L2171" id="L2171">2171</a>
<a href="#L2172" id="L2172">2172</a>
<a href="#L2173" id="L2173">2173</a>
<a href="#L2174" id="L2174">2174</a>
<a href="#L2175" id="L2175">2175</a>
<a href="#L2176" id="L2176">2176</a>
<a href="#L2177" id="L2177">2177</a>
<a href="#L2178" id="L2178">2178</a>
<a href="#L2179" id="L2179">2179</a>
<a href="#L2180" id="L2180">2180</a>
<a href="#L2181" id="L2181">2181</a>
<a href="#L2182" id="L2182">2182</a>
<a href="#L2183" id="L2183">2183</a>
<a href="#L2184" id="L2184">2184</a>
<a href="#L2185" id="L2185">2185</a>
<a href="#L2186" id="L2186">2186</a>
<a href="#L2187" id="L2187">2187</a>
<a href="#L2188" id="L2188">2188</a>
<a href="#L2189" id="L2189">2189</a>
<a href="#L2190" id="L2190">2190</a>
<a href="#L2191" id="L2191">2191</a>
<a href="#L2192" id="L2192">2192</a>
<a href="#L2193" id="L2193">2193</a>
<a href="#L2194" id="L2194">2194</a>
<a href="#L2195" id="L2195">2195</a>
<a href="#L2196" id="L2196">2196</a>
<a href="#L2197" id="L2197">2197</a>
<a href="#L2198" id="L2198">2198</a>
<a href="#L2199" id="L2199">2199</a>
<a href="#L2200" id="L2200">2200</a>
<a href="#L2201" id="L2201">2201</a>
<a href="#L2202" id="L2202">2202</a>
<a href="#L2203" id="L2203">2203</a>
<a href="#L2204" id="L2204">2204</a>
<a href="#L2205" id="L2205">2205</a>
<a href="#L2206" id="L2206">2206</a>
<a href="#L2207" id="L2207">2207</a>
<a href="#L2208" id="L2208">2208</a>
<a href="#L2209" id="L2209">2209</a>
<a href="#L2210" id="L2210">2210</a>
<a href="#L2211" id="L2211">2211</a>
<a href="#L2212" id="L2212">2212</a>
<a href="#L2213" id="L2213">2213</a>
<a href="#L2214" id="L2214">2214</a>
<a href="#L2215" id="L2215">2215</a>
<a href="#L2216" id="L2216">2216</a>
<a href="#L2217" id="L2217">2217</a>
<a href="#L2218" id="L2218">2218</a>
<a href="#L2219" id="L2219">2219</a>
<a href="#L2220" id="L2220">2220</a>
<a href="#L2221" id="L2221">2221</a>
<a href="#L2222" id="L2222">2222</a>
<a href="#L2223" id="L2223">2223</a>
<a href="#L2224" id="L2224">2224</a>
<a href="#L2225" id="L2225">2225</a>
<a href="#L2226" id="L2226">2226</a>
<a href="#L2227" id="L2227">2227</a>
<a href="#L2228" id="L2228">2228</a>
<a href="#L2229" id="L2229">2229</a>
<a href="#L2230" id="L2230">2230</a>
<a href="#L2231" id="L2231">2231</a>
<a href="#L2232" id="L2232">2232</a>
<a href="#L2233" id="L2233">2233</a>
<a href="#L2234" id="L2234">2234</a>
<a href="#L2235" id="L2235">2235</a>
<a href="#L2236" id="L2236">2236</a>
<a href="#L2237" id="L2237">2237</a>
<a href="#L2238" id="L2238">2238</a>
<a href="#L2239" id="L2239">2239</a>
<a href="#L2240" id="L2240">2240</a>
<a href="#L2241" id="L2241">2241</a>
<a href="#L2242" id="L2242">2242</a>
<a href="#L2243" id="L2243">2243</a>
<a href="#L2244" id="L2244">2244</a>
<a href="#L2245" id="L2245">2245</a>
<a href="#L2246" id="L2246">2246</a>
<a href="#L2247" id="L2247">2247</a>
<a href="#L2248" id="L2248">2248</a>
<a href="#L2249" id="L2249">2249</a>
<a href="#L2250" id="L2250">2250</a>
<a href="#L2251" id="L2251">2251</a>
<a href="#L2252" id="L2252">2252</a>
<a href="#L2253" id="L2253">2253</a>
<a href="#L2254" id="L2254">2254</a>
<a href="#L2255" id="L2255">2255</a>
<a href="#L2256" id="L2256">2256</a>
<a href="#L2257" id="L2257">2257</a>
<a href="#L2258" id="L2258">2258</a>
<a href="#L2259" id="L2259">2259</a>
<a href="#L2260" id="L2260">2260</a>
<a href="#L2261" id="L2261">2261</a>
<a href="#L2262" id="L2262">2262</a>
<a href="#L2263" id="L2263">2263</a>
<a href="#L2264" id="L2264">2264</a>
<a href="#L2265" id="L2265">2265</a>
<a href="#L2266" id="L2266">2266</a>
<a href="#L2267" id="L2267">2267</a>
<a href="#L2268" id="L2268">2268</a>
<a href="#L2269" id="L2269">2269</a>
<a href="#L2270" id="L2270">2270</a>
<a href="#L2271" id="L2271">2271</a>
<a href="#L2272" id="L2272">2272</a>
<a href="#L2273" id="L2273">2273</a>
<a href="#L2274" id="L2274">2274</a>
<a href="#L2275" id="L2275">2275</a>
<a href="#L2276" id="L2276">2276</a>
<a href="#L2277" id="L2277">2277</a>
<a href="#L2278" id="L2278">2278</a>
<a href="#L2279" id="L2279">2279</a>
<a href="#L2280" id="L2280">2280</a>
<a href="#L2281" id="L2281">2281</a>
<a href="#L2282" id="L2282">2282</a>
<a href="#L2283" id="L2283">2283</a>
<a href="#L2284" id="L2284">2284</a>
<a href="#L2285" id="L2285">2285</a>
<a href="#L2286" id="L2286">2286</a>
<a href="#L2287" id="L2287">2287</a>
<a href="#L2288" id="L2288">2288</a>
<a href="#L2289" id="L2289">2289</a>
<a href="#L2290" id="L2290">2290</a>
<a href="#L2291" id="L2291">2291</a>
<a href="#L2292" id="L2292">2292</a>
<a href="#L2293" id="L2293">2293</a>
<a href="#L2294" id="L2294">2294</a>
<a href="#L2295" id="L2295">2295</a>
<a href="#L2296" id="L2296">2296</a>
<a href="#L2297" id="L2297">2297</a>
<a href="#L2298" id="L2298">2298</a>
<a href="#L2299" id="L2299">2299</a>
<a href="#L2300" id="L2300">2300</a>
<a href="#L2301" id="L2301">2301</a>
<a href="#L2302" id="L2302">2302</a>
<a href="#L2303" id="L2303">2303</a>
<a href="#L2304" id="L2304">2304</a>
<a href="#L2305" id="L2305">2305</a>
<a href="#L2306" id="L2306">2306</a>
<a href="#L2307" id="L2307">2307</a>
<a href="#L2308" id="L2308">2308</a>
<a href="#L2309" id="L2309">2309</a>
<a href="#L2310" id="L2310">2310</a>
<a href="#L2311" id="L2311">2311</a>
<a href="#L2312" id="L2312">2312</a>
<a href="#L2313" id="L2313">2313</a>
<a href="#L2314" id="L2314">2314</a>
<a href="#L2315" id="L2315">2315</a>
<a href="#L2316" id="L2316">2316</a>
<a href="#L2317" id="L2317">2317</a>
<a href="#L2318" id="L2318">2318</a>
<a href="#L2319" id="L2319">2319</a>
<a href="#L2320" id="L2320">2320</a>
<a href="#L2321" id="L2321">2321</a>
<a href="#L2322" id="L2322">2322</a>
<a href="#L2323" id="L2323">2323</a>
<a href="#L2324" id="L2324">2324</a>
<a href="#L2325" id="L2325">2325</a>
<a href="#L2326" id="L2326">2326</a>
<a href="#L2327" id="L2327">2327</a>
<a href="#L2328" id="L2328">2328</a>
<a href="#L2329" id="L2329">2329</a>
<a href="#L2330" id="L2330">2330</a>
<a href="#L2331" id="L2331">2331</a>
<a href="#L2332" id="L2332">2332</a>
<a href="#L2333" id="L2333">2333</a>
<a href="#L2334" id="L2334">2334</a>
<a href="#L2335" id="L2335">2335</a>
<a href="#L2336" id="L2336">2336</a>
<a href="#L2337" id="L2337">2337</a>
<a href="#L2338" id="L2338">2338</a>
<a href="#L2339" id="L2339">2339</a>
<a href="#L2340" id="L2340">2340</a>
<a href="#L2341" id="L2341">2341</a>
<a href="#L2342" id="L2342">2342</a>
<a href="#L2343" id="L2343">2343</a>
<a href="#L2344" id="L2344">2344</a>
<a href="#L2345" id="L2345">2345</a>
<a href="#L2346" id="L2346">2346</a>
<a href="#L2347" id="L2347">2347</a>
<a href="#L2348" id="L2348">2348</a>
<a href="#L2349" id="L2349">2349</a>
<a href="#L2350" id="L2350">2350</a>
<a href="#L2351" id="L2351">2351</a>
<a href="#L2352" id="L2352">2352</a>
<a href="#L2353" id="L2353">2353</a>
<a href="#L2354" id="L2354">2354</a>
<a href="#L2355" id="L2355">2355</a>
<a href="#L2356" id="L2356">2356</a>
<a href="#L2357" id="L2357">2357</a>
<a href="#L2358" id="L2358">2358</a>
<a href="#L2359" id="L2359">2359</a>
<a href="#L2360" id="L2360">2360</a>
<a href="#L2361" id="L2361">2361</a>
<a href="#L2362" id="L2362">2362</a>
<a href="#L2363" id="L2363">2363</a>
<a href="#L2364" id="L2364">2364</a>
<a href="#L2365" id="L2365">2365</a>
<a href="#L2366" id="L2366">2366</a>
<a href="#L2367" id="L2367">2367</a>
<a href="#L2368" id="L2368">2368</a>
<a href="#L2369" id="L2369">2369</a>
<a href="#L2370" id="L2370">2370</a>
<a href="#L2371" id="L2371">2371</a>
<a href="#L2372" id="L2372">2372</a>
<a href="#L2373" id="L2373">2373</a>
<a href="#L2374" id="L2374">2374</a>
<a href="#L2375" id="L2375">2375</a>
<a href="#L2376" id="L2376">2376</a>
<a href="#L2377" id="L2377">2377</a>
<a href="#L2378" id="L2378">2378</a>
<a href="#L2379" id="L2379">2379</a>
<a href="#L2380" id="L2380">2380</a>
<a href="#L2381" id="L2381">2381</a>
<a href="#L2382" id="L2382">2382</a>
<a href="#L2383" id="L2383">2383</a>
<a href="#L2384" id="L2384">2384</a>
<a href="#L2385" id="L2385">2385</a>
<a href="#L2386" id="L2386">2386</a>
<a href="#L2387" id="L2387">2387</a>
<a href="#L2388" id="L2388">2388</a>
<a href="#L2389" id="L2389">2389</a>
<a href="#L2390" id="L2390">2390</a>
<a href="#L2391" id="L2391">2391</a>
<a href="#L2392" id="L2392">2392</a>
<a href="#L2393" id="L2393">2393</a>
<a href="#L2394" id="L2394">2394</a>
<a href="#L2395" id="L2395">2395</a>
<a href="#L2396" id="L2396">2396</a>
<a href="#L2397" id="L2397">2397</a>
<a href="#L2398" id="L2398">2398</a>
<a href="#L2399" id="L2399">2399</a>
<a href="#L2400" id="L2400">2400</a>
<a href="#L2401" id="L2401">2401</a>
<a href="#L2402" id="L2402">2402</a>
<a href="#L2403" id="L2403">2403</a>
<a href="#L2404" id="L2404">2404</a>
<a href="#L2405" id="L2405">2405</a>
<a href="#L2406" id="L2406">2406</a>
<a href="#L2407" id="L2407">2407</a>
<a href="#L2408" id="L2408">2408</a>
<a href="#L2409" id="L2409">2409</a>
<a href="#L2410" id="L2410">2410</a>
<a href="#L2411" id="L2411">2411</a>
<a href="#L2412" id="L2412">2412</a>
<a href="#L2413" id="L2413">2413</a>
<a href="#L2414" id="L2414">2414</a>
<a href="#L2415" id="L2415">2415</a>
<a href="#L2416" id="L2416">2416</a>
<a href="#L2417" id="L2417">2417</a>
<a href="#L2418" id="L2418">2418</a>
<a href="#L2419" id="L2419">2419</a>
<a href="#L2420" id="L2420">2420</a>
<a href="#L2421" id="L2421">2421</a>
<a href="#L2422" id="L2422">2422</a>
<a href="#L2423" id="L2423">2423</a>
<a href="#L2424" id="L2424">2424</a>
<a href="#L2425" id="L2425">2425</a>
<a href="#L2426" id="L2426">2426</a>
<a href="#L2427" id="L2427">2427</a>
<a href="#L2428" id="L2428">2428</a>
<a href="#L2429" id="L2429">2429</a>
<a href="#L2430" id="L2430">2430</a>
<a href="#L2431" id="L2431">2431</a>
<a href="#L2432" id="L2432">2432</a>
<a href="#L2433" id="L2433">2433</a>
<a href="#L2434" id="L2434">2434</a>
<a href="#L2435" id="L2435">2435</a>
<a href="#L2436" id="L2436">2436</a>
<a href="#L2437" id="L2437">2437</a>
<a href="#L2438" id="L2438">2438</a>
<a href="#L2439" id="L2439">2439</a>
<a href="#L2440" id="L2440">2440</a>
<a href="#L2441" id="L2441">2441</a>
<a href="#L2442" id="L2442">2442</a>
<a href="#L2443" id="L2443">2443</a>
<a href="#L2444" id="L2444">2444</a>
<a href="#L2445" id="L2445">2445</a>
<a href="#L2446" id="L2446">2446</a>
<a href="#L2447" id="L2447">2447</a>
<a href="#L2448" id="L2448">2448</a>
<a href="#L2449" id="L2449">2449</a>
<a href="#L2450" id="L2450">2450</a>
<a href="#L2451" id="L2451">2451</a>
<a href="#L2452" id="L2452">2452</a>
<a href="#L2453" id="L2453">2453</a>
<a href="#L2454" id="L2454">2454</a>
<a href="#L2455" id="L2455">2455</a>
<a href="#L2456" id="L2456">2456</a>
<a href="#L2457" id="L2457">2457</a>
<a href="#L2458" id="L2458">2458</a>
<a href="#L2459" id="L2459">2459</a>
<a href="#L2460" id="L2460">2460</a>
<a href="#L2461" id="L2461">2461</a>
<a href="#L2462" id="L2462">2462</a>
<a href="#L2463" id="L2463">2463</a>
<a href="#L2464" id="L2464">2464</a>
<a href="#L2465" id="L2465">2465</a>
<a href="#L2466" id="L2466">2466</a>
<a href="#L2467" id="L2467">2467</a>
<a href="#L2468" id="L2468">2468</a>
<a href="#L2469" id="L2469">2469</a>
<a href="#L2470" id="L2470">2470</a>
<a href="#L2471" id="L2471">2471</a>
<a href="#L2472" id="L2472">2472</a>
<a href="#L2473" id="L2473">2473</a>
<a href="#L2474" id="L2474">2474</a>
<a href="#L2475" id="L2475">2475</a>
<a href="#L2476" id="L2476">2476</a>
<a href="#L2477" id="L2477">2477</a>
<a href="#L2478" id="L2478">2478</a>
<a href="#L2479" id="L2479">2479</a>
<a href="#L2480" id="L2480">2480</a>
<a href="#L2481" id="L2481">2481</a>
<a href="#L2482" id="L2482">2482</a>
<a href="#L2483" id="L2483">2483</a>
<a href="#L2484" id="L2484">2484</a>
<a href="#L2485" id="L2485">2485</a>
<a href="#L2486" id="L2486">2486</a>
<a href="#L2487" id="L2487">2487</a>
<a href="#L2488" id="L2488">2488</a>
<a href="#L2489" id="L2489">2489</a>
<a href="#L2490" id="L2490">2490</a>
<a href="#L2491" id="L2491">2491</a>
<a href="#L2492" id="L2492">2492</a>
<a href="#L2493" id="L2493">2493</a>
<a href="#L2494" id="L2494">2494</a>
<a href="#L2495" id="L2495">2495</a>
<a href="#L2496" id="L2496">2496</a>
<a href="#L2497" id="L2497">2497</a>
<a href="#L2498" id="L2498">2498</a>
<a href="#L2499" id="L2499">2499</a>
<a href="#L2500" id="L2500">2500</a>
<a href="#L2501" id="L2501">2501</a>
<a href="#L2502" id="L2502">2502</a>
<a href="#L2503" id="L2503">2503</a>
<a href="#L2504" id="L2504">2504</a>
<a href="#L2505" id="L2505">2505</a>
<a href="#L2506" id="L2506">2506</a>
<a href="#L2507" id="L2507">2507</a>
<a href="#L2508" id="L2508">2508</a>
<a href="#L2509" id="L2509">2509</a>
<a href="#L2510" id="L2510">2510</a>
<a href="#L2511" id="L2511">2511</a>
<a href="#L2512" id="L2512">2512</a>
<a href="#L2513" id="L2513">2513</a>
<a href="#L2514" id="L2514">2514</a>
<a href="#L2515" id="L2515">2515</a>
<a href="#L2516" id="L2516">2516</a>
<a href="#L2517" id="L2517">2517</a>
<a href="#L2518" id="L2518">2518</a>
<a href="#L2519" id="L2519">2519</a>
<a href="#L2520" id="L2520">2520</a>
<a href="#L2521" id="L2521">2521</a>
<a href="#L2522" id="L2522">2522</a>
<a href="#L2523" id="L2523">2523</a>
<a href="#L2524" id="L2524">2524</a>
<a href="#L2525" id="L2525">2525</a>
<a href="#L2526" id="L2526">2526</a>
<a href="#L2527" id="L2527">2527</a>
<a href="#L2528" id="L2528">2528</a>
<a href="#L2529" id="L2529">2529</a>
<a href="#L2530" id="L2530">2530</a>
<a href="#L2531" id="L2531">2531</a>
<a href="#L2532" id="L2532">2532</a>
<a href="#L2533" id="L2533">2533</a>
<a href="#L2534" id="L2534">2534</a>
<a href="#L2535" id="L2535">2535</a>
<a href="#L2536" id="L2536">2536</a>
<a href="#L2537" id="L2537">2537</a>
<a href="#L2538" id="L2538">2538</a>
<a href="#L2539" id="L2539">2539</a>
<a href="#L2540" id="L2540">2540</a>
<a href="#L2541" id="L2541">2541</a>
<a href="#L2542" id="L2542">2542</a>
<a href="#L2543" id="L2543">2543</a>
<a href="#L2544" id="L2544">2544</a>
<a href="#L2545" id="L2545">2545</a>
<a href="#L2546" id="L2546">2546</a>
<a href="#L2547" id="L2547">2547</a>
<a href="#L2548" id="L2548">2548</a>
<a href="#L2549" id="L2549">2549</a>
<a href="#L2550" id="L2550">2550</a>
<a href="#L2551" id="L2551">2551</a>
<a href="#L2552" id="L2552">2552</a>
<a href="#L2553" id="L2553">2553</a>
<a href="#L2554" id="L2554">2554</a>
<a href="#L2555" id="L2555">2555</a>
<a href="#L2556" id="L2556">2556</a>
<a href="#L2557" id="L2557">2557</a>
<a href="#L2558" id="L2558">2558</a>
<a href="#L2559" id="L2559">2559</a>
<a href="#L2560" id="L2560">2560</a>
<a href="#L2561" id="L2561">2561</a>
<a href="#L2562" id="L2562">2562</a>
<a href="#L2563" id="L2563">2563</a>
<a href="#L2564" id="L2564">2564</a>
<a href="#L2565" id="L2565">2565</a>
<a href="#L2566" id="L2566">2566</a>
<a href="#L2567" id="L2567">2567</a>
<a href="#L2568" id="L2568">2568</a>
<a href="#L2569" id="L2569">2569</a>
<a href="#L2570" id="L2570">2570</a>
<a href="#L2571" id="L2571">2571</a>
<a href="#L2572" id="L2572">2572</a>
<a href="#L2573" id="L2573">2573</a>
<a href="#L2574" id="L2574">2574</a>
<a href="#L2575" id="L2575">2575</a>
<a href="#L2576" id="L2576">2576</a>
<a href="#L2577" id="L2577">2577</a>
<a href="#L2578" id="L2578">2578</a>
<a href="#L2579" id="L2579">2579</a>
<a href="#L2580" id="L2580">2580</a>
<a href="#L2581" id="L2581">2581</a>
<a href="#L2582" id="L2582">2582</a>
<a href="#L2583" id="L2583">2583</a>
<a href="#L2584" id="L2584">2584</a>
<a href="#L2585" id="L2585">2585</a>
<a href="#L2586" id="L2586">2586</a>
<a href="#L2587" id="L2587">2587</a>
<a href="#L2588" id="L2588">2588</a>
<a href="#L2589" id="L2589">2589</a>
<a href="#L2590" id="L2590">2590</a>
<a href="#L2591" id="L2591">2591</a>
<a href="#L2592" id="L2592">2592</a>
<a href="#L2593" id="L2593">2593</a>
<a href="#L2594" id="L2594">2594</a>
<a href="#L2595" id="L2595">2595</a>
<a href="#L2596" id="L2596">2596</a>
<a href="#L2597" id="L2597">2597</a>
<a href="#L2598" id="L2598">2598</a>
<a href="#L2599" id="L2599">2599</a>
<a href="#L2600" id="L2600">2600</a>
<a href="#L2601" id="L2601">2601</a>
<a href="#L2602" id="L2602">2602</a>
<a href="#L2603" id="L2603">2603</a>
<a href="#L2604" id="L2604">2604</a>
<a href="#L2605" id="L2605">2605</a>
<a href="#L2606" id="L2606">2606</a>
<a href="#L2607" id="L2607">2607</a>
<a href="#L2608" id="L2608">2608</a>
<a href="#L2609" id="L2609">2609</a>
<a href="#L2610" id="L2610">2610</a>
<a href="#L2611" id="L2611">2611</a>
<a href="#L2612" id="L2612">2612</a>
<a href="#L2613" id="L2613">2613</a>
<a href="#L2614" id="L2614">2614</a>
<a href="#L2615" id="L2615">2615</a>
<a href="#L2616" id="L2616">2616</a>
<a href="#L2617" id="L2617">2617</a>
<a href="#L2618" id="L2618">2618</a>
<a href="#L2619" id="L2619">2619</a>
<a href="#L2620" id="L2620">2620</a>
<a href="#L2621" id="L2621">2621</a>
<a href="#L2622" id="L2622">2622</a>
<a href="#L2623" id="L2623">2623</a>
<a href="#L2624" id="L2624">2624</a>
<a href="#L2625" id="L2625">2625</a>
<a href="#L2626" id="L2626">2626</a>
<a href="#L2627" id="L2627">2627</a>
<a href="#L2628" id="L2628">2628</a>
<a href="#L2629" id="L2629">2629</a>
<a href="#L2630" id="L2630">2630</a>
<a href="#L2631" id="L2631">2631</a>
<a href="#L2632" id="L2632">2632</a>
<a href="#L2633" id="L2633">2633</a>
<a href="#L2634" id="L2634">2634</a>
<a href="#L2635" id="L2635">2635</a>
<a href="#L2636" id="L2636">2636</a>
<a href="#L2637" id="L2637">2637</a>
<a href="#L2638" id="L2638">2638</a>
<a href="#L2639" id="L2639">2639</a>
<a href="#L2640" id="L2640">2640</a>
<a href="#L2641" id="L2641">2641</a>
<a href="#L2642" id="L2642">2642</a>
<a href="#L2643" id="L2643">2643</a>
<a href="#L2644" id="L2644">2644</a>
<a href="#L2645" id="L2645">2645</a>
<a href="#L2646" id="L2646">2646</a>
<a href="#L2647" id="L2647">2647</a>
<a href="#L2648" id="L2648">2648</a>
<a href="#L2649" id="L2649">2649</a>
<a href="#L2650" id="L2650">2650</a>
<a href="#L2651" id="L2651">2651</a>
<a href="#L2652" id="L2652">2652</a>
<a href="#L2653" id="L2653">2653</a>
<a href="#L2654" id="L2654">2654</a>
<a href="#L2655" id="L2655">2655</a>
<a href="#L2656" id="L2656">2656</a>
<a href="#L2657" id="L2657">2657</a>
<a href="#L2658" id="L2658">2658</a>
<a href="#L2659" id="L2659">2659</a>
<a href="#L2660" id="L2660">2660</a>
<a href="#L2661" id="L2661">2661</a>
<a href="#L2662" id="L2662">2662</a>
<a href="#L2663" id="L2663">2663</a>
<a href="#L2664" id="L2664">2664</a>
<a href="#L2665" id="L2665">2665</a>
<a href="#L2666" id="L2666">2666</a>
<a href="#L2667" id="L2667">2667</a>
<a href="#L2668" id="L2668">2668</a>
<a href="#L2669" id="L2669">2669</a>
<a href="#L2670" id="L2670">2670</a>
<a href="#L2671" id="L2671">2671</a>
<a href="#L2672" id="L2672">2672</a>
<a href="#L2673" id="L2673">2673</a>
<a href="#L2674" id="L2674">2674</a>
<a href="#L2675" id="L2675">2675</a>
<a href="#L2676" id="L2676">2676</a>
<a href="#L2677" id="L2677">2677</a>
<a href="#L2678" id="L2678">2678</a>
<a href="#L2679" id="L2679">2679</a>
<a href="#L2680" id="L2680">2680</a>
<a href="#L2681" id="L2681">2681</a>
<a href="#L2682" id="L2682">2682</a>
<a href="#L2683" id="L2683">2683</a>
<a href="#L2684" id="L2684">2684</a>
<a href="#L2685" id="L2685">2685</a>
<a href="#L2686" id="L2686">2686</a>
<a href="#L2687" id="L2687">2687</a>
<a href="#L2688" id="L2688">2688</a>
<a href="#L2689" id="L2689">2689</a>
<a href="#L2690" id="L2690">2690</a>
<a href="#L2691" id="L2691">2691</a>
<a href="#L2692" id="L2692">2692</a>
<a href="#L2693" id="L2693">2693</a>
<a href="#L2694" id="L2694">2694</a>
<a href="#L2695" id="L2695">2695</a>
<a href="#L2696" id="L2696">2696</a>
<a href="#L2697" id="L2697">2697</a>
<a href="#L2698" id="L2698">2698</a>
<a href="#L2699" id="L2699">2699</a>
<a href="#L2700" id="L2700">2700</a>
<a href="#L2701" id="L2701">2701</a>
<a href="#L2702" id="L2702">2702</a>
<a href="#L2703" id="L2703">2703</a>
<a href="#L2704" id="L2704">2704</a>
<a href="#L2705" id="L2705">2705</a>
<a href="#L2706" id="L2706">2706</a>
<a href="#L2707" id="L2707">2707</a>
<a href="#L2708" id="L2708">2708</a>
<a href="#L2709" id="L2709">2709</a>
<a href="#L2710" id="L2710">2710</a>
<a href="#L2711" id="L2711">2711</a>
<a href="#L2712" id="L2712">2712</a>
<a href="#L2713" id="L2713">2713</a>
<a href="#L2714" id="L2714">2714</a>
<a href="#L2715" id="L2715">2715</a>
<a href="#L2716" id="L2716">2716</a>
<a href="#L2717" id="L2717">2717</a>
<a href="#L2718" id="L2718">2718</a>
<a href="#L2719" id="L2719">2719</a>
<a href="#L2720" id="L2720">2720</a>
<a href="#L2721" id="L2721">2721</a>
<a href="#L2722" id="L2722">2722</a>
<a href="#L2723" id="L2723">2723</a>
<a href="#L2724" id="L2724">2724</a>
<a href="#L2725" id="L2725">2725</a>
<a href="#L2726" id="L2726">2726</a>
<a href="#L2727" id="L2727">2727</a>
<a href="#L2728" id="L2728">2728</a>
<a href="#L2729" id="L2729">2729</a>
<a href="#L2730" id="L2730">2730</a>
<a href="#L2731" id="L2731">2731</a>
<a href="#L2732" id="L2732">2732</a>
<a href="#L2733" id="L2733">2733</a>
<a href="#L2734" id="L2734">2734</a>
<a href="#L2735" id="L2735">2735</a>
<a href="#L2736" id="L2736">2736</a>
<a href="#L2737" id="L2737">2737</a>
<a href="#L2738" id="L2738">2738</a>
<a href="#L2739" id="L2739">2739</a>
<a href="#L2740" id="L2740">2740</a>
<a href="#L2741" id="L2741">2741</a>
<a href="#L2742" id="L2742">2742</a>
<a href="#L2743" id="L2743">2743</a>
<a href="#L2744" id="L2744">2744</a>
<a href="#L2745" id="L2745">2745</a>
<a href="#L2746" id="L2746">2746</a>
<a href="#L2747" id="L2747">2747</a>
<a href="#L2748" id="L2748">2748</a>
<a href="#L2749" id="L2749">2749</a>
<a href="#L2750" id="L2750">2750</a>
<a href="#L2751" id="L2751">2751</a>
<a href="#L2752" id="L2752">2752</a>
<a href="#L2753" id="L2753">2753</a>
<a href="#L2754" id="L2754">2754</a>
<a href="#L2755" id="L2755">2755</a>
<a href="#L2756" id="L2756">2756</a>
<a href="#L2757" id="L2757">2757</a>
<a href="#L2758" id="L2758">2758</a>
<a href="#L2759" id="L2759">2759</a>
<a href="#L2760" id="L2760">2760</a>
<a href="#L2761" id="L2761">2761</a>
<a href="#L2762" id="L2762">2762</a>
<a href="#L2763" id="L2763">2763</a>
<a href="#L2764" id="L2764">2764</a>
<a href="#L2765" id="L2765">2765</a>
<a href="#L2766" id="L2766">2766</a>
<a href="#L2767" id="L2767">2767</a>
<a href="#L2768" id="L2768">2768</a>
<a href="#L2769" id="L2769">2769</a>
<a href="#L2770" id="L2770">2770</a>
<a href="#L2771" id="L2771">2771</a>
<a href="#L2772" id="L2772">2772</a>
<a href="#L2773" id="L2773">2773</a>
<a href="#L2774" id="L2774">2774</a>
<a href="#L2775" id="L2775">2775</a>
<a href="#L2776" id="L2776">2776</a>
<a href="#L2777" id="L2777">2777</a>
<a href="#L2778" id="L2778">2778</a>
<a href="#L2779" id="L2779">2779</a>
<a href="#L2780" id="L2780">2780</a>
<a href="#L2781" id="L2781">2781</a>
<a href="#L2782" id="L2782">2782</a>
<a href="#L2783" id="L2783">2783</a>
<a href="#L2784" id="L2784">2784</a>
<a href="#L2785" id="L2785">2785</a>
<a href="#L2786" id="L2786">2786</a>
<a href="#L2787" id="L2787">2787</a>
<a href="#L2788" id="L2788">2788</a>
<a href="#L2789" id="L2789">2789</a>
<a href="#L2790" id="L2790">2790</a>
<a href="#L2791" id="L2791">2791</a>
<a href="#L2792" id="L2792">2792</a>
<a href="#L2793" id="L2793">2793</a>
<a href="#L2794" id="L2794">2794</a>
<a href="#L2795" id="L2795">2795</a>
<a href="#L2796" id="L2796">2796</a>
<a href="#L2797" id="L2797">2797</a>
<a href="#L2798" id="L2798">2798</a>
<a href="#L2799" id="L2799">2799</a>
<a href="#L2800" id="L2800">2800</a>
<a href="#L2801" id="L2801">2801</a>
<a href="#L2802" id="L2802">2802</a>
<a href="#L2803" id="L2803">2803</a>
<a href="#L2804" id="L2804">2804</a>
<a href="#L2805" id="L2805">2805</a>
<a href="#L2806" id="L2806">2806</a>
<a href="#L2807" id="L2807">2807</a>
<a href="#L2808" id="L2808">2808</a>
<a href="#L2809" id="L2809">2809</a>
<a href="#L2810" id="L2810">2810</a>
<a href="#L2811" id="L2811">2811</a>
<a href="#L2812" id="L2812">2812</a>
<a href="#L2813" id="L2813">2813</a>
<a href="#L2814" id="L2814">2814</a>
<a href="#L2815" id="L2815">2815</a>
<a href="#L2816" id="L2816">2816</a>
<a href="#L2817" id="L2817">2817</a>
<a href="#L2818" id="L2818">2818</a>
<a href="#L2819" id="L2819">2819</a>
<a href="#L2820" id="L2820">2820</a>
<a href="#L2821" id="L2821">2821</a>
<a href="#L2822" id="L2822">2822</a>
<a href="#L2823" id="L2823">2823</a>
<a href="#L2824" id="L2824">2824</a>
<a href="#L2825" id="L2825">2825</a>
<a href="#L2826" id="L2826">2826</a>
<a href="#L2827" id="L2827">2827</a>
<a href="#L2828" id="L2828">2828</a>
<a href="#L2829" id="L2829">2829</a>
<a href="#L2830" id="L2830">2830</a>
<a href="#L2831" id="L2831">2831</a>
<a href="#L2832" id="L2832">2832</a>
<a href="#L2833" id="L2833">2833</a>
<a href="#L2834" id="L2834">2834</a>
<a href="#L2835" id="L2835">2835</a>
<a href="#L2836" id="L2836">2836</a>
<a href="#L2837" id="L2837">2837</a>
<a href="#L2838" id="L2838">2838</a>
<a href="#L2839" id="L2839">2839</a>
<a href="#L2840" id="L2840">2840</a>
<a href="#L2841" id="L2841">2841</a>
<a href="#L2842" id="L2842">2842</a>
<a href="#L2843" id="L2843">2843</a>
<a href="#L2844" id="L2844">2844</a>
<a href="#L2845" id="L2845">2845</a>
<a href="#L2846" id="L2846">2846</a>
<a href="#L2847" id="L2847">2847</a>
<a href="#L2848" id="L2848">2848</a>
<a href="#L2849" id="L2849">2849</a>
<a href="#L2850" id="L2850">2850</a>
<a href="#L2851" id="L2851">2851</a>
<a href="#L2852" id="L2852">2852</a>
<a href="#L2853" id="L2853">2853</a>
<a href="#L2854" id="L2854">2854</a>
<a href="#L2855" id="L2855">2855</a>
<a href="#L2856" id="L2856">2856</a>
<a href="#L2857" id="L2857">2857</a>
</pre></div>
<div class="highlight">
<div>
//&nbsp;MIT&nbsp;License
</div>
<div>
<br>
</div>
<div>
//&nbsp;Copyright&nbsp;(c)&nbsp;2017&nbsp;Vadim&nbsp;Grigoruk&nbsp;@nesbox&nbsp;//&nbsp;grigoruk@gmail.com
</div>
<div>
<br>
</div>
<div>
//&nbsp;Permission&nbsp;is&nbsp;hereby&nbsp;granted,&nbsp;free&nbsp;of&nbsp;charge,&nbsp;to&nbsp;any&nbsp;person&nbsp;obtaining&nbsp;a&nbsp;copy
</div>
<div>
//&nbsp;of&nbsp;this&nbsp;software&nbsp;and&nbsp;associated&nbsp;documentation&nbsp;files&nbsp;(the&nbsp;"Software"),&nbsp;to&nbsp;deal
</div>
<div>
//&nbsp;in&nbsp;the&nbsp;Software&nbsp;without&nbsp;restriction,&nbsp;including&nbsp;without&nbsp;limitation&nbsp;the&nbsp;rights
</div>
<div>
//&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;merge,&nbsp;publish,&nbsp;distribute,&nbsp;sublicense,&nbsp;and/or&nbsp;sell
</div>
<div>
//&nbsp;copies&nbsp;of&nbsp;the&nbsp;Software,&nbsp;and&nbsp;to&nbsp;permit&nbsp;persons&nbsp;to&nbsp;whom&nbsp;the&nbsp;Software&nbsp;is
</div>
<div>
//&nbsp;furnished&nbsp;to&nbsp;do&nbsp;so,&nbsp;subject&nbsp;to&nbsp;the&nbsp;following&nbsp;conditions:
</div>
<div>
<br>
</div>
<div>
//&nbsp;The&nbsp;above&nbsp;copyright&nbsp;notice&nbsp;and&nbsp;this&nbsp;permission&nbsp;notice&nbsp;shall&nbsp;be&nbsp;included&nbsp;in&nbsp;all
</div>
<div>
//&nbsp;copies&nbsp;or&nbsp;substantial&nbsp;portions&nbsp;of&nbsp;the&nbsp;Software.
</div>
<div>
<br>
</div>
<div>
//&nbsp;THE&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;"AS&nbsp;IS",&nbsp;WITHOUT&nbsp;WARRANTY&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;EXPRESS&nbsp;OR
</div>
<div>
//&nbsp;IMPLIED,&nbsp;INCLUDING&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO&nbsp;THE&nbsp;WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY,
</div>
<div>
//&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;AND&nbsp;NONINFRINGEMENT.&nbsp;IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;THE
</div>
<div>
//&nbsp;AUTHORS&nbsp;OR&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY&nbsp;CLAIM,&nbsp;DAMAGES&nbsp;OR&nbsp;OTHER
</div>
<div>
//&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;AN&nbsp;ACTION&nbsp;OF&nbsp;CONTRACT,&nbsp;TORT&nbsp;OR&nbsp;OTHERWISE,&nbsp;ARISING&nbsp;FROM,
</div>
<div>
//&nbsp;OUT&nbsp;OF&nbsp;OR&nbsp;IN&nbsp;CONNECTION&nbsp;WITH&nbsp;THE&nbsp;SOFTWARE&nbsp;OR&nbsp;THE&nbsp;USE&nbsp;OR&nbsp;OTHER&nbsp;DEALINGS&nbsp;IN&nbsp;THE
</div>
<div>
//&nbsp;SOFTWARE.
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"studio.h"
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"editors/code.h"
</div>
<div>
#include&nbsp;"editors/sprite.h"
</div>
<div>
#include&nbsp;"editors/map.h"
</div>
<div>
#include&nbsp;"editors/world.h"
</div>
<div>
#include&nbsp;"editors/sfx.h"
</div>
<div>
#include&nbsp;"editors/music.h"
</div>
<div>
#include&nbsp;"screens/console.h"
</div>
<div>
#include&nbsp;"screens/surf.h"
</div>
<div>
#include&nbsp;"ext/history.h"
</div>
<div>
#include&nbsp;"net.h"
</div>
<div>
#include&nbsp;"wave_writer.h"
</div>
<div>
#include&nbsp;"ext/gif.h"
</div>
<div>
#define&nbsp;MSF_GIF_IMPL
</div>
<div>
#include&nbsp;"msf_gif.h"
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"../fftdata.h"
</div>
<div>
#include&nbsp;"ext/fft.h"
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"ext/md5.h"
</div>
<div>
#include&nbsp;"config.h"
</div>
<div>
#include&nbsp;"cart.h"
</div>
<div>
#include&nbsp;"screens/start.h"
</div>
<div>
#include&nbsp;"screens/run.h"
</div>
<div>
#include&nbsp;"screens/menu.h"
</div>
<div>
#include&nbsp;"screens/mainmenu.h"
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"fs.h"
</div>
<div>
<br>
</div>
<div>
#include&nbsp;"argparse.h"
</div>
<div>
<br>
</div>
<div>
#include&nbsp;&lt;ctype.h&gt;
</div>
<div>
<br>
</div>
<div>
#define&nbsp;_USE_MATH_DEFINES
</div>
<div>
#include&nbsp;&lt;math.h&gt;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC_MODULE_EXT)
</div>
<div>
#include&nbsp;&lt;dlfcn.h&gt;
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#define&nbsp;MD5_HASHSIZE&nbsp;16
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC80_PRO)
</div>
<div>
#define&nbsp;TIC_EDITOR_BANKS&nbsp;(TIC_BANKS)
</div>
<div>
#else
</div>
<div>
#define&nbsp;TIC_EDITOR_BANKS&nbsp;1
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#ifdef&nbsp;BUILD_EDITORS
</div>
<div>
typedef&nbsp;struct
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;data[MD5_HASHSIZE];
</div>
<div>
}&nbsp;CartHash;
</div>
<div>
<br>
</div>
<div>
static&nbsp;const&nbsp;EditorMode&nbsp;Modes[]&nbsp;=
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_CODE_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_SPRITE_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_MAP_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_SFX_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_MUSIC_MODE,
</div>
<div>
};
</div>
<div>
<br>
</div>
<div>
static&nbsp;const&nbsp;EditorMode&nbsp;BankModes[]&nbsp;=
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_SPRITE_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_MAP_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_SFX_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;TIC_MUSIC_MODE,
</div>
<div>
};
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
typedef&nbsp;struct
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;down;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;click;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;start;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;ticks;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;click;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;dbl;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_point&nbsp;start;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_point&nbsp;end;
</div>
<div>
<br>
</div>
<div>
<br>
</div>
<div>
}&nbsp;MouseState;
</div>
<div>
<br>
</div>
<div>
struct&nbsp;Studio
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;alive;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;mode;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;prevMode;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;toolbarMode;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MouseState&nbsp;state[3];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;mouse;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;menuMode;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;ViMode&nbsp;viMode;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CartHash&nbsp;hash;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u64&nbsp;mdate;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}cart;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;show;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;chained;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;union
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s8&nbsp;sprites;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s8&nbsp;map;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s8&nbsp;sfx;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s8&nbsp;music;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;index;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s8&nbsp;indexes[COUNT_OF(BankModes)];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;bank;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;popup;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;pos;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Movie*&nbsp;movie;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Movie&nbsp;idle;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Movie&nbsp;show;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Movie&nbsp;wait;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Movie&nbsp;hide;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;anim;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;message[STUDIO_TEXT_BUFFER_WIDTH];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;popup;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;text[STUDIO_TEXT_BUFFER_WIDTH];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;tooltip;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;record;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;screenshot;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32*&nbsp;buffer;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;frame;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MsfGifState&nbsp;gif;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;video;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Code*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sprite*&nbsp;sprite[TIC_EDITOR_BANKS];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map*&nbsp;&nbsp;&nbsp;&nbsp;map[TIC_EDITOR_BANKS];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sfx*&nbsp;&nbsp;&nbsp;&nbsp;sfx[TIC_EDITOR_BANKS];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Music*&nbsp;&nbsp;music[TIC_EDITOR_BANKS];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;banks;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Console*&nbsp;&nbsp;&nbsp;&nbsp;console;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;World*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;world;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Surf*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;surf;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_net*&nbsp;net;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Bytebattle&nbsp;bytebattle;
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Start*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Run*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Menu*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menu;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Config*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;StudioMainMenu*&nbsp;mainmenu;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_fs*&nbsp;fs;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;samplerate;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_font&nbsp;systemFont;
</div>
<div>
<br>
</div>
<div>
};
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
static&nbsp;const&nbsp;char&nbsp;VideoGif[]&nbsp;=&nbsp;"video%i.gif";
</div>
<div>
static&nbsp;const&nbsp;char&nbsp;ScreenGif[]&nbsp;=&nbsp;"screen%i.gif";
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;emptyDone(void*&nbsp;data)&nbsp;{}
</div>
<div>
<br>
</div>
<div>
void&nbsp;fadePalette(tic_palette*&nbsp;pal,&nbsp;s32&nbsp;value)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(u8&nbsp;*i&nbsp;=&nbsp;pal-&gt;data,&nbsp;*end&nbsp;=&nbsp;i&nbsp;+&nbsp;sizeof(tic_palette);&nbsp;i&nbsp;&lt;&nbsp;end;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*i&nbsp;=&nbsp;*i&nbsp;*&nbsp;value&nbsp;&gt;&gt;&nbsp;8;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;map2ram(tic_ram*&nbsp;ram,&nbsp;const&nbsp;tic_map*&nbsp;src)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memcpy(ram-&gt;map.data,&nbsp;src,&nbsp;sizeof&nbsp;ram-&gt;map);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;tiles2ram(tic_ram*&nbsp;ram,&nbsp;const&nbsp;tic_tiles*&nbsp;src)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memcpy(ram-&gt;tiles.data,&nbsp;src,&nbsp;sizeof&nbsp;ram-&gt;tiles&nbsp;*&nbsp;TIC_SPRITE_BANKS);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;void&nbsp;sfx2ram(tic_ram*&nbsp;ram,&nbsp;const&nbsp;tic_sfx*&nbsp;src)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memcpy(&ram-&gt;sfx,&nbsp;src,&nbsp;sizeof&nbsp;ram-&gt;sfx);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;void&nbsp;music2ram(tic_ram*&nbsp;ram,&nbsp;const&nbsp;tic_music*&nbsp;src)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memcpy(&ram-&gt;music,&nbsp;src,&nbsp;sizeof&nbsp;ram-&gt;music);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
s32&nbsp;calcWaveAnimation(tic_mem*&nbsp;tic,&nbsp;u32&nbsp;offset,&nbsp;s32&nbsp;channel)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sound_register*&nbsp;reg&nbsp;=&nbsp;&tic-&gt;ram-&gt;registers[channel];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;val&nbsp;=&nbsp;tic_tool_noise(&reg-&gt;waveform)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;(rand()&nbsp;&&nbsp;1)&nbsp;*&nbsp;MAX_VOLUME
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;tic_tool_peek4(reg-&gt;waveform.data,&nbsp;((offset&nbsp;*&nbsp;tic_sound_register_get_freq(reg))&nbsp;&gt;&gt;&nbsp;7)&nbsp;%&nbsp;WAVE_VALUES);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;val&nbsp;*&nbsp;reg-&gt;volume;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;const&nbsp;tic_sfx*&nbsp;getSfxSrc(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&tic-&gt;cart.banks[studio-&gt;bank.index.sfx].sfx;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;const&nbsp;tic_music*&nbsp;getMusicSrc(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&tic-&gt;cart.banks[studio-&gt;bank.index.music].music;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
const&nbsp;char*&nbsp;studioExportSfx(Studio*&nbsp;studio,&nbsp;s32&nbsp;index,&nbsp;const&nbsp;char*&nbsp;filename)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char*&nbsp;path&nbsp;=&nbsp;tic_fs_path(studio-&gt;fs,&nbsp;filename);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(wave_open(&nbsp;studio-&gt;samplerate,&nbsp;path&nbsp;))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
<br>
</div>
<div>
#if&nbsp;TIC80_SAMPLE_CHANNELS&nbsp;==&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_enable_stereo();
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sfx*&nbsp;sfx&nbsp;=&nbsp;getSfxSrc(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx2ram(tic-&gt;ram,&nbsp;sfx);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music2ram(tic-&gt;ram,&nbsp;getMusicSrc(studio));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sample*&nbsp;effect&nbsp;=&nbsp;&sfx-&gt;samples.data[index];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum{Channel&nbsp;=&nbsp;0};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx_stop(tic,&nbsp;Channel);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_sfx(tic,&nbsp;index,&nbsp;effect-&gt;note,&nbsp;effect-&gt;octave,&nbsp;-1,&nbsp;Channel,&nbsp;MAX_VOLUME,&nbsp;MAX_VOLUME,&nbsp;SFX_DEF_SPEED);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;ticks&nbsp;=&nbsp;0,&nbsp;pos&nbsp;=&nbsp;0;&nbsp;pos&nbsp;&lt;&nbsp;SFX_TICKS;&nbsp;pos&nbsp;=&nbsp;tic_tool_sfx_pos(effect-&gt;speed,&nbsp;++ticks))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_start(tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_end(tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_synth_sound(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_write(tic-&gt;product.samples.buffer,&nbsp;tic-&gt;product.samples.count);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx_stop(tic,&nbsp;Channel);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(tic-&gt;ram-&gt;registers,&nbsp;0,&nbsp;sizeof(tic_sound_register));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_close();
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
const&nbsp;char*&nbsp;studioExportMusic(Studio*&nbsp;studio,&nbsp;s32&nbsp;track,&nbsp;s32&nbsp;bank,&nbsp;const&nbsp;char*&nbsp;filename)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char*&nbsp;path&nbsp;=&nbsp;tic_fs_path(studio-&gt;fs,&nbsp;filename);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(wave_open(&nbsp;studio-&gt;samplerate,&nbsp;path&nbsp;))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
#if&nbsp;TIC80_SAMPLE_CHANNELS&nbsp;==&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_enable_stereo();
</div>
<div>
#endif
</div>
<div>
#if&nbsp;defined(TIC80_PRO)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;chained&nbsp;=&nbsp;true&nbsp;in&nbsp;CLI.&nbsp;Set&nbsp;to&nbsp;false&nbsp;if&nbsp;want&nbsp;to&nbsp;use&nbsp;unchained
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;chained&nbsp;=&nbsp;studio-&gt;bank.chained;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(chained)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;bank.indexes,&nbsp;bank,&nbsp;sizeof&nbsp;studio-&gt;bank.indexes);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(BankModes);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(BankModes[i]&nbsp;==&nbsp;TIC_MUSIC_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bank.indexes[i]&nbsp;=&nbsp;bank;
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sfx*&nbsp;sfx&nbsp;=&nbsp;getSfxSrc(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_music*&nbsp;music&nbsp;=&nbsp;getMusicSrc(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx2ram(tic-&gt;ram,&nbsp;sfx);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music2ram(tic-&gt;ram,&nbsp;music);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_music_state*&nbsp;state&nbsp;=&nbsp;&tic-&gt;ram-&gt;music_state;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;Music*&nbsp;editor&nbsp;=&nbsp;studio-&gt;banks.music[bank];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_music(tic,&nbsp;track,&nbsp;-1,&nbsp;-1,&nbsp;false,&nbsp;editor-&gt;sustain,&nbsp;-1,&nbsp;-1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;frame&nbsp;=&nbsp;state-&gt;music.frame;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;frames&nbsp;=&nbsp;MUSIC_FRAMES&nbsp;*&nbsp;16;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(frames&nbsp;&&&nbsp;state-&gt;flag.music_status&nbsp;==&nbsp;tic_music_play)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_start(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_SOUND_CHANNELS;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!editor-&gt;on[i])
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;registers[i].volume&nbsp;=&nbsp;0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_end(tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_synth_sound(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_write(tic-&gt;product.samples.buffer,&nbsp;tic-&gt;product.samples.count);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(frame&nbsp;!=&nbsp;state-&gt;music.frame)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--frames;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;=&nbsp;state-&gt;music.frame;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_music(tic,&nbsp;-1,&nbsp;-1,&nbsp;-1,&nbsp;false,&nbsp;false,&nbsp;-1,&nbsp;-1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wave_close();
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;sfx_stop(tic_mem*&nbsp;tic,&nbsp;s32&nbsp;channel)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_api_sfx(tic,&nbsp;-1,&nbsp;0,&nbsp;0,&nbsp;-1,&nbsp;channel,&nbsp;MAX_VOLUME,&nbsp;MAX_VOLUME,&nbsp;SFX_DEF_SPEED);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
char&nbsp;getKeyboardText(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;text;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(!tic_sys_keyboard_text(&text))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic80_input*&nbsp;input&nbsp;=&nbsp;&tic-&gt;ram-&gt;input;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char&nbsp;Symbols[]&nbsp;=&nbsp;&nbsp;&nbsp;"&nbsp;abcdefghijklmnopqrstuvwxyz0123456789-=[]\\;'`,./&nbsp;";
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char&nbsp;Shift[]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;ABCDEFGHIJKLMNOPQRSTUVWXYZ)!@#$%^&*(_+{}|:\"~&lt;&gt;?&nbsp;";
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum{Count&nbsp;=&nbsp;sizeof&nbsp;Symbols};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC80_KEY_BUFFER;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_key&nbsp;key&nbsp;=&nbsp;input-&gt;keyboard.keys[i];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(key&nbsp;&gt;&nbsp;0&nbsp;&&&nbsp;key&nbsp;&lt;&nbsp;Count&nbsp;&&&nbsp;tic_api_keyp(tic,&nbsp;key,&nbsp;KEYBOARD_HOLD,&nbsp;KEYBOARD_PERIOD))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;caps&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_capslock);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;shift&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_shift);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;caps
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;key&nbsp;&gt;=&nbsp;tic_key_a&nbsp;&&&nbsp;key&nbsp;&lt;=&nbsp;tic_key_z&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;shift&nbsp;?&nbsp;Symbols[key]&nbsp;:&nbsp;Shift[key]
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;shift&nbsp;?&nbsp;Shift[key]&nbsp;:&nbsp;Symbols[key]
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;shift&nbsp;?&nbsp;Shift[key]&nbsp;:&nbsp;Symbols[key];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'\0';
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;text;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;keyWasPressed(Studio*&nbsp;studio,&nbsp;tic_key&nbsp;key)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tic_api_keyp(tic,&nbsp;key,&nbsp;KEYBOARD_HOLD,&nbsp;KEYBOARD_PERIOD);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;enterWasPressed(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ticEnterWasPressed(tic,&nbsp;KEYBOARD_HOLD,&nbsp;KEYBOARD_PERIOD);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;ticEnterWasPressed(tic_mem*&nbsp;tic,&nbsp;s32&nbsp;hold,&nbsp;s32&nbsp;period)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tic_api_keyp(tic,&nbsp;tic_key_return,&nbsp;hold,&nbsp;period)&nbsp;||
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_keyp(tic,&nbsp;tic_key_numpadenter,&nbsp;hold,&nbsp;period);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
<br>
</div>
<div>
bool&nbsp;anyKeyWasPressed(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC80_KEY_BUFFER;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_key&nbsp;key&nbsp;=&nbsp;tic-&gt;ram-&gt;input.keyboard.keys[i];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic_api_keyp(tic,&nbsp;key,&nbsp;KEYBOARD_HOLD,&nbsp;KEYBOARD_PERIOD))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
tic_tiles*&nbsp;getBankTiles(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&studio-&gt;tic-&gt;cart.banks[studio-&gt;bank.index.sprites].tiles;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
tic_map*&nbsp;getBankMap(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&studio-&gt;tic-&gt;cart.banks[studio-&gt;bank.index.map].map;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
tic_palette*&nbsp;getBankPalette(Studio*&nbsp;studio,&nbsp;bool&nbsp;vbank)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_bank*&nbsp;bank&nbsp;=&nbsp;&studio-&gt;tic-&gt;cart.banks[studio-&gt;bank.index.sprites];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;vbank&nbsp;?&nbsp;&bank-&gt;palette.vbank1&nbsp;:&nbsp;&bank-&gt;palette.vbank0;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
tic_flags*&nbsp;getBankFlags(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&studio-&gt;tic-&gt;cart.banks[studio-&gt;bank.index.sprites].flags;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;playSystemSfx(Studio*&nbsp;studio,&nbsp;s32&nbsp;id)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sample*&nbsp;effect&nbsp;=&nbsp;&studio-&gt;config-&gt;cart-&gt;bank0.sfx.samples.data[id];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_api_sfx(studio-&gt;tic,&nbsp;id,&nbsp;effect-&gt;note,&nbsp;effect-&gt;octave,&nbsp;-1,&nbsp;0,&nbsp;MAX_VOLUME,&nbsp;MAX_VOLUME,&nbsp;effect-&gt;speed);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;md5(const&nbsp;void*&nbsp;voidData,&nbsp;s32&nbsp;length,&nbsp;u8&nbsp;digest[MD5_HASHSIZE])
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{Size&nbsp;=&nbsp;512};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;u8*&nbsp;data&nbsp;=&nbsp;voidData;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MD5_CTX&nbsp;c;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MD5_Init(&c);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(length&nbsp;&gt;&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MD5_Update(&c,&nbsp;data,&nbsp;length&nbsp;&gt;&nbsp;Size&nbsp;?&nbsp;Size:&nbsp;length);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length&nbsp;-=&nbsp;Size;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;+=&nbsp;Size;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MD5_Final(digest,&nbsp;&c);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
const&nbsp;char*&nbsp;md5str(const&nbsp;void*&nbsp;data,&nbsp;s32&nbsp;length)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;char&nbsp;res[MD5_HASHSIZE&nbsp;*&nbsp;2&nbsp;+&nbsp;1];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;digest[MD5_HASHSIZE];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;md5(data,&nbsp;length,&nbsp;digest);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(s32&nbsp;n&nbsp;=&nbsp;0;&nbsp;n&nbsp;&lt;&nbsp;MD5_HASHSIZE;&nbsp;++n)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snprintf(res&nbsp;+&nbsp;n*2,&nbsp;sizeof("ff"),&nbsp;"%02x",&nbsp;digest[n]);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;res;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;u8*&nbsp;getSpritePtr(tic_tile*&nbsp;tiles,&nbsp;s32&nbsp;x,&nbsp;s32&nbsp;y)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{&nbsp;SheetCols&nbsp;=&nbsp;(TIC_SPRITESHEET_SIZE&nbsp;/&nbsp;TIC_SPRITESIZE)&nbsp;};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tiles[x&nbsp;/&nbsp;TIC_SPRITESIZE&nbsp;+&nbsp;y&nbsp;/&nbsp;TIC_SPRITESIZE&nbsp;*&nbsp;SheetCols].data;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
<br>
</div>
<div>
void&nbsp;setSpritePixel(tic_tile*&nbsp;tiles,&nbsp;s32&nbsp;x,&nbsp;s32&nbsp;y,&nbsp;u8&nbsp;color)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;TODO:&nbsp;check&nbsp;spritesheet&nbsp;rect
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_tool_poke4(getSpritePtr(tiles,&nbsp;x,&nbsp;y),&nbsp;(x&nbsp;%&nbsp;TIC_SPRITESIZE)&nbsp;+&nbsp;(y&nbsp;%&nbsp;TIC_SPRITESIZE)&nbsp;*&nbsp;TIC_SPRITESIZE,&nbsp;color);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
u8&nbsp;getSpritePixel(tic_tile*&nbsp;tiles,&nbsp;s32&nbsp;x,&nbsp;s32&nbsp;y)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;TODO:&nbsp;check&nbsp;spritesheet&nbsp;rect
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tic_tool_peek4(getSpritePtr(tiles,&nbsp;x,&nbsp;y),&nbsp;(x&nbsp;%&nbsp;TIC_SPRITESIZE)&nbsp;+&nbsp;(y&nbsp;%&nbsp;TIC_SPRITESIZE)&nbsp;*&nbsp;TIC_SPRITESIZE);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
void&nbsp;toClipboard(const&nbsp;void*&nbsp;data,&nbsp;s32&nbsp;size,&nbsp;bool&nbsp;flip)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(data)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{Len&nbsp;=&nbsp;2};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;clipboard&nbsp;=&nbsp;(char*)malloc(size*Len&nbsp;+&nbsp;1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(clipboard)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;ptr&nbsp;=&nbsp;clipboard;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_tool_buf2str(data,&nbsp;size,&nbsp;clipboard,&nbsp;flip);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_sys_clipboard_set(clipboard);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(clipboard);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;removeWhiteSpaces(char*&nbsp;str)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;i&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;len&nbsp;=&nbsp;(s32)strlen(str);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(s32&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;len;&nbsp;j++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isspace(str[j]))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str[i++]&nbsp;=&nbsp;str[j];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;str[i]&nbsp;=&nbsp;'\0';
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;fromClipboard(void*&nbsp;data,&nbsp;s32&nbsp;size,&nbsp;bool&nbsp;flip,&nbsp;bool&nbsp;remove_white_spaces,&nbsp;bool&nbsp;sameSize)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(tic_sys_clipboard_has())
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;clipboard&nbsp;=&nbsp;tic_sys_clipboard_get();
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCOPE(tic_sys_clipboard_free(clipboard))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(remove_white_spaces)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;removeWhiteSpaces(clipboard);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;valid&nbsp;=&nbsp;sameSize&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;strlen(clipboard)&nbsp;==&nbsp;size&nbsp;*&nbsp;2&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;strlen(clipboard)&nbsp;&lt;=&nbsp;size&nbsp;*&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(valid)&nbsp;tic_tool_str2buf(clipboard,&nbsp;(s32)strlen(clipboard),&nbsp;data,&nbsp;flip);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;valid;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;showTooltip(Studio*&nbsp;studio,&nbsp;const&nbsp;char*&nbsp;text)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;strncpy(studio-&gt;tooltip.text,&nbsp;text,&nbsp;sizeof&nbsp;studio-&gt;tooltip.text&nbsp;-&nbsp;1);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;drawExtrabar(Studio*&nbsp;studio,&nbsp;tic_mem*&nbsp;tic)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{Size&nbsp;=&nbsp;7};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;x&nbsp;=&nbsp;(COUNT_OF(Modes)&nbsp;+&nbsp;1)&nbsp;*&nbsp;Size&nbsp;+&nbsp;17&nbsp;*&nbsp;TIC_FONT_WIDTH;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;y&nbsp;=&nbsp;0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;struct&nbsp;Icon&nbsp;{u8&nbsp;id;&nbsp;StudioEvent&nbsp;event;&nbsp;const&nbsp;char*&nbsp;tip;}&nbsp;Icons[]&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{tic_icon_cut,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TIC_TOOLBAR_CUT,&nbsp;&nbsp;&nbsp;&nbsp;"CUT&nbsp;[ctrl+x]"},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{tic_icon_copy,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TIC_TOOLBAR_COPY,&nbsp;&nbsp;&nbsp;"COPY&nbsp;[ctrl+c]"},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{tic_icon_paste,&nbsp;&nbsp;&nbsp;&nbsp;TIC_TOOLBAR_PASTE,&nbsp;&nbsp;"PASTE&nbsp;[ctrl+v]"},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{tic_icon_undo,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TIC_TOOLBAR_UNDO,&nbsp;&nbsp;&nbsp;"UNDO&nbsp;[ctrl+z]"},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{tic_icon_redo,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TIC_TOOLBAR_REDO,&nbsp;&nbsp;&nbsp;"REDO&nbsp;[ctrl+y]"},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;color&nbsp;=&nbsp;tic_color_red;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;FOR(const&nbsp;struct&nbsp;Icon*,&nbsp;icon,&nbsp;Icons)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_rect&nbsp;rect&nbsp;=&nbsp;{x,&nbsp;y,&nbsp;Size,&nbsp;Size};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;bg&nbsp;=&nbsp;tic_color_white;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;fg&nbsp;=&nbsp;tic_color_light_grey;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMousePos(studio,&nbsp;&rect))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCursor(studio,&nbsp;tic_cursor_hand);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fg&nbsp;=&nbsp;color;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showTooltip(studio,&nbsp;icon-&gt;tip);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMouseDown(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bg&nbsp;=&nbsp;fg;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fg&nbsp;=&nbsp;tic_color_white;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(checkMouseClick(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioEvent(studio,&nbsp;icon-&gt;event);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_rect(tic,&nbsp;x,&nbsp;y,&nbsp;Size,&nbsp;Size,&nbsp;bg);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;icon-&gt;id,&nbsp;x,&nbsp;y,&nbsp;fg);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;+=&nbsp;Size;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color++;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
struct&nbsp;Sprite*&nbsp;getSpriteEditor(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;banks.sprite[studio-&gt;bank.index.sprites];
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
const&nbsp;StudioConfig*&nbsp;studio_config(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&studio-&gt;config-&gt;data;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
const&nbsp;StudioConfig*&nbsp;getConfig(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio_config(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
struct&nbsp;Start*&nbsp;getStartScreen(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;start;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined&nbsp;(TIC80_PRO)
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;drawBankIcon(Studio*&nbsp;studio,&nbsp;s32&nbsp;x,&nbsp;s32&nbsp;y)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_rect&nbsp;rect&nbsp;=&nbsp;{x,&nbsp;y,&nbsp;TIC_FONT_WIDTH,&nbsp;TIC_FONT_HEIGHT};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;over&nbsp;=&nbsp;false;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;mode&nbsp;=&nbsp;0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(BankModes);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(BankModes[i]&nbsp;==&nbsp;studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode&nbsp;=&nbsp;i;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(checkMousePos(studio,&nbsp;&rect))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCursor(studio,&nbsp;tic_cursor_hand);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showTooltip(studio,&nbsp;"SWITCH&nbsp;BANK");
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMouseClick(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bank.show&nbsp;=&nbsp;!studio-&gt;bank.show;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bank.show)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;tic_icon_bank,&nbsp;x,&nbsp;y,&nbsp;tic_color_red);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum{Size&nbsp;=&nbsp;TOOLBAR_SIZE};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_EDITOR_BANKS;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_rect&nbsp;rect&nbsp;=&nbsp;{x&nbsp;+&nbsp;2&nbsp;+&nbsp;(i+1)*Size,&nbsp;0,&nbsp;Size,&nbsp;Size};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;over&nbsp;=&nbsp;false;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMousePos(studio,&nbsp;&rect))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCursor(studio,&nbsp;tic_cursor_hand);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMouseClick(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bank.chained)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;bank.indexes,&nbsp;i,&nbsp;sizeof&nbsp;studio-&gt;bank.indexes);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;studio-&gt;bank.indexes[mode]&nbsp;=&nbsp;i;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;==&nbsp;studio-&gt;bank.indexes[mode])
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_rect(tic,&nbsp;rect.x,&nbsp;rect.y,&nbsp;rect.w,&nbsp;rect.h,&nbsp;tic_color_red);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_print(tic,&nbsp;(char[]){'0'&nbsp;+&nbsp;i,&nbsp;'\0'},&nbsp;rect.x+1,&nbsp;rect.y+1,&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;==&nbsp;studio-&gt;bank.indexes[mode]&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;tic_color_white&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;over&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;tic_color_red&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;tic_color_light_grey,&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false,&nbsp;1,&nbsp;false);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_rect&nbsp;rect&nbsp;=&nbsp;{x&nbsp;+&nbsp;4&nbsp;+&nbsp;(TIC_EDITOR_BANKS+1)*Size,&nbsp;0,&nbsp;Size,&nbsp;Size};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;over&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMousePos(studio,&nbsp;&rect))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCursor(studio,&nbsp;tic_cursor_hand);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMouseClick(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bank.chained&nbsp;=&nbsp;!studio-&gt;bank.chained;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bank.chained)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;bank.indexes,&nbsp;studio-&gt;bank.indexes[mode],&nbsp;sizeof&nbsp;studio-&gt;bank.indexes);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;tic_icon_pin,&nbsp;rect.x,&nbsp;rect.y,&nbsp;studio-&gt;bank.chained&nbsp;?&nbsp;tic_color_red&nbsp;:&nbsp;over&nbsp;?&nbsp;tic_color_grey&nbsp;:&nbsp;tic_color_light_grey);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;tic_icon_bank,&nbsp;x,&nbsp;y,&nbsp;over&nbsp;?&nbsp;tic_color_red&nbsp;:&nbsp;tic_color_light_grey);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;s32&nbsp;lerp(s32&nbsp;a,&nbsp;s32&nbsp;b,&nbsp;float&nbsp;d)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(b&nbsp;-&nbsp;a)&nbsp;*&nbsp;d&nbsp;+&nbsp;a;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;float&nbsp;bounceOut(float&nbsp;x)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;n1&nbsp;=&nbsp;7.5625;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;d1&nbsp;=&nbsp;2.75;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(x&nbsp;&lt;&nbsp;1&nbsp;/&nbsp;d1)&nbsp;return&nbsp;n1&nbsp;*&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(x&nbsp;&lt;&nbsp;2&nbsp;/&nbsp;d1)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;-=&nbsp;1.5&nbsp;/&nbsp;d1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;+&nbsp;0.75;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(x&nbsp;&lt;&nbsp;2.5&nbsp;/&nbsp;d1)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;-=&nbsp;2.25&nbsp;/&nbsp;d1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;+&nbsp;0.9375;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;-=&nbsp;2.625&nbsp;/&nbsp;d1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n1&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;+&nbsp;0.984375;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;float&nbsp;animEffect(AnimEffect&nbsp;effect,&nbsp;float&nbsp;x)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;c1&nbsp;=&nbsp;1.70158;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;c2&nbsp;=&nbsp;c1&nbsp;*&nbsp;1.525;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;c3&nbsp;=&nbsp;c1&nbsp;+&nbsp;1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;c4&nbsp;=&nbsp;(2&nbsp;*&nbsp;M_PI)&nbsp;/&nbsp;3;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;float&nbsp;c5&nbsp;=&nbsp;(2&nbsp;*&nbsp;M_PI)&nbsp;/&nbsp;4.5;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;switch(effect)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimLinear:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseIn:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOut:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;(1&nbsp;-&nbsp;x)&nbsp;*&nbsp;(1&nbsp;-&nbsp;x);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOut:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5&nbsp;?&nbsp;2&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;:&nbsp;1&nbsp;-&nbsp;pow(-2&nbsp;*&nbsp;x&nbsp;+&nbsp;2,&nbsp;2)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInCubic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutCubic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;pow(1&nbsp;-&nbsp;x,&nbsp;3);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutCubic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5&nbsp;?&nbsp;4&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;:&nbsp;1&nbsp;-&nbsp;pow(-2&nbsp;*&nbsp;x&nbsp;+&nbsp;2,&nbsp;3)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInQuart:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutQuart:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;pow(1&nbsp;-&nbsp;x,&nbsp;4);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutQuart:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5&nbsp;?&nbsp;8&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;:&nbsp;1&nbsp;-&nbsp;pow(-2&nbsp;*&nbsp;x&nbsp;+&nbsp;2,&nbsp;4)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInQuint:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutQuint:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;pow(1&nbsp;-&nbsp;x,&nbsp;5);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutQuint:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5&nbsp;?&nbsp;16&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;:&nbsp;1&nbsp;-&nbsp;pow(-2&nbsp;*&nbsp;x&nbsp;+&nbsp;2,&nbsp;5)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInSine:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;cos((x&nbsp;*&nbsp;M_PI)&nbsp;/&nbsp;2);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutSine:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sin((x&nbsp;*&nbsp;M_PI)&nbsp;/&nbsp;2);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutSine:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-(cos(M_PI&nbsp;*&nbsp;x)&nbsp;-&nbsp;1)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInExpo:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;0&nbsp;?&nbsp;0&nbsp;:&nbsp;pow(2,&nbsp;10&nbsp;*&nbsp;x&nbsp;-&nbsp;10);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutExpo:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;1&nbsp;?&nbsp;1&nbsp;:&nbsp;1&nbsp;-&nbsp;pow(2,&nbsp;-10&nbsp;*&nbsp;x);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutExpo:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;==&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;&lt;&nbsp;0.5
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;pow(2,&nbsp;20&nbsp;*&nbsp;x&nbsp;-&nbsp;10)&nbsp;/&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(2&nbsp;-&nbsp;pow(2,&nbsp;-20&nbsp;*&nbsp;x&nbsp;+&nbsp;10))&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInCirc:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;sqrt(1&nbsp;-&nbsp;pow(x,&nbsp;2));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutCirc:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;sqrt(1&nbsp;-&nbsp;pow(x&nbsp;-&nbsp;1,&nbsp;2));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutCirc:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;(1&nbsp;-&nbsp;sqrt(1&nbsp;-&nbsp;pow(2&nbsp;*&nbsp;x,&nbsp;2)))&nbsp;/&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(sqrt(1&nbsp;-&nbsp;pow(-2&nbsp;*&nbsp;x&nbsp;+&nbsp;2,&nbsp;2))&nbsp;+&nbsp;1)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInBack:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;c3&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;*&nbsp;x&nbsp;-&nbsp;c1&nbsp;*&nbsp;x&nbsp;*&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutBack:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;+&nbsp;c3&nbsp;*&nbsp;pow(x&nbsp;-&nbsp;1,&nbsp;3)&nbsp;+&nbsp;c1&nbsp;*&nbsp;pow(x&nbsp;-&nbsp;1,&nbsp;2);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutBack:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;(pow(2&nbsp;*&nbsp;x,&nbsp;2)&nbsp;*&nbsp;((c2&nbsp;+&nbsp;1)&nbsp;*&nbsp;2&nbsp;*&nbsp;x&nbsp;-&nbsp;c2))&nbsp;/&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(pow(2&nbsp;*&nbsp;x&nbsp;-&nbsp;2,&nbsp;2)&nbsp;*&nbsp;((c2&nbsp;+&nbsp;1)&nbsp;*&nbsp;(x&nbsp;*&nbsp;2&nbsp;-&nbsp;2)&nbsp;+&nbsp;c2)&nbsp;+&nbsp;2)&nbsp;/&nbsp;2;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInElastic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;==&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;-pow(2,&nbsp;10&nbsp;*&nbsp;x&nbsp;-&nbsp;10)&nbsp;*&nbsp;sin((x&nbsp;*&nbsp;10&nbsp;-&nbsp;10.75)&nbsp;*&nbsp;c4);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutElastic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;==&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;pow(2,&nbsp;-10&nbsp;*&nbsp;x)&nbsp;*&nbsp;sin((x&nbsp;*&nbsp;10&nbsp;-&nbsp;0.75)&nbsp;*&nbsp;c4)&nbsp;+&nbsp;1;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutElastic:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;==&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;0
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;==&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;1
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;x&nbsp;&lt;&nbsp;0.5
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;-(pow(2,&nbsp;20&nbsp;*&nbsp;x&nbsp;-&nbsp;10)&nbsp;*&nbsp;sin((20&nbsp;*&nbsp;x&nbsp;-&nbsp;11.125)&nbsp;*&nbsp;c5))&nbsp;/&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(pow(2,&nbsp;-20&nbsp;*&nbsp;x&nbsp;+&nbsp;10)&nbsp;*&nbsp;sin((20&nbsp;*&nbsp;x&nbsp;-&nbsp;11.125)&nbsp;*&nbsp;c5))&nbsp;/&nbsp;2&nbsp;+&nbsp;1;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInBounce:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;-&nbsp;bounceOut(1&nbsp;-&nbsp;x);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseOutBounce:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bounceOut(x);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;AnimEaseInOutBounce:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x&nbsp;&lt;&nbsp;0.5
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;(1&nbsp;-&nbsp;bounceOut(1&nbsp;-&nbsp;2&nbsp;*&nbsp;x))&nbsp;/&nbsp;2
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(1&nbsp;+&nbsp;bounceOut(2&nbsp;*&nbsp;x&nbsp;-&nbsp;1))&nbsp;/&nbsp;2;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;x;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;animTick(Movie*&nbsp;movie)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(Anim*&nbsp;it&nbsp;=&nbsp;movie-&gt;items,&nbsp;*end&nbsp;=&nbsp;it&nbsp;+&nbsp;movie-&gt;count;&nbsp;it&nbsp;!=&nbsp;end;&nbsp;++it)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
	float&nbsp;tick&nbsp;=&nbsp;(float)(movie-&gt;tick&nbsp;&lt;&nbsp;it-&gt;time&nbsp;?&nbsp;movie-&gt;tick&nbsp;:&nbsp;it-&gt;time);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*it-&gt;value&nbsp;=&nbsp;lerp(it-&gt;start,&nbsp;it-&gt;end,&nbsp;animEffect(it-&gt;effect,&nbsp;tick&nbsp;/&nbsp;it-&gt;time));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;processAnim(Movie*&nbsp;movie,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;animTick(movie);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(movie-&gt;tick&nbsp;==&nbsp;movie-&gt;time)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;movie-&gt;done(data);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;movie-&gt;tick++;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
Movie*&nbsp;resetMovie(Movie*&nbsp;movie)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;movie-&gt;tick&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;animTick(movie);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;movie;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;drawPopup(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;anim.movie&nbsp;!=&nbsp;&studio-&gt;anim.idle)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum{Width&nbsp;=&nbsp;TIC80_WIDTH,&nbsp;Height&nbsp;=&nbsp;TIC_FONT_HEIGHT&nbsp;+&nbsp;1};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_rect(studio-&gt;tic,&nbsp;0,&nbsp;studio-&gt;anim.pos.popup,&nbsp;Width,&nbsp;Height,&nbsp;tic_color_red);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_print(studio-&gt;tic,&nbsp;studio-&gt;popup.message,&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(s32)(Width&nbsp;-&nbsp;strlen(studio-&gt;popup.message)&nbsp;*&nbsp;TIC_FONT_WIDTH)/2,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.pos.popup&nbsp;+&nbsp;1,&nbsp;tic_color_white,&nbsp;true,&nbsp;1,&nbsp;false);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;render&nbsp;popup&nbsp;message
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_bank*&nbsp;bank&nbsp;=&nbsp;&getConfig(studio)-&gt;cart-&gt;bank0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32*&nbsp;dst&nbsp;=&nbsp;tic-&gt;product.screen&nbsp;+&nbsp;TIC80_MARGIN_LEFT&nbsp;+&nbsp;TIC80_MARGIN_TOP&nbsp;*&nbsp;TIC80_FULLWIDTH;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0,&nbsp;y&nbsp;=&nbsp;0;&nbsp;y&nbsp;&lt;&nbsp;(Height&nbsp;+&nbsp;studio-&gt;anim.pos.popup);&nbsp;y++,&nbsp;dst&nbsp;+=&nbsp;TIC80_MARGIN_RIGHT&nbsp;+&nbsp;TIC80_MARGIN_LEFT)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&nbsp;&lt;&nbsp;Width;&nbsp;x++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*dst++&nbsp;=&nbsp;tic_rgba(&bank-&gt;palette.vbank0.colors[tic_tool_peek4(tic-&gt;ram-&gt;vram.screen.data,&nbsp;i++)]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;drawToolbar(Studio*&nbsp;studio,&nbsp;tic_mem*&nbsp;tic,&nbsp;bool&nbsp;bg)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(bg)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_rect(tic,&nbsp;0,&nbsp;0,&nbsp;TIC80_WIDTH,&nbsp;TOOLBAR_SIZE,&nbsp;tic_color_white);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{Size&nbsp;=&nbsp;7};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;u8&nbsp;Icons[]&nbsp;=&nbsp;{tic_icon_code,&nbsp;tic_icon_sprite,&nbsp;tic_icon_map,&nbsp;tic_icon_sfx,&nbsp;tic_icon_music};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char*&nbsp;Tips[]&nbsp;=&nbsp;{"CODE&nbsp;EDITOR&nbsp;[f1]",&nbsp;"SPRITE&nbsp;EDITOR&nbsp;[f2]",&nbsp;"MAP&nbsp;EDITOR&nbsp;[f3]",&nbsp;"SFX&nbsp;EDITOR&nbsp;[f4]",&nbsp;"MUSIC&nbsp;EDITOR&nbsp;[f5]",};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;mode&nbsp;=&nbsp;-1;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(Modes);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_rect&nbsp;rect&nbsp;=&nbsp;{i&nbsp;*&nbsp;Size,&nbsp;0,&nbsp;Size,&nbsp;Size};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;over&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMousePos(studio,&nbsp;&rect))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCursor(studio,&nbsp;tic_cursor_hand);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showTooltip(studio,&nbsp;Tips[i]);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(checkMouseClick(studio,&nbsp;&rect,&nbsp;tic_mouse_left))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;toolbarMode&nbsp;=&nbsp;Modes[i];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(getStudioMode(studio)&nbsp;==&nbsp;Modes[i])&nbsp;mode&nbsp;=&nbsp;i;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(mode&nbsp;==&nbsp;i)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;tic_icon_tab,&nbsp;i&nbsp;*&nbsp;Size,&nbsp;0,&nbsp;tic_color_grey);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;Icons[i],&nbsp;i&nbsp;*&nbsp;Size,&nbsp;1,&nbsp;tic_color_black);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBitIcon(studio,&nbsp;Icons[i],&nbsp;i&nbsp;*&nbsp;Size,&nbsp;0,&nbsp;mode&nbsp;==&nbsp;i&nbsp;?&nbsp;tic_color_white&nbsp;:&nbsp;(over&nbsp;?&nbsp;tic_color_grey&nbsp;:&nbsp;tic_color_light_grey));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(mode&nbsp;&gt;=&nbsp;0)&nbsp;drawExtrabar(studio,&nbsp;tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char*&nbsp;Names[]&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODE&nbsp;EDITOR",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"SPRITE&nbsp;EDITOR",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"MAP&nbsp;EDITOR",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"SFX&nbsp;EDITOR",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"MUSIC&nbsp;EDITOR",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined&nbsp;(TIC80_PRO)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{TextOffset&nbsp;=&nbsp;(COUNT_OF(Modes)&nbsp;+&nbsp;2)&nbsp;*&nbsp;Size&nbsp;-&nbsp;2};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(mode&nbsp;&gt;=&nbsp;1)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawBankIcon(studio,&nbsp;COUNT_OF(Modes)&nbsp;*&nbsp;Size&nbsp;+&nbsp;2,&nbsp;0);
</div>
<div>
#else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;{TextOffset&nbsp;=&nbsp;(COUNT_OF(Modes)&nbsp;+&nbsp;1)&nbsp;*&nbsp;Size};
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(mode&nbsp;==&nbsp;0&nbsp;||&nbsp;(mode&nbsp;&gt;=&nbsp;1&nbsp;&&&nbsp;!studio-&gt;bank.show))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(strlen(studio-&gt;tooltip.text))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_print(tic,&nbsp;studio-&gt;tooltip.text,&nbsp;TextOffset,&nbsp;1,&nbsp;tic_color_dark_grey,&nbsp;false,&nbsp;1,&nbsp;false);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_print(tic,&nbsp;Names[mode],&nbsp;TextOffset,&nbsp;1,&nbsp;tic_color_grey,&nbsp;false,&nbsp;1,&nbsp;false);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;setStudioEvent(Studio*&nbsp;studio,&nbsp;StudioEvent&nbsp;event)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CODE_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code*&nbsp;code&nbsp;=&nbsp;studio-&gt;code;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code-&gt;event(code,&nbsp;event);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SPRITE_MODE:&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sprite*&nbsp;sprite&nbsp;=&nbsp;studio-&gt;banks.sprite[studio-&gt;bank.index.sprites];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprite-&gt;event(sprite,&nbsp;event);&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MAP_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map*&nbsp;map&nbsp;=&nbsp;studio-&gt;banks.map[studio-&gt;bank.index.map];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map-&gt;event(map,&nbsp;event);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SFX_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sfx*&nbsp;sfx&nbsp;=&nbsp;studio-&gt;banks.sfx[studio-&gt;bank.index.sfx];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx-&gt;event(sfx,&nbsp;event);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MUSIC_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Music*&nbsp;music&nbsp;=&nbsp;studio-&gt;banks.music[studio-&gt;bank.index.music];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music-&gt;event(music,&nbsp;event);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
ClipboardEvent&nbsp;getClipboardEvent(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;shift&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_shift);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;ctrl&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_ctrl);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(ctrl)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressed(studio,&nbsp;tic_key_insert)&nbsp;||&nbsp;keyWasPressed(studio,&nbsp;tic_key_c))&nbsp;return&nbsp;TIC_CLIPBOARD_COPY;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressed(studio,&nbsp;tic_key_x))&nbsp;return&nbsp;TIC_CLIPBOARD_CUT;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressed(studio,&nbsp;tic_key_v))&nbsp;return&nbsp;TIC_CLIPBOARD_PASTE;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(shift)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressed(studio,&nbsp;tic_key_delete))&nbsp;return&nbsp;TIC_CLIPBOARD_CUT;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressed(studio,&nbsp;tic_key_insert))&nbsp;return&nbsp;TIC_CLIPBOARD_PASTE;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;TIC_CLIPBOARD_NONE;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;showPopupMessage(Studio*&nbsp;studio,&nbsp;const&nbsp;char*&nbsp;text)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;popup.message,&nbsp;'\0',&nbsp;sizeof&nbsp;studio-&gt;popup.message);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;strncpy(studio-&gt;popup.message,&nbsp;text,&nbsp;sizeof(studio-&gt;popup.message)&nbsp;-&nbsp;1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(char*&nbsp;c&nbsp;=&nbsp;studio-&gt;popup.message;&nbsp;c&nbsp;&lt;&nbsp;studio-&gt;popup.message&nbsp;+&nbsp;sizeof&nbsp;studio-&gt;popup.message;&nbsp;c++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(*c)&nbsp;*c&nbsp;=&nbsp;toupper(*c);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.movie&nbsp;=&nbsp;resetMovie(&studio-&gt;anim.show);
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;exitConfirm(Studio*&nbsp;studio,&nbsp;bool&nbsp;yes,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;alive&nbsp;=&nbsp;yes;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studio_exit(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_START_MODE&nbsp;&&&nbsp;studioCartChanged(studio))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char*&nbsp;Rows[]&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"WARNING!",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"You&nbsp;have&nbsp;unsaved&nbsp;changes",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Do&nbsp;you&nbsp;really&nbsp;want&nbsp;to&nbsp;exit?",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmDialog(studio,&nbsp;Rows,&nbsp;COUNT_OF(Rows),&nbsp;exitConfirm,&nbsp;NULL);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exitConfirm(studio,&nbsp;true,&nbsp;NULL);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;exitStudio(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio_exit(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;drawBitIcon(Studio*&nbsp;studio,&nbsp;s32&nbsp;id,&nbsp;s32&nbsp;x,&nbsp;s32&nbsp;y,&nbsp;u8&nbsp;color)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_tile*&nbsp;tile&nbsp;=&nbsp;&getConfig(studio)-&gt;cart-&gt;bank0.tiles.data[id];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0,&nbsp;sx&nbsp;=&nbsp;x,&nbsp;ex&nbsp;=&nbsp;sx&nbsp;+&nbsp;TIC_SPRITESIZE;&nbsp;i&nbsp;!=&nbsp;TIC_SPRITESIZE&nbsp;*&nbsp;TIC_SPRITESIZE;&nbsp;++i,&nbsp;++x)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(x&nbsp;==&nbsp;ex)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;sx;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y++;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic_tool_peek4(tile,&nbsp;i))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_pix(tic,&nbsp;x,&nbsp;y,&nbsp;color,&nbsp;false);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;initRunMode(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initRun(studio-&gt;run,&nbsp;
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console,&nbsp;
</div>
<div>
#else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;fs,&nbsp;studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;void&nbsp;initWorldMap(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initWorld(studio-&gt;world,&nbsp;studio,&nbsp;studio-&gt;banks.map[studio-&gt;bank.index.map]);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;initSurfMode(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initSurf(studio-&gt;surf,&nbsp;studio,&nbsp;studio-&gt;console);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;gotoSurf(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initSurfMode(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_SURF_MODE);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;gotoCode(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CODE_MODE);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;setStudioMode(Studio*&nbsp;studio,&nbsp;EditorMode&nbsp;mode)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(mode&nbsp;!=&nbsp;studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EditorMode&nbsp;prev&nbsp;=&nbsp;studio-&gt;mode;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(prev&nbsp;==&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_pause(studio-&gt;tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_reset(studio-&gt;tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(prev)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_START_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CONSOLE_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;studio-&gt;prevMode&nbsp;=&nbsp;prev;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:&nbsp;initRunMode(studio);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CONSOLE_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(prev&nbsp;==&nbsp;TIC_SURF_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console-&gt;done(studio-&gt;console);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_WORLD_MODE:&nbsp;initWorldMap(studio);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SURF_MODE:&nbsp;studio-&gt;surf-&gt;resume(studio-&gt;surf);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mode&nbsp;=&nbsp;mode;
</div>
<div>
#else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_START_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mode&nbsp;=&nbsp;mode;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mode&nbsp;=&nbsp;TIC_RUN_MODE;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(mode&nbsp;==&nbsp;TIC_MUSIC_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Music*&nbsp;music&nbsp;=&nbsp;studio-&gt;banks.music[studio-&gt;bank.index.music];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music-&gt;tab&nbsp;=&nbsp;(music-&gt;tab&nbsp;+&nbsp;1)&nbsp;%&nbsp;MUSIC_TAB_COUNT;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;viMode&nbsp;=&nbsp;0;
</div>
<div>
#endif
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
EditorMode&nbsp;getStudioMode(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;mode;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;void&nbsp;changeStudioMode(Studio*&nbsp;studio,&nbsp;s32&nbsp;dir)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(size_t&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(Modes);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;Modes[i])
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;Modes[(i+dir+&nbsp;COUNT_OF(Modes))&nbsp;%&nbsp;COUNT_OF(Modes)]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;resumeGame(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_core_resume(studio-&gt;tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mode&nbsp;=&nbsp;TIC_RUN_MODE;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
void&nbsp;setStudioViMode(Studio*&nbsp;studio,&nbsp;ViMode&nbsp;mode)&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;viMode&nbsp;=&nbsp;mode;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
ViMode&nbsp;getStudioViMode(Studio*&nbsp;studio)&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;viMode;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;checkStudioViMode(Studio*&nbsp;studio,&nbsp;ViMode&nbsp;mode)&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getConfig(studio)-&gt;options.keybindMode&nbsp;==&nbsp;KEYBIND_VI
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;getStudioViMode(studio)&nbsp;==&nbsp;mode
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;);
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;bool&nbsp;pointInRect(const&nbsp;tic_point*&nbsp;pt,&nbsp;const&nbsp;tic_rect*&nbsp;rect)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(pt-&gt;x&nbsp;&gt;=&nbsp;rect-&gt;x)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;(pt-&gt;x&nbsp;&lt;&nbsp;(rect-&gt;x&nbsp;+&nbsp;rect-&gt;w))&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;(pt-&gt;y&nbsp;&gt;=&nbsp;rect-&gt;y)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;(pt-&gt;y&nbsp;&lt;&nbsp;(rect-&gt;y&nbsp;+&nbsp;rect-&gt;h));
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;checkMousePos(Studio*&nbsp;studio,&nbsp;const&nbsp;tic_rect*&nbsp;rect)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_point&nbsp;pos&nbsp;=&nbsp;tic_api_mouse(studio-&gt;tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;pointInRect(&pos,&nbsp;rect);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;checkMouseClick(Studio*&nbsp;studio,&nbsp;const&nbsp;tic_rect*&nbsp;rect,&nbsp;tic_mouse_btn&nbsp;button)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MouseState*&nbsp;state&nbsp;=&nbsp;&studio-&gt;mouse.state[button];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;value&nbsp;=&nbsp;state-&gt;click
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;pointInRect(&state-&gt;start,&nbsp;rect)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;pointInRect(&state-&gt;end,&nbsp;rect);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(value)&nbsp;state-&gt;click&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;value;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;checkMouseDblClick(Studio*&nbsp;studio,&nbsp;const&nbsp;tic_rect*&nbsp;rect,&nbsp;tic_mouse_btn&nbsp;button)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MouseState*&nbsp;state&nbsp;=&nbsp;&studio-&gt;mouse.state[button];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;value&nbsp;=&nbsp;state-&gt;dbl.click
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;pointInRect(&state-&gt;start,&nbsp;rect)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;pointInRect(&state-&gt;end,&nbsp;rect);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(value)&nbsp;state-&gt;dbl.click&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;value;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;checkMouseDown(Studio*&nbsp;studio,&nbsp;const&nbsp;tic_rect*&nbsp;rect,&nbsp;tic_mouse_btn&nbsp;button)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MouseState*&nbsp;state&nbsp;=&nbsp;&studio-&gt;mouse.state[button];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;state-&gt;down&nbsp;&&&nbsp;pointInRect(&state-&gt;start,&nbsp;rect);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;setCursor(Studio*&nbsp;studio,&nbsp;tic_cursor&nbsp;id)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;VBANK(tic,&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;vram.vars.cursor.sprite&nbsp;=&nbsp;id;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
typedef&nbsp;struct
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;ConfirmCallback&nbsp;callback;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;void*&nbsp;data;
</div>
<div>
}&nbsp;ConfirmData;
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;confirmHandler(bool&nbsp;yes,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;ConfirmData*&nbsp;confirmData&nbsp;=&nbsp;data;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;SCOPE(free(confirmData))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio&nbsp;=&nbsp;confirmData-&gt;studio;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;menuMode&nbsp;==&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resumeGame(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;setStudioMode(studio,&nbsp;studio-&gt;menuMode);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmData-&gt;callback(studio,&nbsp;yes,&nbsp;confirmData-&gt;data);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;confirmNo(void*&nbsp;data,&nbsp;s32&nbsp;pos)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;confirmHandler(false,&nbsp;data);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;confirmYes(void*&nbsp;data,&nbsp;s32&nbsp;pos)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;confirmHandler(true,&nbsp;data);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;confirmDialog(Studio*&nbsp;studio,&nbsp;const&nbsp;char**&nbsp;text,&nbsp;s32&nbsp;rows,&nbsp;ConfirmCallback&nbsp;callback,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_MENU_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;menuMode&nbsp;=&nbsp;studio-&gt;mode;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_MENU_MODE);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;MenuItem&nbsp;Answers[]&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"",&nbsp;&nbsp;&nbsp;&nbsp;NULL},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"(N)O",&nbsp;&nbsp;confirmNo},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"(Y)ES",&nbsp;confirmYes},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Answers[1].hotkey&nbsp;=&nbsp;tic_key_n;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Answers[2].hotkey&nbsp;=&nbsp;tic_key_y;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;count&nbsp;=&nbsp;rows&nbsp;+&nbsp;COUNT_OF(Answers);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MenuItem*&nbsp;items&nbsp;=&nbsp;malloc(sizeof&nbsp;items[0]&nbsp;*&nbsp;count);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;SCOPE(free(items))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;!=&nbsp;rows;&nbsp;++i)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;items[i]&nbsp;=&nbsp;(MenuItem){text[i],&nbsp;NULL};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(items&nbsp;+&nbsp;rows,&nbsp;Answers,&nbsp;sizeof&nbsp;Answers);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio_menu_init(studio-&gt;menu,&nbsp;items,&nbsp;count,&nbsp;count&nbsp;-&nbsp;2,&nbsp;0,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;MOVE((ConfirmData){studio,&nbsp;callback,&nbsp;data}));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;playSystemSfx(studio,&nbsp;0);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;resetBanks(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;bank.indexes,&nbsp;0,&nbsp;sizeof&nbsp;studio-&gt;bank.indexes);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;initModules(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;resetBanks(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initCode(studio-&gt;code,&nbsp;studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_EDITOR_BANKS;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initSprite(studio-&gt;banks.sprite[i],&nbsp;studio,&nbsp;&tic-&gt;cart.banks[i].tiles);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initMap(studio-&gt;banks.map[i],&nbsp;studio,&nbsp;&tic-&gt;cart.banks[i].map);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initSfx(studio-&gt;banks.sfx[i],&nbsp;studio,&nbsp;&tic-&gt;cart.banks[i].sfx);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initMusic(studio-&gt;banks.music[i],&nbsp;studio,&nbsp;&tic-&gt;cart.banks[i].music);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initWorldMap(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;updateHash(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;md5(&studio-&gt;tic-&gt;cart,&nbsp;sizeof(tic_cartridge),&nbsp;studio-&gt;cart.hash.data);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;updateMDate(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;cart.mdate&nbsp;=&nbsp;fs_date(studio-&gt;console-&gt;rom.path);
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;updateTitle(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;name[TICNAME_MAX]&nbsp;=&nbsp;TIC_TITLE;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(strlen(studio-&gt;console-&gt;rom.name))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snprintf(name,&nbsp;TICNAME_MAX,&nbsp;"%s&nbsp;[%s]",&nbsp;TIC_TITLE,&nbsp;studio-&gt;console-&gt;rom.name);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_sys_title(name);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
bool&nbsp;project_ext(const&nbsp;char*&nbsp;name)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;FOREACH_LANG(script)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic_tool_has_ext(name,&nbsp;script-&gt;fileExtension))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
tic_cartridge*&nbsp;loadPngCart(png_buffer&nbsp;buffer)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;png_buffer&nbsp;zip&nbsp;=&nbsp;png_decode(buffer);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(zip.size)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;png_buffer&nbsp;buf&nbsp;=&nbsp;png_create(sizeof(tic_cartridge));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf.size&nbsp;=&nbsp;tic_tool_unzip(buf.data,&nbsp;buf.size,&nbsp;zip.data,&nbsp;zip.size);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(zip.data);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(buf.size)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_cartridge*&nbsp;cart&nbsp;=&nbsp;malloc(sizeof(tic_cartridge));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_cart_load(cart,&nbsp;buf.data,&nbsp;buf.size);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(buf.data);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;cart;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NULL;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studioRomSaved(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateTitle(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateHash(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateMDate(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studioRomLoaded(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initModules(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateTitle(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateHash(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateMDate(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
bool&nbsp;studioCartChanged(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;CartHash&nbsp;hash;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;md5(&studio-&gt;tic-&gt;cart,&nbsp;sizeof(tic_cartridge),&nbsp;hash.data);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;memcmp(hash.data,&nbsp;studio-&gt;cart.hash.data,&nbsp;sizeof(CartHash))&nbsp;!=&nbsp;0;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;runGame(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(studio-&gt;config-&gt;data.fft)&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;initialize&nbsp;FFT&nbsp;data&nbsp;structures
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fPeakMinValue&nbsp;=&nbsp;0.01f;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fPeakSmoothing&nbsp;=&nbsp;0.995f;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fPeakSmoothValue&nbsp;=&nbsp;0.0f;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fAmplification&nbsp;=&nbsp;1.0f;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(fftData,&nbsp;0,&nbsp;sizeof(fftData[0])&nbsp;*&nbsp;FFT_SIZE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(fftSmoothingData,&nbsp;0,&nbsp;sizeof(fftSmoothingData[0])&nbsp;*&nbsp;FFT_SIZE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(fftNormalizedData,&nbsp;0,&nbsp;sizeof(fftNormalizedData[0])&nbsp;*&nbsp;FFT_SIZE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(fftNormalizedMaxData,&nbsp;0,&nbsp;sizeof(fftNormalizedMaxData[0])&nbsp;*&nbsp;FFT_SIZE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;console-&gt;args.keepcmd&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;studio-&gt;console-&gt;commands.count
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;studio-&gt;console-&gt;commands.current&nbsp;&gt;=&nbsp;studio-&gt;console-&gt;commands.count)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console-&gt;commands.current&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CONSOLE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_reset(studio-&gt;tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initRunMode(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_RUN_MODE);
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_SURF_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;prevMode&nbsp;=&nbsp;TIC_SURF_MODE;
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
void&nbsp;saveProject(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(getConfig(studio)-&gt;trim)&nbsp;trimWhitespace(studio-&gt;code);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;CartSaveResult&nbsp;rom&nbsp;=&nbsp;studio-&gt;console-&gt;save(studio-&gt;console);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(rom&nbsp;==&nbsp;CART_SAVE_OK)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;buffer[STUDIO_TEXT_BUFFER_WIDTH];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;str_saved[]&nbsp;=&nbsp;"&nbsp;saved&nbsp;:)";
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;name_len&nbsp;=&nbsp;(s32)strlen(studio-&gt;console-&gt;rom.name);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(name_len&nbsp;+&nbsp;strlen(str_saved)&nbsp;&gt;&nbsp;sizeof(buffer)){
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;subbuf[sizeof(buffer)&nbsp;-&nbsp;sizeof(str_saved)&nbsp;-&nbsp;5];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(subbuf,&nbsp;'\0',&nbsp;sizeof&nbsp;subbuf);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strncpy(subbuf,&nbsp;studio-&gt;console-&gt;rom.name,&nbsp;sizeof&nbsp;subbuf-1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snprintf(buffer,&nbsp;sizeof&nbsp;buffer,&nbsp;"%s[...]%s",&nbsp;subbuf,&nbsp;str_saved);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snprintf(buffer,&nbsp;sizeof&nbsp;buffer,&nbsp;"%s%s",&nbsp;studio-&gt;console-&gt;rom.name,&nbsp;str_saved);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showPopupMessage(studio,&nbsp;buffer);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(rom&nbsp;==&nbsp;CART_SAVE_MISSING_NAME)&nbsp;showPopupMessage(studio,&nbsp;"error:&nbsp;missing&nbsp;cart&nbsp;name&nbsp;:(");
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;showPopupMessage(studio,&nbsp;"error:&nbsp;file&nbsp;not&nbsp;saved&nbsp;:(");
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;setCoverImage(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_sync(tic,&nbsp;tic_sync_screen,&nbsp;0,&nbsp;true);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showPopupMessage(studio,&nbsp;"cover&nbsp;image&nbsp;saved&nbsp;:)");
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;stopVideoRecord(Studio*&nbsp;studio,&nbsp;const&nbsp;char*&nbsp;name)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;MsfGifResult&nbsp;result&nbsp;=&nbsp;msf_gif_end(&studio-&gt;video.gif);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Find&nbsp;an&nbsp;available&nbsp;filename&nbsp;to&nbsp;save.
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;i&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;filename[TICNAME_MAX];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;do
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;snprintf(filename,&nbsp;sizeof&nbsp;filename,&nbsp;name,&nbsp;++i);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;while(tic_fs_exists(studio-&gt;fs,&nbsp;filename));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Now&nbsp;that&nbsp;it&nbsp;has&nbsp;found&nbsp;an&nbsp;available&nbsp;filename,&nbsp;save&nbsp;it.
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(tic_fs_save(studio-&gt;fs,&nbsp;filename,&nbsp;result.data,&nbsp;result.dataSize,&nbsp;true))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;msg[TICNAME_MAX];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf(msg,&nbsp;"%s&nbsp;saved&nbsp;:)",&nbsp;filename);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showPopupMessage(studio,&nbsp;msg);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_sys_open_path(tic_fs_path(studio-&gt;fs,&nbsp;filename));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;showPopupMessage(studio,&nbsp;"error:&nbsp;file&nbsp;not&nbsp;saved&nbsp;:(");
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;msf_gif_free(result);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.record&nbsp;=&nbsp;false;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;startVideoRecord(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;video.record)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopVideoRecord(studio,&nbsp;VideoGif);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.record&nbsp;=&nbsp;true;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.frame&nbsp;=&nbsp;0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;scale&nbsp;=&nbsp;studio-&gt;config-&gt;data.uiScale;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msf_gif_begin(&studio-&gt;video.gif,&nbsp;TIC80_FULLWIDTH&nbsp;*&nbsp;scale,&nbsp;TIC80_FULLHEIGHT&nbsp;*&nbsp;scale);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;takeScreenshot(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;startVideoRecord(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.screenshot&nbsp;=&nbsp;true;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;inline&nbsp;bool&nbsp;keyWasPressedOnce(Studio*&nbsp;studio,&nbsp;s32&nbsp;key)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tic_api_keyp(tic,&nbsp;key,&nbsp;-1,&nbsp;-1);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;gotoFullscreen(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_sys_fullscreen_set(studio-&gt;config-&gt;data.options.fullscreen&nbsp;=&nbsp;!tic_sys_fullscreen_get());
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(CRT_SHADER_SUPPORT)
</div>
<div>
static&nbsp;void&nbsp;switchCrtMonitor(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.options.crt&nbsp;=&nbsp;!studio-&gt;config-&gt;data.options.crt;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;u32&nbsp;getTime()
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tic_sys_counter_get()&nbsp;*&nbsp;1000&nbsp;/&nbsp;tic_sys_freq_get();
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;hideBattleTime(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.battle.hidetime&nbsp;=&nbsp;!studio-&gt;bytebattle.battle.hidetime;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;startBattle(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.battle.started&nbsp;=&nbsp;getTime();
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC80_PRO)
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;switchBank(Studio*&nbsp;studio,&nbsp;s32&nbsp;bank)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(BankModes);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(BankModes[i]&nbsp;==&nbsp;studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bank.chained)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memset(studio-&gt;bank.indexes,&nbsp;bank,&nbsp;sizeof&nbsp;studio-&gt;bank.indexes);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;studio-&gt;bank.indexes[i]&nbsp;=&nbsp;bank;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;gotoMenu(Studio*&nbsp;studio)&nbsp;
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_MENU_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio_mainmenu_free(studio-&gt;mainmenu);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mainmenu&nbsp;=&nbsp;studio_mainmenu_init(studio-&gt;menu,&nbsp;studio-&gt;config);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;bool&nbsp;enterWasPressedOnce(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;keyWasPressedOnce(studio,&nbsp;tic_key_return)&nbsp;||
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keyWasPressedOnce(studio,&nbsp;tic_key_numpadenter);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
static&nbsp;bool&nbsp;showGameMenu(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;tag[TICNAME_MAX];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;snprintf(tag,&nbsp;sizeof&nbsp;tag,&nbsp;"\n%s&nbsp;menu:",&nbsp;tic_get_script(tic)-&gt;singleComment);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;strstr(tic-&gt;cart.code.data,&nbsp;tag);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;processShortcuts(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_START_MODE)&nbsp;return;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(!studio-&gt;console-&gt;active)&nbsp;return;
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio_mainmenu_keyboard(studio-&gt;mainmenu))&nbsp;return;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;alt&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_alt);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;ctrl&nbsp;=&nbsp;tic_api_key(tic,&nbsp;tic_key_ctrl);
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(CRT_SHADER_SUPPORT)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f6))&nbsp;switchCrtMonitor(studio);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(alt)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(enterWasPressedOnce(studio))&nbsp;gotoFullscreen(studio);
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_grave))&nbsp;setStudioMode(studio,&nbsp;TIC_CONSOLE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_1))&nbsp;setStudioMode(studio,&nbsp;TIC_CODE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_2))&nbsp;setStudioMode(studio,&nbsp;TIC_SPRITE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_3))&nbsp;setStudioMode(studio,&nbsp;TIC_MAP_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_4))&nbsp;setStudioMode(studio,&nbsp;TIC_SFX_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_5))&nbsp;setStudioMode(studio,&nbsp;TIC_MUSIC_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(ctrl)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_q))&nbsp;studio_exit(studio);
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_pageup))&nbsp;changeStudioMode(studio,&nbsp;-1);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_pagedown))&nbsp;changeStudioMode(studio,&nbsp;+1);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(enterWasPressedOnce(studio))&nbsp;runGame(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_r))&nbsp;runGame(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_s))&nbsp;saveProject(studio);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC80_PRO)
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;bank&nbsp;=&nbsp;0;&nbsp;bank&nbsp;&lt;&nbsp;TIC_BANKS;&nbsp;bank++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_0&nbsp;+&nbsp;bank))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switchBank(studio,&nbsp;bank);
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(keyWasPressedOnce(studio,&nbsp;tic_key_f11))&nbsp;gotoFullscreen(studio);
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_escape))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getConfig(studio)-&gt;options.keybindMode&nbsp;==&nbsp;KEYBIND_VI
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&&&nbsp;getStudioViMode(studio)&nbsp;!=&nbsp;VI_NORMAL
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showGameMenu(studio)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;studio_menu_back(studio-&gt;menu)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;setStudioMode(studio,&nbsp;studio-&gt;prevMode&nbsp;==&nbsp;TIC_RUN_MODE&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;TIC_CONSOLE_MODE&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;studio-&gt;prevMode);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showGameMenu(studio)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;gotoMenu(studio)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;setStudioMode(studio,&nbsp;studio-&gt;prevMode&nbsp;==&nbsp;TIC_RUN_MODE&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;TIC_CONSOLE_MODE&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;studio-&gt;prevMode);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CONSOLE_MODE:&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CODE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CODE_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;code-&gt;mode&nbsp;!=&nbsp;TEXT_EDIT_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;code-&gt;escape(studio-&gt;code);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CONSOLE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f8))&nbsp;takeScreenshot(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f9))&nbsp;startVideoRecord(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f10))&nbsp;hideBattleTime(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f12))&nbsp;startBattle(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_RUN_MODE&nbsp;&&&nbsp;keyWasPressedOnce(studio,&nbsp;tic_key_f7))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCoverImage(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!showGameMenu(studio)&nbsp;||&nbsp;studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f1))&nbsp;setStudioMode(studio,&nbsp;TIC_CODE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f2))&nbsp;setStudioMode(studio,&nbsp;TIC_SPRITE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f3))&nbsp;setStudioMode(studio,&nbsp;TIC_MAP_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f4))&nbsp;setStudioMode(studio,&nbsp;TIC_SFX_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_f5))&nbsp;setStudioMode(studio,&nbsp;TIC_MUSIC_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(keyWasPressedOnce(studio,&nbsp;tic_key_escape))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:&nbsp;studio_menu_back(studio-&gt;menu);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:&nbsp;gotoMenu(studio);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;void&nbsp;reloadConfirm(Studio*&nbsp;studio,&nbsp;bool&nbsp;yes,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(yes)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console-&gt;updateProject(studio-&gt;console);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateMDate(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;checkChanges(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_START_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;default:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console*&nbsp;console&nbsp;=&nbsp;studio-&gt;console;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u64&nbsp;date&nbsp;=&nbsp;fs_date(console-&gt;rom.path);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;cart.mdate&nbsp;&&&nbsp;date&nbsp;&gt;&nbsp;studio-&gt;cart.mdate)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studioCartChanged(studio)&nbsp;&&&nbsp;studio-&gt;mode&nbsp;!=&nbsp;TIC_MENU_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char*&nbsp;Rows[]&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"WARNING!",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"The&nbsp;cart&nbsp;has&nbsp;changed!",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Do&nbsp;you&nbsp;want&nbsp;to&nbsp;reload&nbsp;it?"
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confirmDialog(studio,&nbsp;Rows,&nbsp;COUNT_OF(Rows),&nbsp;reloadConfirm,&nbsp;NULL);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;console-&gt;updateProject(console);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;drawBitIconRaw(Studio*&nbsp;studio,&nbsp;u32*&nbsp;frame,&nbsp;s32&nbsp;sx,&nbsp;s32&nbsp;sy,&nbsp;s32&nbsp;id,&nbsp;tic_color&nbsp;color)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_bank*&nbsp;bank&nbsp;=&nbsp;&getConfig(studio)-&gt;cart-&gt;bank0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;*dst&nbsp;=&nbsp;frame&nbsp;+&nbsp;sx&nbsp;+&nbsp;sy&nbsp;*&nbsp;TIC80_FULLWIDTH;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;src&nbsp;=&nbsp;0;&nbsp;src&nbsp;!=&nbsp;TIC_SPRITESIZE&nbsp;*&nbsp;TIC_SPRITESIZE;&nbsp;dst&nbsp;+=&nbsp;TIC80_FULLWIDTH&nbsp;-&nbsp;TIC_SPRITESIZE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;!=&nbsp;TIC_SPRITESIZE;&nbsp;++i,&nbsp;++dst)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic_tool_peek4(&bank-&gt;tiles.data[id].data,&nbsp;src++))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*dst&nbsp;=&nbsp;tic_rgba(&bank-&gt;palette.vbank0.colors[color]);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;drawRecordLabel(Studio*&nbsp;studio,&nbsp;u32*&nbsp;frame,&nbsp;s32&nbsp;sx,&nbsp;s32&nbsp;sy)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;drawBitIconRaw(studio,&nbsp;frame,&nbsp;sx,&nbsp;sy,&nbsp;tic_icon_rec,&nbsp;tic_color_red);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;drawBitIconRaw(studio,&nbsp;frame,&nbsp;sx&nbsp;+&nbsp;TIC_SPRITESIZE,&nbsp;sy,&nbsp;tic_icon_rec2,&nbsp;tic_color_red);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;bool&nbsp;isRecordFrame(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;video.record;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;recordFrame(Studio*&nbsp;studio,&nbsp;u32*&nbsp;pixels)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;video.record)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;video.frame&nbsp;%&nbsp;2&nbsp;==&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;scale&nbsp;=&nbsp;studio-&gt;config-&gt;data.uiScale;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;w&nbsp;=&nbsp;TIC80_FULLWIDTH&nbsp;*&nbsp;scale;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;h&nbsp;=&nbsp;TIC80_FULLHEIGHT&nbsp;*&nbsp;scale;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;*ptr&nbsp;=&nbsp;studio-&gt;video.buffer;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;u32&nbsp;*src&nbsp;=&nbsp;pixels;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;y&nbsp;=&nbsp;0;&nbsp;y&nbsp;&lt;&nbsp;h;&nbsp;y++,&nbsp;src&nbsp;=&nbsp;pixels&nbsp;+&nbsp;(y&nbsp;/&nbsp;scale)&nbsp;*&nbsp;TIC80_FULLWIDTH)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&nbsp;&lt;&nbsp;w;&nbsp;x++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*ptr++&nbsp;=&nbsp;src[x&nbsp;/&nbsp;scale];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;with&nbsp;centiSecondsPerFame&nbsp;==&nbsp;3&nbsp;we&nbsp;have&nbsp;1000/(3*10)=~33.3fps,&nbsp;so&nbsp;we&nbsp;have&nbsp;to&nbsp;save&nbsp;every&nbsp;second&nbsp;frame
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msf_gif_frame(&studio-&gt;video.gif,&nbsp;(u8*)studio-&gt;video.buffer,&nbsp;3,&nbsp;16,&nbsp;w&nbsp;*&nbsp;sizeof(u32));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;video.screenshot)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.screenshot&nbsp;=&nbsp;false;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopVideoRecord(studio,&nbsp;ScreenGif);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;video.frame&nbsp;%&nbsp;TIC80_FRAMERATE&nbsp;&lt;&nbsp;TIC80_FRAMERATE&nbsp;/&nbsp;2)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawRecordLabel(studio,&nbsp;pixels,&nbsp;TIC80_WIDTH&nbsp;-&nbsp;24,&nbsp;8);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.frame++;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;renderStudio(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;showTooltip(studio,&nbsp;"");
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_sfx*&nbsp;sfx&nbsp;=&nbsp;NULL;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_music*&nbsp;music&nbsp;=&nbsp;NULL;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx&nbsp;=&nbsp;&studio-&gt;tic-&gt;ram-&gt;sfx;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music&nbsp;=&nbsp;&studio-&gt;tic-&gt;ram-&gt;music;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_START_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SURF_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx&nbsp;=&nbsp;&studio-&gt;config-&gt;cart-&gt;bank0.sfx;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music&nbsp;=&nbsp;&studio-&gt;config-&gt;cart-&gt;bank0.music;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx&nbsp;=&nbsp;getSfxSrc(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music&nbsp;=&nbsp;getMusicSrc(studio);
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx2ram(tic-&gt;ram,&nbsp;sfx);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music2ram(tic-&gt;ram,&nbsp;music);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;restore&nbsp;mapping
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;tic-&gt;ram-&gt;mapping&nbsp;=&nbsp;getConfig(studio)-&gt;options.mapping;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_start(tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;SECURITY:&nbsp;It's&nbsp;important&nbsp;that&nbsp;this&nbsp;comes&nbsp;before&nbsp;`tick`&nbsp;and&nbsp;not&nbsp;after
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;to&nbsp;prevent&nbsp;misbehaving&nbsp;cartridges&nbsp;from&nbsp;having&nbsp;an&nbsp;opportunity&nbsp;to
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;tamper&nbsp;with&nbsp;the&nbsp;keyboard&nbsp;input.
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;processShortcuts(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;clear&nbsp;screen&nbsp;for&nbsp;all&nbsp;the&nbsp;modes&nbsp;except&nbsp;the&nbsp;Run&nbsp;mode
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VBANK(tic,&nbsp;1)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_api_cls(tic,&nbsp;0);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_START_MODE:&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;start-&gt;tick(studio-&gt;start);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;run-&gt;tick(studio-&gt;run);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio_menu_tick(studio-&gt;menu);&nbsp;break;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CONSOLE_MODE:&nbsp;&nbsp;studio-&gt;console-&gt;tick(studio-&gt;console);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_CODE_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code*&nbsp;code&nbsp;=&nbsp;studio-&gt;code;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code-&gt;tick(code);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SPRITE_MODE:&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sprite*&nbsp;sprite&nbsp;=&nbsp;studio-&gt;banks.sprite[studio-&gt;bank.index.sprites];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprite-&gt;tick(sprite);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MAP_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map*&nbsp;map&nbsp;=&nbsp;studio-&gt;banks.map[studio-&gt;bank.index.map];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map-&gt;tick(map);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SFX_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sfx*&nbsp;sfx&nbsp;=&nbsp;studio-&gt;banks.sfx[studio-&gt;bank.index.sfx];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfx-&gt;tick(sfx);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MUSIC_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Music*&nbsp;music&nbsp;=&nbsp;studio-&gt;banks.music[studio-&gt;bank.index.music];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;music-&gt;tick(music);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_WORLD_MODE:&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;world-&gt;tick(studio-&gt;world);&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SURF_MODE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;surf-&gt;tick(studio-&gt;surf);&nbsp;break;
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_core_tick_end(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;switch(studio-&gt;mode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_RUN_MODE:&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_SURF_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;TIC_MENU_MODE:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;input.data&nbsp;=&nbsp;-1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;default:
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;input.data&nbsp;=&nbsp;-1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;input.gamepad&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;updateSystemFont(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;systemFont&nbsp;=&nbsp;(tic_font)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.regular&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0&nbsp;},
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
		{
</div>
<div>
		&nbsp;&nbsp;&nbsp;&nbsp;.width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;TIC_FONT_WIDTH,
</div>
<div>
		&nbsp;&nbsp;&nbsp;&nbsp;.height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;TIC_FONT_HEIGHT,
</div>
<div>
		},
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.alt&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;0&nbsp;},
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
		{
</div>
<div>
		&nbsp;&nbsp;&nbsp;&nbsp;.width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;TIC_ALTFONT_WIDTH,
</div>
<div>
		&nbsp;&nbsp;&nbsp;&nbsp;.height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;TIC_FONT_HEIGHT,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
		},
</div>
<div>
	&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;u8*&nbsp;dst&nbsp;=&nbsp;(u8*)&studio-&gt;systemFont;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_FONT_CHARS&nbsp;*&nbsp;2;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;y&nbsp;=&nbsp;0;&nbsp;y&nbsp;&lt;&nbsp;TIC_SPRITESIZE;&nbsp;y++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;x&nbsp;=&nbsp;0;&nbsp;x&nbsp;&lt;&nbsp;TIC_SPRITESIZE;&nbsp;x++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic_tool_peek4(&studio-&gt;config-&gt;cart-&gt;bank0.sprites.data[i],&nbsp;TIC_SPRITESIZE*y&nbsp;+&nbsp;x))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dst[i*BITS_IN_BYTE+y]&nbsp;|=&nbsp;1&nbsp;&lt;&lt;&nbsp;x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;font&nbsp;=&nbsp;studio-&gt;systemFont;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studioConfigChanged(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Code*&nbsp;code&nbsp;=&nbsp;studio-&gt;code;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(code-&gt;update)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code-&gt;update(code);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;scale&nbsp;=&nbsp;studio-&gt;config-&gt;data.uiScale;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;video.buffer&nbsp;=&nbsp;realloc(studio-&gt;video.buffer,&nbsp;TIC80_FULLWIDTH&nbsp;*&nbsp;scale&nbsp;*&nbsp;TIC80_FULLHEIGHT&nbsp;*&nbsp;scale&nbsp;*&nbsp;sizeof(u32));
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;updateSystemFont(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_sys_update_config();
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;processMouseStates(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(studio-&gt;mouse.state);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mouse.state[i].dbl.click&nbsp;=&nbsp;studio-&gt;mouse.state[i].click&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;vram.vars.cursor.sprite&nbsp;=&nbsp;tic_cursor_arrow;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;vram.vars.cursor.system&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;COUNT_OF(studio-&gt;mouse.state);&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MouseState*&nbsp;state&nbsp;=&nbsp;&studio-&gt;mouse.state[i];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;down&nbsp;=&nbsp;tic-&gt;ram-&gt;input.mouse.btns&nbsp;&&nbsp;(1&nbsp;&lt;&lt;&nbsp;i);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!state-&gt;down&nbsp;&&&nbsp;down)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;down&nbsp;=&nbsp;true;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;start&nbsp;=&nbsp;tic_api_mouse(tic);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(state-&gt;down&nbsp;&&&nbsp;!down)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;end&nbsp;=&nbsp;tic_api_mouse(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;click&nbsp;=&nbsp;true;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;down&nbsp;=&nbsp;false;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;dbl.click&nbsp;=&nbsp;state-&gt;dbl.ticks&nbsp;-&nbsp;state-&gt;dbl.start&nbsp;&lt;&nbsp;1000&nbsp;/&nbsp;TIC80_FRAMERATE;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;dbl.start&nbsp;=&nbsp;state-&gt;dbl.ticks;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-&gt;dbl.ticks++;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;input.mouse.scrollx&nbsp;*=&nbsp;-1;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;void&nbsp;doCodeExport(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;pos[sizeof&nbsp;studio-&gt;bytebattle.last.postag];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;x&nbsp;=&nbsp;0,&nbsp;y&nbsp;=&nbsp;0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codeGetPos(studio-&gt;code,&nbsp;&x,&nbsp;&y);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++;&nbsp;y++;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf(pos,&nbsp;"--&nbsp;pos:&nbsp;%i,%i\n",&nbsp;x,&nbsp;y);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(strcmp(studio-&gt;bytebattle.last.postag,&nbsp;pos)&nbsp;||&nbsp;strcmp(studio-&gt;bytebattle.last.code.data,&nbsp;studio-&gt;code-&gt;src))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FILE*&nbsp;file&nbsp;=&nbsp;fopen(studio-&gt;bytebattle.exp,&nbsp;"wb");
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(file)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcpy(studio-&gt;bytebattle.last.postag,&nbsp;pos);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcpy(studio-&gt;bytebattle.last.code.data,&nbsp;studio-&gt;code-&gt;src);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fwrite(pos,&nbsp;1,&nbsp;strlen(pos),&nbsp;file);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fwrite(studio-&gt;code-&gt;src,&nbsp;1,&nbsp;strlen(studio-&gt;code-&gt;src),&nbsp;file);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fclose(file);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;doCodeImport(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;FILE*&nbsp;file&nbsp;=&nbsp;fopen(studio-&gt;bytebattle.imp,&nbsp;"rb");
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(file)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;tic_code&nbsp;code;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code.data[fread(code.data,&nbsp;1,&nbsp;sizeof(tic_code),&nbsp;file)]&nbsp;=&nbsp;'\0';
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;end&nbsp;=&nbsp;strchr(code.data,&nbsp;'\n');
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(end)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char&nbsp;PosTag[]&nbsp;=&nbsp;"--&nbsp;pos:&nbsp;";
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum{TagSize&nbsp;=&nbsp;sizeof&nbsp;PosTag&nbsp;-&nbsp;1};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(memcmp(code.data,&nbsp;PosTag,&nbsp;TagSize)&nbsp;==&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;start&nbsp;=&nbsp;code.data&nbsp;+&nbsp;TagSize;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char*&nbsp;sep&nbsp;=&nbsp;strchr(start,&nbsp;',');
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(sep)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*sep&nbsp;=&nbsp;*end&nbsp;=&nbsp;'\0';
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;x&nbsp;=&nbsp;atoi(start);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;y&nbsp;=&nbsp;atoi(sep&nbsp;+&nbsp;1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(x&nbsp;==&nbsp;0&nbsp;&&&nbsp;y&nbsp;==&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runGame(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;offset&nbsp;=&nbsp;end&nbsp;-&nbsp;code.data&nbsp;+&nbsp;1;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(studio-&gt;code-&gt;src,&nbsp;code.data&nbsp;+&nbsp;offset,&nbsp;sizeof(tic_code)&nbsp;-&nbsp;offset);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codeSetPos(studio-&gt;code,&nbsp;x&nbsp;-&nbsp;1,&nbsp;y&nbsp;-&nbsp;1);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;==&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CODE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fclose(file);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;blitCursor(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic80_mouse*&nbsp;m&nbsp;=&nbsp;&tic-&gt;ram-&gt;input.mouse;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(tic-&gt;input.mouse&nbsp;&&&nbsp;!m-&gt;relative&nbsp;&&&nbsp;(s32)m-&gt;x&nbsp;&lt;&nbsp;TIC80_FULLWIDTH&nbsp;&&&nbsp;(s32)m-&gt;y&nbsp;&lt;&nbsp;TIC80_FULLHEIGHT)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;sprite&nbsp;=&nbsp;CLAMP(tic-&gt;ram-&gt;vram.vars.cursor.sprite,&nbsp;0,&nbsp;TIC_BANK_SPRITES&nbsp;-&nbsp;1);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_bank*&nbsp;bank&nbsp;=&nbsp;&tic-&gt;cart.bank0;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_point&nbsp;hot&nbsp;=&nbsp;{0};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(tic-&gt;ram-&gt;vram.vars.cursor.system)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bank&nbsp;=&nbsp;&getConfig(studio)-&gt;cart-&gt;bank0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hot&nbsp;=&nbsp;(tic_point[])
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{0,&nbsp;0},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{3,&nbsp;0},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{2,&nbsp;3},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}[CLAMP(sprite,&nbsp;0,&nbsp;2)];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(sprite&nbsp;==&nbsp;0)&nbsp;return;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_palette*&nbsp;pal&nbsp;=&nbsp;&bank-&gt;palette.vbank0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_tile*&nbsp;tile&nbsp;=&nbsp;&bank-&gt;sprites.data[sprite];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_point&nbsp;s&nbsp;=&nbsp;{m-&gt;x&nbsp;-&nbsp;hot.x,&nbsp;m-&gt;y&nbsp;-&nbsp;hot.y};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32*&nbsp;dst&nbsp;=&nbsp;tic-&gt;product.screen&nbsp;+&nbsp;TIC80_FULLWIDTH&nbsp;*&nbsp;s.y&nbsp;+&nbsp;s.x;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;y&nbsp;=&nbsp;s.y,&nbsp;endy&nbsp;=&nbsp;MIN(y&nbsp;+&nbsp;TIC_SPRITESIZE,&nbsp;TIC80_FULLHEIGHT),&nbsp;i&nbsp;=&nbsp;0;&nbsp;y&nbsp;!=&nbsp;endy;&nbsp;++y,&nbsp;dst&nbsp;+=&nbsp;TIC80_FULLWIDTH&nbsp;-&nbsp;TIC_SPRITESIZE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;x&nbsp;=&nbsp;s.x,&nbsp;endx&nbsp;=&nbsp;x&nbsp;+&nbsp;TIC_SPRITESIZE;&nbsp;x&nbsp;!=&nbsp;endx;&nbsp;++x,&nbsp;++i,&nbsp;++dst)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(x&nbsp;&lt;&nbsp;TIC80_FULLWIDTH)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u8&nbsp;c&nbsp;=&nbsp;tic_tool_peek4(tile-&gt;data,&nbsp;i);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(c)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*dst&nbsp;=&nbsp;tic_rgba(&pal-&gt;colors[c]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
tic_mem*&nbsp;getMemory(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;tic;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
const&nbsp;tic_mem*&nbsp;studio_mem(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;getMemory(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studio_tick(Studio*&nbsp;studio,&nbsp;tic80_input&nbsp;input)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;input&nbsp;=&nbsp;input;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;processAnim(studio-&gt;anim.movie,&nbsp;studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;checkChanges(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_net_start(studio-&gt;net);
</div>
<div>
#endif
</div>
<div>
&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;toolbarMode)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;studio-&gt;toolbarMode);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;toolbarMode&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;processMouseStates(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;renderStudio(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sprite*&nbsp;sprite&nbsp;=&nbsp;studio-&gt;banks.sprite[studio-&gt;bank.index.sprites];
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map*&nbsp;map&nbsp;=&nbsp;studio-&gt;banks.map[studio-&gt;bank.index.map];
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_blit_callback&nbsp;callback[TIC_MODES_COUNT]&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[TIC_MENU_MODE]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{studio_menu_anim_scanline,&nbsp;NULL,&nbsp;NULL,&nbsp;studio-&gt;menu},
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[TIC_SPRITE_MODE]&nbsp;&nbsp;&nbsp;=&nbsp;{sprite-&gt;scanline,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;NULL,&nbsp;sprite},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[TIC_MAP_MODE]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{map-&gt;scanline,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;NULL,&nbsp;map},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[TIC_WORLD_MODE]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{studio-&gt;world-&gt;scanline,&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;NULL,&nbsp;studio-&gt;world},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[TIC_SURF_MODE]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;{studio-&gt;surf-&gt;scanline,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,&nbsp;NULL,&nbsp;studio-&gt;surf},
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;mode&nbsp;!=&nbsp;TIC_RUN_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcpy(tic-&gt;ram-&gt;vram.palette.data,&nbsp;getConfig(studio)-&gt;cart-&gt;bank0.palette.vbank0.data,&nbsp;sizeof(tic_palette));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic-&gt;ram-&gt;font&nbsp;=&nbsp;studio-&gt;systemFont;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback[studio-&gt;mode].data
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;tic_core_blit_ex(tic,&nbsp;callback[studio-&gt;mode])
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;tic_core_blit(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blitCursor(studio);
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isRecordFrame(studio))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recordFrame(studio,&nbsp;tic-&gt;product.screen);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawPopup(studio);
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_net_end(studio-&gt;net);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bytebattle*&nbsp;bb&nbsp;=&nbsp;&(studio-&gt;bytebattle);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bb-&gt;battle.started)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u32&nbsp;passed&nbsp;=&nbsp;getTime()&nbsp;-&nbsp;bb-&gt;battle.started;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb-&gt;battle.left&nbsp;=&nbsp;bb-&gt;battle.time&nbsp;-&nbsp;passed;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bb-&gt;battle.left&nbsp;&gt;&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;delta&nbsp;=&nbsp;bb-&gt;battle.time&nbsp;/&nbsp;(bb-&gt;limit.upper&nbsp;-&nbsp;bb-&gt;limit.lower);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb-&gt;limit.current&nbsp;=&nbsp;bb-&gt;limit.upper&nbsp;-&nbsp;passed&nbsp;/&nbsp;delta;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb-&gt;battle.left&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb-&gt;limit.current&nbsp;=&nbsp;bb-&gt;limit.lower;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bb-&gt;delay)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bb-&gt;ticks++&nbsp;&lt;&nbsp;bb-&gt;delay)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(bb-&gt;exp)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doCodeExport(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(bb-&gt;imp)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doCodeImport(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb-&gt;ticks&nbsp;=&nbsp;0;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studio_sound(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_mem*&nbsp;tic&nbsp;=&nbsp;studio-&gt;tic;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_core_synth_sound(tic);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;volume&nbsp;=&nbsp;getConfig(studio)-&gt;options.volume;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(volume&nbsp;!=&nbsp;MAX_VOLUME)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s32&nbsp;size&nbsp;=&nbsp;tic-&gt;product.samples.count;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s16*&nbsp;it&nbsp;=&nbsp;tic-&gt;product.samples.buffer,&nbsp;*end&nbsp;=&nbsp;it&nbsp;+&nbsp;size;&nbsp;it&nbsp;!=&nbsp;end;&nbsp;++it)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*it&nbsp;=&nbsp;*it&nbsp;*&nbsp;volume&nbsp;/&nbsp;MAX_VOLUME;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
static&nbsp;void&nbsp;onStudioLoadConfirmed(Studio*&nbsp;studio,&nbsp;bool&nbsp;yes,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(yes)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char*&nbsp;file&nbsp;=&nbsp;data;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showPopupMessage(studio,&nbsp;studio-&gt;console-&gt;loadCart(studio-&gt;console,&nbsp;file)&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;"cart&nbsp;successfully&nbsp;loaded&nbsp;:)"
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;"error:&nbsp;cart&nbsp;not&nbsp;loaded&nbsp;:(");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;confirmLoadCart(Studio*&nbsp;studio,&nbsp;ConfirmCallback&nbsp;callback,&nbsp;void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char*&nbsp;Warning[]&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"WARNING!",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"You&nbsp;have&nbsp;unsaved&nbsp;changes",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Do&nbsp;you&nbsp;really&nbsp;want&nbsp;to&nbsp;load&nbsp;cart?",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;confirmDialog(studio,&nbsp;Warning,&nbsp;COUNT_OF(Warning),&nbsp;callback,&nbsp;data);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
void&nbsp;studio_load(Studio*&nbsp;studio,&nbsp;const&nbsp;char*&nbsp;file)
</div>
<div>
{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studioCartChanged(studio)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;confirmLoadCart(studio,&nbsp;onStudioLoadConfirmed,&nbsp;(void*)file)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;onStudioLoadConfirmed(studio,&nbsp;true,&nbsp;(void*)file);
</div>
<div>
#endif
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;exitGame(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;prevMode&nbsp;==&nbsp;TIC_SURF_MODE)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_SURF_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CONSOLE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
void&nbsp;studio_delete(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_EDITOR_BANKS;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeSprite&nbsp;&nbsp;(studio-&gt;banks.sprite[i]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeMap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(studio-&gt;banks.map[i]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeSfx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(studio-&gt;banks.sfx[i]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeMusic&nbsp;&nbsp;&nbsp;(studio-&gt;banks.music[i]);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeCode&nbsp;&nbsp;&nbsp;&nbsp;(studio-&gt;code);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeConsole&nbsp;(studio-&gt;console);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeWorld&nbsp;&nbsp;&nbsp;(studio-&gt;world);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeSurf&nbsp;&nbsp;&nbsp;&nbsp;(studio-&gt;surf);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FREE(studio-&gt;anim.show.items);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FREE(studio-&gt;anim.hide.items);
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeStart&nbsp;&nbsp;&nbsp;(studio-&gt;start);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeRun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(studio-&gt;run);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freeConfig&nbsp;&nbsp;(studio-&gt;config);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio_mainmenu_free(studio-&gt;mainmenu);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio_menu_free(studio-&gt;menu);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_core_close(studio-&gt;tic);
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_net_close(studio-&gt;net);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;free(studio-&gt;video.buffer);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bytebattle.exp)&nbsp;free(studio-&gt;bytebattle.exp);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(studio-&gt;bytebattle.imp)&nbsp;free(studio-&gt;bytebattle.imp);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;free(studio-&gt;fs);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;free(studio);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
Bytebattle*&nbsp;getBytebattle(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;bytebattle.exp&nbsp;||&nbsp;studio-&gt;bytebattle.imp&nbsp;?&nbsp;&(studio-&gt;bytebattle)&nbsp;:&nbsp;NULL;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
static&nbsp;StartArgs&nbsp;parseArgs(s32&nbsp;argc,&nbsp;char&nbsp;**argv)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;char&nbsp;*const&nbsp;usage[]&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tic80&nbsp;[cart]&nbsp;[options]",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;StartArgs&nbsp;args&nbsp;=&nbsp;{0};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;args.volume&nbsp;=&nbsp;-1;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;args.lowerlimit&nbsp;=&nbsp;256;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;args.upperlimit&nbsp;=&nbsp;512;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;args.fftlist&nbsp;=&nbsp;0;
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;argparse_option&nbsp;options[]&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_HELP(),
</div>
<div>
#define&nbsp;CMD_PARAMS_DEF(name,&nbsp;ctype,&nbsp;type,&nbsp;post,&nbsp;help)&nbsp;OPT_##type('\0',&nbsp;#name,&nbsp;&args.name,&nbsp;help),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CMD_PARAMS_LIST(CMD_PARAMS_DEF)
</div>
<div>
#undef&nbsp;&nbsp;CMD_PARAMS_DEF
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_GROUP("Byte&nbsp;battle&nbsp;options:\n"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_STRING('\0',&nbsp;&nbsp;&nbsp;&nbsp;"codeexport",&nbsp;&nbsp;&nbsp;&nbsp;&args.codeexport,&nbsp;&nbsp;&nbsp;"export&nbsp;code&nbsp;to&nbsp;filename"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_STRING('\0',&nbsp;&nbsp;&nbsp;&nbsp;"codeimport",&nbsp;&nbsp;&nbsp;&nbsp;&args.codeimport,&nbsp;&nbsp;&nbsp;"import&nbsp;code&nbsp;from&nbsp;filename"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_INTEGER('\0',&nbsp;&nbsp;&nbsp;"delay",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&args.delay,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"codeexport&nbsp;/&nbsp;codeimport&nbsp;update&nbsp;interval&nbsp;in&nbsp;ticks"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_INTEGER('\0',&nbsp;&nbsp;&nbsp;"lowerlimit",&nbsp;&nbsp;&nbsp;&nbsp;&args.lowerlimit,&nbsp;&nbsp;&nbsp;"lower&nbsp;limit&nbsp;for&nbsp;code&nbsp;size&nbsp;(256&nbsp;by&nbsp;default)"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_INTEGER('\0',&nbsp;&nbsp;&nbsp;"upperlimit",&nbsp;&nbsp;&nbsp;&nbsp;&args.upperlimit,&nbsp;&nbsp;&nbsp;"upper&nbsp;limit&nbsp;for&nbsp;code&nbsp;size&nbsp;(512&nbsp;by&nbsp;default)"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_INTEGER('\0',&nbsp;&nbsp;&nbsp;"battletime",&nbsp;&nbsp;&nbsp;&nbsp;&args.battletime,&nbsp;&nbsp;&nbsp;"battletime&nbsp;in&nbsp;minutes"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_GROUP("FFT&nbsp;options:\n"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_BOOLEAN('\0',&nbsp;"fft",&nbsp;&args.fft,&nbsp;"enable&nbsp;FFT&nbsp;support"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_BOOLEAN('\0',&nbsp;"fftlist",&nbsp;&args.fftlist,&nbsp;"list&nbsp;FFT&nbsp;devices"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_BOOLEAN('\0',&nbsp;"fftcaptureplaybackdevices",&nbsp;&args.fftcaptureplaybackdevices,&nbsp;"Capture&nbsp;playback&nbsp;devices&nbsp;for&nbsp;loopback&nbsp;(Windows&nbsp;only)"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_STRING('\0',&nbsp;"fftdevice",&nbsp;&args.fftdevice,&nbsp;"name&nbsp;of&nbsp;the&nbsp;device&nbsp;to&nbsp;use&nbsp;with&nbsp;FFT"),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OPT_END(),
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;argparse&nbsp;argparse;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;argparse_init(&argparse,&nbsp;options,&nbsp;usage,&nbsp;0);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;argparse_describe(&argparse,&nbsp;"\n"&nbsp;TIC_NAME&nbsp;"&nbsp;startup&nbsp;options:",&nbsp;NULL);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;argc&nbsp;=&nbsp;argparse_parse(&argparse,&nbsp;argc,&nbsp;(const&nbsp;char**)argv);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(argc&nbsp;==&nbsp;1)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.cart&nbsp;=&nbsp;argv[0];
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;args;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;setIdle(void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio&nbsp;=&nbsp;data;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.movie&nbsp;=&nbsp;resetMovie(&studio-&gt;anim.idle);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;setPopupWait(void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio&nbsp;=&nbsp;data;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.movie&nbsp;=&nbsp;resetMovie(&studio-&gt;anim.wait);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
static&nbsp;void&nbsp;setPopupHide(void*&nbsp;data)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio&nbsp;=&nbsp;data;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.movie&nbsp;=&nbsp;resetMovie(&studio-&gt;anim.hide);
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
bool&nbsp;studio_alive(Studio*&nbsp;studio)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio-&gt;alive;
</div>
<div>
}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC_MODULE_EXT)
</div>
<div>
static&nbsp;bool&nbsp;onEnumModule(const&nbsp;char*&nbsp;name,&nbsp;const&nbsp;char*&nbsp;title,&nbsp;const&nbsp;char*&nbsp;hash,&nbsp;s32&nbsp;id,&nbsp;void*&nbsp;data,&nbsp;bool&nbsp;dir)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(strstr(name,&nbsp;TIC_MODULE_EXT))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void*&nbsp;module&nbsp;=&nbsp;dlopen(name,&nbsp;RTLD_NOW&nbsp;|&nbsp;RTLD_LOCAL);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(module)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;tic_script&nbsp;*config&nbsp;=&nbsp;dlsym(module,&nbsp;DEF2STR(SCRIPT_CONFIG));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(config)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tic_add_script(config);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dlclose(module);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</div>
<div>
}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
Studio*&nbsp;studio_create(s32&nbsp;argc,&nbsp;char&nbsp;**argv,&nbsp;s32&nbsp;samplerate,&nbsp;tic80_pixel_color_format&nbsp;format,&nbsp;const&nbsp;char*&nbsp;folder,&nbsp;s32&nbsp;maxscale)
</div>
<div>
{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;setbuf(stdout,&nbsp;NULL);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;StartArgs&nbsp;args&nbsp;=&nbsp;parseArgs(argc,&nbsp;argv);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(args.version)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("%s\n",&nbsp;TIC_VERSION);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(0);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(TIC_MODULE_EXT)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;load&nbsp;script&nbsp;modules
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;fs_enum(fs_appfolder(),&nbsp;onEnumModule,&nbsp;NULL);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;Studio*&nbsp;studio&nbsp;=&nbsp;NEW(Studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;*studio&nbsp;=&nbsp;(Studio)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mode&nbsp;=&nbsp;TIC_START_MODE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.prevMode&nbsp;=&nbsp;TIC_CODE_MODE,
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.menuMode&nbsp;=&nbsp;TIC_CONSOLE_MODE,
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.bank&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.chained&nbsp;=&nbsp;true,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.anim&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.pos&nbsp;=&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.popup&nbsp;=&nbsp;-TOOLBAR_SIZE,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.idle&nbsp;=&nbsp;{.done&nbsp;=&nbsp;emptyDone,}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.popup&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.message&nbsp;=&nbsp;"\0",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.tooltip&nbsp;=
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.text&nbsp;=&nbsp;"\0",
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.samplerate&nbsp;=&nbsp;samplerate,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.net&nbsp;=&nbsp;tic_net_create(TIC_WEBSITE),
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.bytebattle&nbsp;=&nbsp;{0},
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.tic&nbsp;=&nbsp;tic_core_create(samplerate,&nbsp;format),
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;};
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;char&nbsp;*path&nbsp;=&nbsp;args.fs&nbsp;?&nbsp;args.fs&nbsp;:&nbsp;folder;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(fs_exists(path))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;fs&nbsp;=&nbsp;tic_fs_create(path,&nbsp;
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;net
</div>
<div>
#else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL
</div>
<div>
#endif
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&nbsp;"error:&nbsp;folder&nbsp;`%s`&nbsp;doesn't&nbsp;exist\n",&nbsp;path);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(1);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(s32&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;TIC_EDITOR_BANKS;&nbsp;i++)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;banks.sprite[i]&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Sprite));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;banks.map[i]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Map));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;banks.sfx[i]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Sfx));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;banks.music[i]&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Music));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Code));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Console));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;world&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(World));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;surf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Surf));
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.show&nbsp;=&nbsp;(Movie)MOVIE_DEF(STUDIO_ANIM_TIME,&nbsp;setPopupWait,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{-TOOLBAR_SIZE,&nbsp;0,&nbsp;STUDIO_ANIM_TIME,&nbsp;&studio-&gt;anim.pos.popup,&nbsp;AnimEaseIn},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.wait&nbsp;=&nbsp;(Movie){.time&nbsp;=&nbsp;TIC80_FRAMERATE&nbsp;*&nbsp;2,&nbsp;.done&nbsp;=&nbsp;setPopupHide};
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.hide&nbsp;=&nbsp;(Movie)MOVIE_DEF(STUDIO_ANIM_TIME,&nbsp;setIdle,
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{0,&nbsp;-TOOLBAR_SIZE,&nbsp;STUDIO_ANIM_TIME,&nbsp;&studio-&gt;anim.pos.popup,&nbsp;AnimEaseIn},
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;anim.movie&nbsp;=&nbsp;resetMovie(&studio-&gt;anim.idle);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Start));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Run));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;menu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;studio_menu_create(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;calloc(1,&nbsp;sizeof(Config));
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;mainmenu&nbsp;=&nbsp;NULL;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_fs_makedir(studio-&gt;fs,&nbsp;TIC_LOCAL);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;tic_fs_makedir(studio-&gt;fs,&nbsp;TIC_LOCAL_VERSION);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initConfig(studio-&gt;config,&nbsp;studio,&nbsp;studio-&gt;fs);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(studio-&gt;config-&gt;data.uiScale&nbsp;&gt;&nbsp;maxscale)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Overriding&nbsp;specified&nbsp;uiScale&nbsp;of&nbsp;%i;&nbsp;the&nbsp;maximum&nbsp;your&nbsp;screen&nbsp;will&nbsp;accommodate&nbsp;is&nbsp;%i",&nbsp;studio-&gt;config-&gt;data.uiScale,&nbsp;maxscale);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.uiScale&nbsp;=&nbsp;maxscale;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initStart(studio-&gt;start,&nbsp;studio,&nbsp;args.cart);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initRunMode(studio);
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initConsole(studio-&gt;console,&nbsp;studio,&nbsp;studio-&gt;fs,&nbsp;studio-&gt;net,&nbsp;studio-&gt;config,&nbsp;args);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initSurfMode(studio);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;initModules(studio);
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(args.scale)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.uiScale&nbsp;=&nbsp;args.scale;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(args.volume&nbsp;&gt;=&nbsp;0)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.options.volume&nbsp;=&nbsp;args.volume&nbsp;&&nbsp;0x0f;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(CRT_SHADER_SUPPORT)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.options.crt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=&nbsp;args.crt;
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.options.fullscreen&nbsp;|=&nbsp;args.fullscreen;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.options.vsync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=&nbsp;args.vsync;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.soft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=&nbsp;args.soft;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.cli&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=&nbsp;args.cli;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(args.codeexport)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.exp&nbsp;=&nbsp;strdup(args.codeexport);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if(args.codeimport)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.imp&nbsp;=&nbsp;strdup(args.codeimport);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.delay&nbsp;=&nbsp;args.delay;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.limit.lower&nbsp;=&nbsp;args.lowerlimit;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.limit.current
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;studio-&gt;bytebattle.limit.upper&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;args.upperlimit;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;bytebattle.battle.left&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;studio-&gt;bytebattle.battle.time&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;args.battletime&nbsp;*&nbsp;60&nbsp;*&nbsp;1000;
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(args.fftlist)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FFT_EnumerateDevices();
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(0);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.fft&nbsp;=&nbsp;args.fft;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.fftcaptureplaybackdevices&nbsp;=&nbsp;args.fftcaptureplaybackdevices;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;config-&gt;data.fftdevice&nbsp;=&nbsp;args.fftdevice;
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;studioConfigChanged(studio);
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(args.cli)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args.skip&nbsp;=&nbsp;true;
</div>
<div>
<br>
</div>
<div>
#if&nbsp;defined(BUILD_EDITORS)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;if(args.skip)
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(getBytebattle(studio))
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;studio-&gt;console-&gt;tick(studio-&gt;console);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gotoCode(studio);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setStudioMode(studio,&nbsp;TIC_CONSOLE_MODE);
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;}
</div>
<div>
#endif
</div>
<div>
<br>
</div>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;studio;
</div>
<div>
}
</div>
</div>
</div></div>
</body>
</html>
</p>
