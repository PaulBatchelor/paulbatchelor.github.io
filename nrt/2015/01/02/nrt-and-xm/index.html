<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
	<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
	<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
    <title>Paul Batchelor : 9 ways to NRT, part 5: Generating Milkytracker files with NRT</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="This is the homepage of Paul Batchelor">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/menu.css">

</head>


    <body>

    <header class="site-header">
<div id='cssmenu'>
<ul>
   <li><a href="/">
   <span>Home</span></a></li>
   <li><a href="/about">
   <span>About</span></a></li>
   <li><a href="/portfolio">
   <span>Portfolio</span></a></li>
   <li><a href="/blog">
   <span>Blog</span></a></li>
   <li><a href="/contact">
   <span>Contact</span></a></li>
</ul>
</div>
</header>


    <div class="page-content">
      <div class="wrap">
        <header class="post-header">
    <h1>9 ways to NRT, part 5: Generating Milkytracker files with NRT</h1>
    <p class="meta">Jan 2, 2015</p>
  </header>

  <article class="post-content">
  <p>Welcome to Part 5 of <a href="/nrt/2014/12/19/nrt-syntax/">9 Ways to NRT</a></p>

<p>Today, NRT will be used to generate XM files, which are the native file format
for the fasttracker 2 inspired music tracker Milkytracker. </p>

<p>The main program used in generating the XM files is 
<a href="/portfolio/xmt_page.html">libXMT</a>, a Lua library I wrote a few months. Using XMT,
I wrote a lua script that could parse the output of NRT and write the note information to 
an XM file.  </p>

<p>The cool thing about the XM file format is that it is a self-contained piece
of music with a very small footprint. It was a music format made for an age where 
CPU resources were quite limited.  XM can embedded samples and wavetable 
synthesizers inside of itself. Conceptually, it is a lot like a MIDI file with sounds. 
The script I made programatically creates a squarewave synthesizer that plays
the NRT notes. </p>

<p>Using the <code>nrt2xm</code> program, one could use it with NRT in the following
way with this bash script:</p>

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>
<span class="nv">nrt_string</span><span class="o">=</span><span class="s2">&quot;d4. r8 m s | t4 s m | r2 t4 | (D2. m s)&quot;</span>
<span class="nv">BPM</span><span class="o">=</span>120
<span class="nv">offset</span><span class="o">=</span>70
<span class="nb">echo</span> <span class="nv">$nrt_string</span> <span class="p">|</span> nrt -F<span class="s1">&#39; &#39;</span> <span class="p">|</span> sort -n <span class="p">|</span> ./nrt2xm out.xm <span class="nv">$BPM</span> <span class="nv">$offset</span></code></pre></div>

<p>The NRT program uses the ‘-F’ flag to change the separator from the default comma 
to a space. This is done so the notes can be sorted chronologically with the Unix 
command <code>sort</code> before being fed into the lua script <code>nrt2xm</code></p>

<p>Running this script generates a file called “out.xm”, opening it up in Milkytracker
gives you a pattern that looks like this:</p>

<p><img src="/res/nineways/milkyshot.png" /></p>

<p>All code can be found on the 9 ways to NRT 
<a href="http://www.github.com/paulbatchelor/NineWaysToNRT">github</a></p>

<p>The nrt2xm program, while absolutely functional for basic NRT notation, is definitely 
proof-of-concept and should be modified for any serious needs. </p>

  </article>

      </div>
    </div>

    <div class = "site-footer">

    Copyright 2014 Paul Batchelor

</div>


    </body>
</html>
