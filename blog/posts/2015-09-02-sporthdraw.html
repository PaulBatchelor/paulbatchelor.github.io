<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<title>Sporthdraw: Convert audio to picture, and vice versa</title>

<link rel="stylesheet" href="/css/style.css">

</head>
<body class="home">
<div id="container">
<h1>Sporthdraw: Convert audio to picture, and vice versa</h1>
<p>2015-09-02</p>
<p>A few days ago, I wrote a little utility called 
<a href="http://github.com/paulbatchelor/sporthdraw.git">Sporthdraw</a>. 
Sporthdraw will
take audio output from <a href="/proj/sporth.html">Sporth</a> code, and write it to a png file The png file can 
then be converted into a wav file.</p>
<p>Here's one such picture, displaying a simple dialtone generated by Sporth:</p>
<img src = "/res/sporth/dial.png">

Sporthdraw is a 40-line shell script utilizing the amazing <a href="http://www.imagemagick.org">Imagemagick</a> 
commandline utility and <a href="http://sox.sourceforge.net">SoX</a>. Thanks to those two, I barely had to do anything ;)<h2>Why?</h2>
<p>I write a lot of "sketches" of sounds and and musical ideas, often no more than
a minute in length. When they end up sounding midly entertaining, I post them online
, with the hope that around 2.5 people will take 30 seconds out of their
day to listen to it.</p>
<p>Sharing any kind of short audio-only content over the web has always felt 
less than ideal. At the moment, I use <a href="https://www.soundcloud.com/thebatchelorlab">Soundcloud</a>, 
which I dislike for many reasons.
It always feels like overkill for audio less than thirty seconds. With Sporthdraw,
I can share audio wherever pictures can be shared on the web. </p>
<p>It's also a <a href="http://mentalfloss.com/article/50824/creating-windows-95-startup-sound">neat compositional challenge</a>. 
A 500x500 png image yields about 4.2 seconds of 
lossess 32-bit floating point PCM audio at 44.1kHz. How creative can I be in that
window of time?</p>
<h2>Usage</h2>
<p>First, create some sporth code (in this case, a North American dialtone):</p>
<code>echo "440 0.3 sine 350 0.3 sine +" &gt; dial.sp</code>
<p>Next, use Sporthdraw to generate the png file:</p>
<code>./sporthdraw sp2png dial.sp dial.png</code>
<p>To convert the png file to an audio file, run:</p>
<code>./sporthdraw png2wav dial.png dial.wav</code>
<h3>How it works</h3>
<p><a href="/proj/sporth.html">Sporth</a>, my musical programming language, has the ability
of writing raw audio data to standard output. Imagemagick processes the output
of Sporth, encoding every byte as a single r, g, or b parameter in a pixel. Since
every audio sample is four bytes in size, every 4 pixels yields three samples. </p>
<p>In a 500x500 picture:</p>
<p>500 <em> 500 </em> 3 = 750000 bytes</p>
<p>750000 / 4 = 187500 32-bit floating-point samples</p>
<p>187500 / 44100 = ~4.2 seconds of audio at 44.1kHz samplerate</p>

</div>
</body>
</html>
