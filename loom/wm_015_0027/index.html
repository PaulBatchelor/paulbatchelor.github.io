<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">

<h3>4. Opening/Closing the database</h3>

<p><a id="wm_015_0027"></a>If no filename is provided, the weewiki database is used.
Otherwise, a new SQLite database is opened.
</p>
<div><b><i>&lt;&lt;open_the_db&gt;&gt;=</i></b></div><pre><code>if (argc == 2) {
    wiki = wmp_core_db(&core);
} else {
    rc = sqlite3_open(argv[2], &wiki);
    if (rc) {
        fprintf(stderr,
                "Could not open database: %s",
                sqlite3_errmsg(wiki));
        sqlite3_close(wiki);
        return 0;
    }
}</pre></code>
<p></p>
<p>At the end, this SQLite database is closed. If it's the same
as the database (the same pointer), this does not happen.
</p>
<div><b><i>&lt;&lt;close_the_db&gt;&gt;=</i></b></div><pre><code>if (wiki != wmp_core_db(&core)) {
    printf("closing...\n");
    sqlite3_close(wiki);
    wiki = NULL;
}</pre></code>
</div>
</body>
</html>
