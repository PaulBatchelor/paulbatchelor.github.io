<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div id="main">

<h3>5. The Canvas</h3>

<p><a id="wm_000_0166"></a>The canvas is an abstraction of the bitmap buffer. Regions
get drawn to the buffer via a canvas.
</p>
<div><b><i>&lt;&lt;typedefs&gt;&gt;=</i></b></div><pre><code>typedef struct btprnt_canvas btprnt_canvas;</pre></code>
<p></p>
<p>It can be created with <code>btprnt_canvas_new</code>, and freed with
<code>btprnt_canvas_del</code>.
</p>
<div><b><i>&lt;&lt;funcdefs&gt;&gt;=</i></b></div><pre><code>btprnt_canvas * btprnt_canvas_new(btprnt_buf *buf);</pre></code>
<div><b><i>&lt;&lt;funcs&gt;&gt;=</i></b></div><pre><code>btprnt_canvas * btprnt_canvas_new(btprnt_buf *buf)
{
    btprnt_canvas *c;

    c = calloc(1, sizeof(btprnt_canvas));

    if (c == NULL) return NULL;

    c-&gt;buf = buf;
    btprnt_canvas_offx_set(c, 0);
    btprnt_canvas_offy_set(c, 0);
    return c;
}</pre></code>
<div><b><i>&lt;&lt;funcdefs&gt;&gt;=</i></b></div><pre><code>void btprnt_canvas_offx_set(btprnt_canvas *c, int x);
void btprnt_canvas_offy_set(btprnt_canvas *c, int y);</pre></code>
<div><b><i>&lt;&lt;funcs&gt;&gt;=</i></b></div><pre><code>void btprnt_canvas_offx_set(btprnt_canvas *c, int x)
{
    c-&gt;offx = x;
}

void btprnt_canvas_offy_set(btprnt_canvas *c, int y)
{
    c-&gt;offy = y;
}</pre></code>
<div><b><i>&lt;&lt;funcdefs&gt;&gt;=</i></b></div><pre><code>void btprnt_canvas_del(btprnt_canvas **c);</pre></code>
<div><b><i>&lt;&lt;funcs&gt;&gt;=</i></b></div><pre><code>void btprnt_canvas_del(btprnt_canvas **c)
{
    if (*c == NULL) return;
    free(*c);
    *c = NULL;
}</pre></code>
<p></p>
<p>The main point of canvas abstraction is to provide an
infinite for regions to lie on. Any pixels out of range of
the buffer will be clipped by the canvas. Regions can be
resized and moved around without having to worry about
accessing bad memory.
</p>
<div><b><i>&lt;&lt;structs&gt;&gt;=</i></b></div><pre><code>struct btprnt_canvas {
    btprnt_buf *buf;
    int offx, offy;
};</pre></code>
<p></p>
<p>The canvas has a global offset value. A canvas can be moved
around to make regions or less visible.
</p>
<br>
<p><hr>

<a href="/loom/wm_000_0112">prev</a> | <a href="/loom/btprnt">home</a> | <a href="/loom/wm_000_0187">next</a></p>
</div>
</body>
</html>
