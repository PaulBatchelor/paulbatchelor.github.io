<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/brain/css/style.css">

</head>
<body>
<div id="main">
<p><title>mastering_zfs/ch05</title>
<h1>ch05</h1>
<a href="/brain/dz">dz</a> / <a href="/brain/dz/mastering_zfs">mastering_zfs</a> / <a href="/brain/dz/mastering_zfs/ch05">ch05</a>
<p></p>
<h2>Summary</h2>
<p>
Chapter 5: Repairs and Renovations
</p>
<h2>Node Tree</h2>
<ul>
<li>
<a href=#zpool_cli>zpool_cli</a><ul>
<li>
<a href=#zpool_export>zpool_export</a></li>
<li>
<a href=#zpool_import>zpool_import</a></li>
<li>
<a href=#zpool_online>zpool_online</a></li>
<li>
<a href=#zpool_replace>zpool_replace</a></li>
<li>
<a href=#zpool_status>zpool_status</a></li>
<li>
<a href=#zpool_upgrade>zpool_upgrade</a><ul>
<li>
<a href=#zroot>zroot</a></li>
<li>
<a href=#dash_v>dash_v</a></li>
</ul>
</li>
<li>
<a href=#online_dash_e>online_dash_e</a><ul>
<li>
<a href=#manual>manual</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href=#zpool_version_upgrades>zpool_version_upgrades</a><ul>
<li>
<a href=#zfs_ver_feature_flags>zfs_ver_feature_flags</a></li>
<li>
<a href=#zpool_upgrade>zpool_upgrade</a><ul>
<li>
<a href=#zroot>zroot</a></li>
<li>
<a href=#dash_v>dash_v</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href=#expanding_pools>expanding_pools</a><ul>
<li>
<a href=#adding_vdevs>adding_vdevs</a><ul>
<li>
<a href=#striped_pools>striped_pools</a></li>
<li>
<a href=#striped_raidz_pools>striped_raidz_pools</a></li>
<li>
<a href=#mirror_striped_pools>mirror_striped_pools</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href=#exporting_importing_drives>exporting_importing_drives</a><ul>
<li>
<a href=#exporting>exporting</a><ul>
<li>
<a href=#zpool_export>zpool_export</a></li>
<li>
<a href=#analogous_to_fs_unmount>analogous_to_fs_unmount</a></li>
</ul>
</li>
<li>
<a href=#importing>importing</a><ul>
<li>
<a href=#zpool_import>zpool_import</a></li>
<li>
<a href=#bring_drive_back_online>bring_drive_back_online</a></li>
<li>
<a href=#rename_import_pools>rename_import_pools</a></li>
<li>
<a href=#special_imports>special_imports</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href=#hardware_status>hardware_status</a><ul>
<li>
<a href=#states>states</a><ul>
<li>
<a href=#unavail>unavail</a></li>
<li>
<a href=#degraded>degraded</a></li>
<li>
<a href=#faulted>faulted</a></li>
<li>
<a href=#offline>offline</a></li>
<li>
<a href=#online>online</a></li>
<li>
<a href=#removed>removed</a></li>
</ul>
</li>
<li>
<a href=#zpool_status>zpool_status</a></li>
</ul>
</li>
<li>
<a href=#larger_providers>larger_providers</a><ul>
<li>
<a href=#autoexpand>autoexpand</a><ul>
<li>
<a href=#manual>manual</a></li>
</ul>
</li>
<li>
<a href=#can_replace_smaller>can_replace_smaller</a></li>
</ul>
</li>
<li>
<a href=#log_cache_maintenance>log_cache_maintenance</a></li>
<li>
<a href=#replacing_drives>replacing_drives</a><ul>
<li>
<a href=#unavail>unavail</a></li>
<li>
<a href=#faulted_drives>faulted_drives</a><ul>
<li>
<a href=#zpool_replace>zpool_replace</a></li>
</ul>
</li>
<li>
<a href=#mirror_providers>mirror_providers</a></li>
<li>
<a href=#online>online</a></li>
<li>
<a href=#same_slot>same_slot</a></li>
</ul>
</li>
<li>
<a href=#resilvering>resilvering</a><ul>
<li>
<a href=#zfs_reconstruction>zfs_reconstruction</a></li>
</ul>
</li>
<li>
<a href=#restoring_devices>restoring_devices</a><ul>
<li>
<a href=#zpool_online>zpool_online</a></li>
</ul>
</li>
</ul>
<h2>Nodes</h2>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="expanding_pools">expanding_pools</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Expanding Pools
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#adding_vdevs>adding_vdevs</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="adding_vdevs">adding_vdevs</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Adding VDEVs
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#striped_pools>striped_pools</a>, <a href=#striped_raidz_pools>striped_raidz_pools</a>, <a href=#mirror_striped_pools>mirror_striped_pools</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#expanding_pools>expanding_pools</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="striped_pools">striped_pools</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Striped Pools
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#adding_vdevs>adding_vdevs</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="striped_raidz_pools">striped_raidz_pools</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Striped RAID-Z Pools
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#adding_vdevs>adding_vdevs</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="mirror_striped_pools">mirror_striped_pools</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Mirror-striped pools
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#adding_vdevs>adding_vdevs</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="hardware_status">hardware_status</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Hardware Status
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#states>states</a>, <a href=#zpool_status>zpool_status</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="states">states</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
States
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#unavail>unavail</a>, <a href=#degraded>degraded</a>, <a href=#faulted>faulted</a>, <a href=#offline>offline</a>, <a href=#online>online</a>, <a href=#removed>removed</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#hardware_status>hardware_status</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_status">zpool_status</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
status
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#hardware_status>hardware_status</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="unavail">unavail</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Unavail
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>, <a href=#replacing_drives>replacing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="degraded">degraded</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Degraded
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="faulted">faulted</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Faulted
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="offline">offline</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Offline
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="online">online</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Online
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>, <a href=#replacing_drives>replacing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="removed">removed</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Removed
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#states>states</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="replacing_drives">replacing_drives</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Replacing Derives
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#unavail>unavail</a>, <a href=#faulted_drives>faulted_drives</a>, <a href=#mirror_providers>mirror_providers</a>, <a href=#online>online</a>, <a href=#same_slot>same_slot</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="faulted_drives">faulted_drives</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Faulted Drives
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zpool_replace>zpool_replace</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#replacing_drives>replacing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="mirror_providers">mirror_providers</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Mirror Providers
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#replacing_drives>replacing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="same_slot">same_slot</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Same Slot
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#replacing_drives>replacing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_replace">zpool_replace</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
replace
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#faulted_drives>faulted_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="resilvering">resilvering</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Resilvering
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zfs_reconstruction>zfs_reconstruction</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zfs_reconstruction">zfs_reconstruction</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
ZFS reconstruction
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#resilvering>resilvering</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_version_upgrades">zpool_version_upgrades</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
ZPool versions and upgrades
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zfs_ver_feature_flags>zfs_ver_feature_flags</a>, <a href=#zpool_upgrade>zpool_upgrade</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zfs_ver_feature_flags">zfs_ver_feature_flags</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
ZFS version and feature flags
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_version_upgrades>zpool_version_upgrades</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_upgrade">zpool_upgrade</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
upgrade
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zroot>zroot</a>, <a href=#dash_v>dash_v</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#zpool_version_upgrades>zpool_version_upgrades</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zroot">zroot</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
zroot
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_upgrade>zpool_upgrade</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="dash_v">dash_v</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
-v
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_upgrade>zpool_upgrade</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_cli">zpool_cli</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
zpool (CLI)
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zpool_export>zpool_export</a>, <a href=#zpool_import>zpool_import</a>, <a href=#zpool_online>zpool_online</a>, <a href=#zpool_replace>zpool_replace</a>, <a href=#zpool_status>zpool_status</a>, <a href=#zpool_upgrade>zpool_upgrade</a>, <a href=#online_dash_e>online_dash_e</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_export">zpool_export</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
export
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#exporting>exporting</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_import">zpool_import</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
import
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#importing>importing</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="zpool_online">zpool_online</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
online
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>, <a href=#restoring_devices>restoring_devices</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="online_dash_e">online_dash_e</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
online -e
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#manual>manual</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#zpool_cli>zpool_cli</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="manual">manual</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
manual
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#online_dash_e>online_dash_e</a>, <a href=#autoexpand>autoexpand</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="exporting_importing_drives">exporting_importing_drives</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Exporting and importing Drives
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#exporting>exporting</a>, <a href=#importing>importing</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="exporting">exporting</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Exporting
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zpool_export>zpool_export</a>, <a href=#analogous_to_fs_unmount>analogous_to_fs_unmount</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#exporting_importing_drives>exporting_importing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="importing">importing</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Importing
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zpool_import>zpool_import</a>, <a href=#bring_drive_back_online>bring_drive_back_online</a>, <a href=#rename_import_pools>rename_import_pools</a>, <a href=#special_imports>special_imports</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#exporting_importing_drives>exporting_importing_drives</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="analogous_to_fs_unmount">analogous_to_fs_unmount</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Roughly analogous to unmounting on traditional filesystem
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#exporting>exporting</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="bring_drive_back_online">bring_drive_back_online</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Bring drive back online
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#importing>importing</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="rename_import_pools">rename_import_pools</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Renaming import pools
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#importing>importing</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="special_imports">special_imports</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Special Imports
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#importing>importing</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="restoring_devices">restoring_devices</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Restoring devices
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#zpool_online>zpool_online</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="larger_providers">larger_providers</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Larger Providers
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#autoexpand>autoexpand</a>, <a href=#can_replace_smaller>can_replace_smaller</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="autoexpand">autoexpand</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
autoexpand
</td>
</tr>
<tr>
<td>
children
</td>
<td>
<a href=#manual>manual</a>
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#larger_providers>larger_providers</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="can_replace_smaller">can_replace_smaller</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Can Replace Smaller
</td>
</tr>
<tr>
<td>
parents
</td>
<td>
<a href=#larger_providers>larger_providers</a>
</td>
</tr>
</table><br>
<table border="1px">
<tr>
<td colspan=2><b>
<a id="log_cache_maintenance">log_cache_maintenance</a>
</b></td>
</tr>
<tr>
<td>
content
</td>
<td>
Log and Cache Device Maintenance
</td>
</tr>
</table><br>
</p>
</div>
</body>
</html>
